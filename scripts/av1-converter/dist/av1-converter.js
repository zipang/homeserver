#!/usr/bin/env bun
// @bun
var F0=import.meta.require;var{Glob:A1,$:Df}=globalThis.Bun;import{notStrictEqual as ef,strictEqual as $1}from"assert";var Cf={right:nf,center:bf};class Ih{constructor($){var h;this.width=$.width,this.wrap=(h=$.wrap)!==null&&h!==void 0?h:!0,this.rows=[]}span(...$){let h=this.div(...$);h.span=!0}resetOutput(){this.rows=[]}div(...$){if($.length===0)this.div("");if(this.wrap&&this.shouldApplyLayoutDSL(...$)&&typeof $[0]==="string")return this.applyLayoutDSL($[0]);let h=$.map((f)=>{if(typeof f==="string")return this.colFromString(f);return f});return this.rows.push(h),h}shouldApplyLayoutDSL(...$){return $.length===1&&typeof $[0]==="string"&&/[\t\n]/.test($[0])}applyLayoutDSL($){let h=$.split(`
`).map((z)=>z.split("\t")),f=0;return h.forEach((z)=>{if(z.length>1&&Z0.stringWidth(z[0])>f)f=Math.min(Math.floor(this.width*0.5),Z0.stringWidth(z[0]))}),h.forEach((z)=>{this.div(...z.map((G,O)=>{return{text:G.trim(),padding:this.measurePadding(G),width:O===0&&z.length>1?f:void 0}}))}),this.rows[this.rows.length-1]}colFromString($){return{text:$,padding:this.measurePadding($)}}measurePadding($){let h=Z0.stripAnsi($);return[0,h.match(/\s*$/)[0].length,0,h.match(/^\s*/)[0].length]}toString(){let $=[];return this.rows.forEach((h)=>{this.rowToString(h,$)}),$.filter((h)=>!h.hidden).map((h)=>h.text).join(`
`)}rowToString($,h){return this.rasterize($).forEach((f,z)=>{let G="";f.forEach((O,B)=>{let{width:U}=$[B],I=this.negatePadding($[B]),W=O;if(I>Z0.stringWidth(O))W+=" ".repeat(I-Z0.stringWidth(O));if($[B].align&&$[B].align!=="left"&&this.wrap){let Q=Cf[$[B].align];if(W=Q(W,I),Z0.stringWidth(W)<I)W+=" ".repeat((U||0)-Z0.stringWidth(W)-1)}let V=$[B].padding||[0,0,0,0];if(V[3])G+=" ".repeat(V[3]);if(G+=Eh($[B],W,"| "),G+=W,G+=Eh($[B],W," |"),V[1])G+=" ".repeat(V[1]);if(z===0&&h.length>0)G=this.renderInline(G,h[h.length-1])}),h.push({text:G.replace(/ +$/,""),span:$.span})}),h}renderInline($,h){let f=$.match(/^ */),z=f?f[0].length:0,G=h.text,O=Z0.stringWidth(G.trimRight());if(!h.span)return $;if(!this.wrap)return h.hidden=!0,G+$;if(z<O)return $;return h.hidden=!0,G.trimRight()+" ".repeat(z-O)+$.trimLeft()}rasterize($){let h=[],f=this.columnWidths($),z;return $.forEach((G,O)=>{if(G.width=f[O],this.wrap)z=Z0.wrap(G.text,this.negatePadding(G),{hard:!0}).split(`
`);else z=G.text.split(`
`);if(G.border)z.unshift("."+"-".repeat(this.negatePadding(G)+2)+"."),z.push("'"+"-".repeat(this.negatePadding(G)+2)+"'");if(G.padding)z.unshift(...Array(G.padding[0]||0).fill("")),z.push(...Array(G.padding[2]||0).fill(""));z.forEach((B,U)=>{if(!h[U])h.push([]);let I=h[U];for(let W=0;W<O;W++)if(I[W]===void 0)I.push("");I.push(B)})}),h}negatePadding($){let h=$.width||0;if($.padding)h-=($.padding[3]||0)+($.padding[1]||0);if($.border)h-=4;return h}columnWidths($){if(!this.wrap)return $.map((O)=>{return O.width||Z0.stringWidth(O.text)});let h=$.length,f=this.width,z=$.map((O)=>{if(O.width)return h--,f-=O.width,O.width;return}),G=h?Math.floor(f/h):0;return z.map((O,B)=>{if(O===void 0)return Math.max(G,_f($[B]));return O})}}function Eh($,h,f){if($.border){if(/[.']-+[.']/.test(h))return"";if(h.trim().length!==0)return f;return"  "}return""}function _f($){let h=$.padding||[],f=1+(h[3]||0)+(h[1]||0);if($.border)return f+4;return f}function xf(){if(typeof process==="object"&&process.stdout&&process.stdout.columns)return process.stdout.columns;return 80}function nf($,h){$=$.trim();let f=Z0.stringWidth($);if(f<h)return" ".repeat(h-f)+$;return $}function bf($,h){$=$.trim();let f=Z0.stringWidth($);if(f>=h)return $;return" ".repeat(h-f>>1)+$}var Z0;function Qh($,h){return Z0=h,new Ih({width:($===null||$===void 0?void 0:$.width)||xf(),wrap:$===null||$===void 0?void 0:$.wrap})}var Wh=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function x$($){return $.replace(Wh,"")}function Nh($,h){let[f,z]=$.match(Wh)||["",""];$=x$($);let G="";for(let O=0;O<$.length;O++){if(O!==0&&O%h===0)G+=`
`;G+=$.charAt(O)}if(f&&z)G=`${f}${G}${z}`;return G}function n$($){return Qh($,{stringWidth:(h)=>{return[...h].length},stripAnsi:x$,wrap:Nh})}import{dirname as Lh,resolve as Uh}from"path";import{readdirSync as tf,statSync as uf}from"fs";function b$($,h){let f=Uh(".",$),z;if(!uf(f).isDirectory())f=Lh(f);while(!0){if(z=h(f,tf(f)),z)return Uh(f,z);if(f=Lh(z=f),z===f)break}}import{inspect as h1}from"util";import{readFileSync as f1}from"fs";import{fileURLToPath as z1}from"url";import{format as mf}from"util";import{normalize as pf,resolve as df}from"path";function u0($){if(!($!==$.toLowerCase()&&$!==$.toUpperCase()))$=$.toLowerCase();if($.indexOf("-")===-1&&$.indexOf("_")===-1)return $;else{let f="",z=!1,G=$.match(/^-+/);for(let O=G?G[0].length:0;O<$.length;O++){let B=$.charAt(O);if(z)z=!1,B=B.toUpperCase();if(O!==0&&(B==="-"||B==="_"))z=!0;else if(B!=="-"&&B!=="_")f+=B}return f}}function L$($,h){let f=$.toLowerCase();h=h||"-";let z="";for(let G=0;G<$.length;G++){let O=f.charAt(G),B=$.charAt(G);if(O!==B&&G>0)z+=`${h}${f.charAt(G)}`;else z+=B}return z}function U$($){if($===null||$===void 0)return!1;if(typeof $==="number")return!0;if(/^0x[0-9a-f]+$/i.test($))return!0;if(/^0[^.]/.test($))return!1;return/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test($)}function qh($){if(Array.isArray($))return $.map((B)=>typeof B!=="string"?B+"":B);$=$.trim();let h=0,f=null,z=null,G=null,O=[];for(let B=0;B<$.length;B++){if(f=z,z=$.charAt(B),z===" "&&!G){if(f!==" ")h++;continue}if(z===G)G=null;else if((z==="'"||z==='"')&&!G)G=z;if(!O[h])O[h]="";O[h]+=z}return O}var N0;(function($){$.BOOLEAN="boolean",$.STRING="string",$.NUMBER="number",$.ARRAY="array"})(N0||(N0={}));var w0;class u${constructor($){w0=$}parse($,h){let f=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},h),z=qh($),G=typeof $==="string",O=Af(Object.assign(Object.create(null),f.alias)),B=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},f.configuration),U=Object.assign(Object.create(null),f.default),I=f.configObjects||[],W=f.envPrefix,V=B["populate--"],Q=V?"--":"_",L=Object.create(null),j=Object.create(null),q=f.__||w0.format,E={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},b=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,u=new RegExp("^--"+B["negation-prefix"]+"(.+)");if([].concat(f.array||[]).filter(Boolean).forEach(function(J){let Z=typeof J==="object"?J.key:J,T=Object.keys(J).map(function(N){return{boolean:"bools",string:"strings",number:"numbers"}[N]}).filter(Boolean).pop();if(T)E[T][Z]=!0;E.arrays[Z]=!0,E.keys.push(Z)}),[].concat(f.boolean||[]).filter(Boolean).forEach(function(J){E.bools[J]=!0,E.keys.push(J)}),[].concat(f.string||[]).filter(Boolean).forEach(function(J){E.strings[J]=!0,E.keys.push(J)}),[].concat(f.number||[]).filter(Boolean).forEach(function(J){E.numbers[J]=!0,E.keys.push(J)}),[].concat(f.count||[]).filter(Boolean).forEach(function(J){E.counts[J]=!0,E.keys.push(J)}),[].concat(f.normalize||[]).filter(Boolean).forEach(function(J){E.normalize[J]=!0,E.keys.push(J)}),typeof f.narg==="object")Object.entries(f.narg).forEach(([J,Z])=>{if(typeof Z==="number")E.nargs[J]=Z,E.keys.push(J)});if(typeof f.coerce==="object")Object.entries(f.coerce).forEach(([J,Z])=>{if(typeof Z==="function")E.coercions[J]=Z,E.keys.push(J)});if(typeof f.config<"u"){if(Array.isArray(f.config)||typeof f.config==="string")[].concat(f.config).filter(Boolean).forEach(function(J){E.configs[J]=!0});else if(typeof f.config==="object")Object.entries(f.config).forEach(([J,Z])=>{if(typeof Z==="boolean"||typeof Z==="function")E.configs[J]=Z})}B$(f.key,O,f.default,E.arrays),Object.keys(U).forEach(function(J){(E.aliases[J]||[]).forEach(function(Z){U[Z]=U[J]})});let m=null;_$();let $0=[],A=Object.assign(Object.create(null),{_:[]}),s0={};for(let J=0;J<z.length;J++){let Z=z[J],T=Z.replace(/^-{3,}/,"---"),N,X,K,H,F,M0;if(Z!=="--"&&/^-/.test(Z)&&o(Z))K0(Z);else if(T.match(/^---+(=|$)/)){K0(Z);continue}else if(Z.match(/^--.+=/)||!B["short-option-groups"]&&Z.match(/^-.+=/)){if(H=Z.match(/^--?([^=]+)=([\s\S]*)$/),H!==null&&Array.isArray(H)&&H.length>=3)if(C(H[1],E.arrays))J=r0(J,H[1],z,H[2]);else if(C(H[1],E.nargs)!==!1)J=W0(J,H[1],z,H[2]);else d(H[1],H[2],!0)}else if(Z.match(u)&&B["boolean-negation"]){if(H=Z.match(u),H!==null&&Array.isArray(H)&&H.length>=2)X=H[1],d(X,C(X,E.arrays)?[!1]:!1)}else if(Z.match(/^--.+/)||!B["short-option-groups"]&&Z.match(/^-[^-]+/)){if(H=Z.match(/^--?(.+)/),H!==null&&Array.isArray(H)&&H.length>=2)if(X=H[1],C(X,E.arrays))J=r0(J,X,z);else if(C(X,E.nargs)!==!1)J=W0(J,X,z);else if(F=z[J+1],F!==void 0&&(!F.match(/^-/)||F.match(b))&&!C(X,E.bools)&&!C(X,E.counts))d(X,F),J++;else if(/^(true|false)$/.test(F))d(X,F),J++;else d(X,c(X))}else if(Z.match(/^-.\..+=/)){if(H=Z.match(/^-([^=]+)=([\s\S]*)$/),H!==null&&Array.isArray(H)&&H.length>=3)d(H[1],H[2])}else if(Z.match(/^-.\..+/)&&!Z.match(b)){if(F=z[J+1],H=Z.match(/^-(.\..+)/),H!==null&&Array.isArray(H)&&H.length>=2)if(X=H[1],F!==void 0&&!F.match(/^-/)&&!C(X,E.bools)&&!C(X,E.counts))d(X,F),J++;else d(X,c(X))}else if(Z.match(/^-[^-]+/)&&!Z.match(b)){K=Z.slice(1,-1).split(""),N=!1;for(let J0=0;J0<K.length;J0++){if(F=Z.slice(J0+2),K[J0+1]&&K[J0+1]==="="){if(M0=Z.slice(J0+3),X=K[J0],C(X,E.arrays))J=r0(J,X,z,M0);else if(C(X,E.nargs)!==!1)J=W0(J,X,z,M0);else d(X,M0);N=!0;break}if(F==="-"){d(K[J0],F);continue}if(/[A-Za-z]/.test(K[J0])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(F)&&C(F,E.bools)===!1){d(K[J0],F),N=!0;break}if(K[J0+1]&&K[J0+1].match(/\W/)){d(K[J0],F),N=!0;break}else d(K[J0],c(K[J0]))}if(X=Z.slice(-1)[0],!N&&X!=="-")if(C(X,E.arrays))J=r0(J,X,z);else if(C(X,E.nargs)!==!1)J=W0(J,X,z);else if(F=z[J+1],F!==void 0&&(!/^(-|--)[^-]/.test(F)||F.match(b))&&!C(X,E.bools)&&!C(X,E.counts))d(X,F),J++;else if(/^(true|false)$/.test(F))d(X,F),J++;else d(X,c(X))}else if(Z.match(/^-[0-9]$/)&&Z.match(b)&&C(Z.slice(1),E.bools))X=Z.slice(1),d(X,c(X));else if(Z==="--"){$0=z.slice(J+1);break}else if(B["halt-at-non-option"]){$0=z.slice(J);break}else K0(Z)}if(h0(A,!0),h0(A,!1),w(A),i(),D0(A,E.aliases,U,!0),p(A),B["set-placeholder-key"])f0(A);if(Object.keys(E.counts).forEach(function(J){if(!v(A,J.split(".")))d(J,0)}),V&&$0.length)A[Q]=[];if($0.forEach(function(J){A[Q].push(J)}),B["camel-case-expansion"]&&B["strip-dashed"])Object.keys(A).filter((J)=>J!=="--"&&J.includes("-")).forEach((J)=>{delete A[J]});if(B["strip-aliased"])[].concat(...Object.keys(O).map((J)=>O[J])).forEach((J)=>{if(B["camel-case-expansion"]&&J.includes("-"))delete A[J.split(".").map((Z)=>u0(Z)).join(".")];delete A[J]});function K0(J){let Z=Y("_",J);if(typeof Z==="string"||typeof Z==="number")A._.push(Z)}function W0(J,Z,T,N){let X,K=C(Z,E.nargs);if(K=typeof K!=="number"||isNaN(K)?1:K,K===0){if(!G0(N))m=Error(q("Argument unexpected for: %s",Z));return d(Z,c(Z)),J}let H=G0(N)?0:1;if(B["nargs-eats-options"]){if(T.length-(J+1)+H<K)m=Error(q("Not enough arguments following: %s",Z));H=K}else{for(X=J+1;X<T.length;X++)if(!T[X].match(/^-[^0-9]/)||T[X].match(b)||o(T[X]))H++;else break;if(H<K)m=Error(q("Not enough arguments following: %s",Z))}let F=Math.min(H,K);if(!G0(N)&&F>0)d(Z,N),F--;for(X=J+1;X<F+J+1;X++)d(Z,T[X]);return J+F}function r0(J,Z,T,N){let X=[],K=N||T[J+1],H=C(Z,E.nargs);if(C(Z,E.bools)&&!/^(true|false)$/.test(K))X.push(!0);else if(G0(K)||G0(N)&&/^-/.test(K)&&!b.test(K)&&!o(K)){if(U[Z]!==void 0){let F=U[Z];X=Array.isArray(F)?F:[F]}}else{if(!G0(N))X.push(R(Z,N,!0));for(let F=J+1;F<T.length;F++){if(!B["greedy-arrays"]&&X.length>0||H&&typeof H==="number"&&X.length>=H)break;if(K=T[F],/^-/.test(K)&&!b.test(K)&&!o(K))break;J=F,X.push(R(Z,K,G))}}if(typeof H==="number"&&(H&&X.length<H||isNaN(H)&&X.length===0))m=Error(q("Not enough arguments following: %s",Z));return d(Z,X),J}function d(J,Z,T=G){if(/-/.test(J)&&B["camel-case-expansion"]){let K=J.split(".").map(function(H){return u0(H)}).join(".");O$(J,K)}let N=R(J,Z,T),X=J.split(".");if(R0(A,X,N),E.aliases[J])E.aliases[J].forEach(function(K){let H=K.split(".");R0(A,H,N)});if(X.length>1&&B["dot-notation"])(E.aliases[X[0]]||[]).forEach(function(K){let H=K.split("."),F=[].concat(X);if(F.shift(),H=H.concat(F),!(E.aliases[J]||[]).includes(H.join(".")))R0(A,H,N)});if(C(J,E.normalize)&&!C(J,E.arrays))[J].concat(E.aliases[J]||[]).forEach(function(H){Object.defineProperty(s0,H,{enumerable:!0,get(){return Z},set(F){Z=typeof F==="string"?w0.normalize(F):F}})})}function O$(J,Z){if(!(E.aliases[J]&&E.aliases[J].length))E.aliases[J]=[Z],L[Z]=!0;if(!(E.aliases[Z]&&E.aliases[Z].length))O$(Z,J)}function R(J,Z,T){if(T)Z=cf(Z);if(C(J,E.bools)||C(J,E.counts)){if(typeof Z==="string")Z=Z==="true"}let N=Array.isArray(Z)?Z.map(function(X){return Y(J,X)}):Y(J,Z);if(C(J,E.counts)&&(G0(N)||typeof N==="boolean"))N=t$();if(C(J,E.normalize)&&C(J,E.arrays))if(Array.isArray(Z))N=Z.map((X)=>{return w0.normalize(X)});else N=w0.normalize(Z);return N}function Y(J,Z){if(!B["parse-positional-numbers"]&&J==="_")return Z;if(!C(J,E.strings)&&!C(J,E.bools)&&!Array.isArray(Z)){if(U$(Z)&&B["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${Z}`)))||!G0(Z)&&C(J,E.numbers))Z=Number(Z)}return Z}function w(J){let Z=Object.create(null);D0(Z,E.aliases,U),Object.keys(E.configs).forEach(function(T){let N=J[T]||Z[T];if(N)try{let X=null,K=w0.resolve(w0.cwd(),N),H=E.configs[T];if(typeof H==="function"){try{X=H(K)}catch(F){X=F}if(X instanceof Error){m=X;return}}else X=w0.require(K);n(X)}catch(X){if(X.name==="PermissionDenied")m=X;else if(J[T])m=Error(q("Invalid JSON config file: %s",N))}})}function n(J,Z){Object.keys(J).forEach(function(T){let N=J[T],X=Z?Z+"."+T:T;if(typeof N==="object"&&N!==null&&!Array.isArray(N)&&B["dot-notation"])n(N,X);else if(!v(A,X.split("."))||C(X,E.arrays)&&B["combine-arrays"])d(X,N)})}function i(){if(typeof I<"u")I.forEach(function(J){n(J)})}function h0(J,Z){if(typeof W>"u")return;let T=typeof W==="string"?W:"",N=w0.env();Object.keys(N).forEach(function(X){if(T===""||X.lastIndexOf(T,0)===0){let K=X.split("__").map(function(H,F){if(F===0)H=H.substring(T.length);return u0(H)});if((Z&&E.configs[K.join(".")]||!Z)&&!v(J,K))d(K.join("."),N[X])}})}function p(J){let Z,T=new Set;Object.keys(J).forEach(function(N){if(!T.has(N)){if(Z=C(N,E.coercions),typeof Z==="function")try{let X=Y(N,Z(J[N]));[].concat(E.aliases[N]||[],N).forEach((K)=>{T.add(K),J[K]=X})}catch(X){m=X}}})}function f0(J){return E.keys.forEach((Z)=>{if(~Z.indexOf("."))return;if(typeof J[Z]>"u")J[Z]=void 0}),J}function D0(J,Z,T,N=!1){Object.keys(T).forEach(function(X){if(!v(J,X.split("."))){if(R0(J,X.split("."),T[X]),N)j[X]=!0;(Z[X]||[]).forEach(function(K){if(v(J,K.split(".")))return;R0(J,K.split("."),T[X])})}})}function v(J,Z){let T=J;if(!B["dot-notation"])Z=[Z.join(".")];Z.slice(0,-1).forEach(function(X){T=T[X]||{}});let N=Z[Z.length-1];if(typeof T!=="object")return!1;else return N in T}function R0(J,Z,T){let N=J;if(!B["dot-notation"])Z=[Z.join(".")];Z.slice(0,-1).forEach(function(M0){if(M0=Th(M0),typeof N==="object"&&N[M0]===void 0)N[M0]={};if(typeof N[M0]!=="object"||Array.isArray(N[M0])){if(Array.isArray(N[M0]))N[M0].push({});else N[M0]=[N[M0],{}];N=N[M0][N[M0].length-1]}else N=N[M0]});let X=Th(Z[Z.length-1]),K=C(Z.join("."),E.arrays),H=Array.isArray(T),F=B["duplicate-arguments-array"];if(!F&&C(X,E.nargs)){if(F=!0,!G0(N[X])&&E.nargs[X]===1||Array.isArray(N[X])&&N[X].length===E.nargs[X])N[X]=void 0}if(T===t$())N[X]=t$(N[X]);else if(Array.isArray(N[X]))if(F&&K&&H)N[X]=B["flatten-duplicate-arrays"]?N[X].concat(T):(Array.isArray(N[X][0])?N[X]:[N[X]]).concat([T]);else if(!F&&Boolean(K)===Boolean(H))N[X]=T;else N[X]=N[X].concat([T]);else if(N[X]===void 0&&K)N[X]=H?T:[T];else if(F&&!(N[X]===void 0||C(X,E.counts)||C(X,E.bools)))N[X]=[N[X],T];else N[X]=T}function B$(...J){J.forEach(function(Z){Object.keys(Z||{}).forEach(function(T){if(E.aliases[T])return;E.aliases[T]=[].concat(O[T]||[]),E.aliases[T].concat(T).forEach(function(N){if(/-/.test(N)&&B["camel-case-expansion"]){let X=u0(N);if(X!==T&&E.aliases[T].indexOf(X)===-1)E.aliases[T].push(X),L[X]=!0}}),E.aliases[T].concat(T).forEach(function(N){if(N.length>1&&/[A-Z]/.test(N)&&B["camel-case-expansion"]){let X=L$(N,"-");if(X!==T&&E.aliases[T].indexOf(X)===-1)E.aliases[T].push(X),L[X]=!0}}),E.aliases[T].forEach(function(N){E.aliases[N]=[T].concat(E.aliases[T].filter(function(X){return N!==X}))})})})}function C(J,Z){let T=[].concat(E.aliases[J]||[],J),N=Object.keys(Z),X=T.find((K)=>N.includes(K));return X?Z[X]:!1}function a0(J){let Z=Object.keys(E);return[].concat(Z.map((N)=>E[N])).some(function(N){return Array.isArray(N)?N.includes(J):N[J]})}function Zh(J,...Z){return[].concat(...Z).some(function(N){let X=J.match(N);return X&&a0(X[1])})}function _(J){if(J.match(b)||!J.match(/^-[^-]+/))return!1;let Z=!0,T,N=J.slice(1).split("");for(let X=0;X<N.length;X++){if(T=J.slice(X+2),!a0(N[X])){Z=!1;break}if(N[X+1]&&N[X+1]==="="||T==="-"||/[A-Za-z]/.test(N[X])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(T)||N[X+1]&&N[X+1].match(/\W/))break}return Z}function o(J){return B["unknown-options-as-args"]&&z0(J)}function z0(J){if(J=J.replace(/^-{3,}/,"--"),J.match(b))return!1;if(_(J))return!1;return!Zh(J,/^-+([^=]+?)=[\s\S]*$/,u,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}function c(J){if(!C(J,E.bools)&&!C(J,E.counts)&&`${J}`in U)return U[J];else return B0(a(J))}function B0(J){return{[N0.BOOLEAN]:!0,[N0.STRING]:"",[N0.NUMBER]:void 0,[N0.ARRAY]:[]}[J]}function a(J){let Z=N0.BOOLEAN;if(C(J,E.strings))Z=N0.STRING;else if(C(J,E.numbers))Z=N0.NUMBER;else if(C(J,E.bools))Z=N0.BOOLEAN;else if(C(J,E.arrays))Z=N0.ARRAY;return Z}function G0(J){return J===void 0}function _$(){Object.keys(E.counts).find((J)=>{if(C(J,E.arrays))return m=Error(q("Invalid configuration: %s, opts.count excludes opts.array.",J)),!0;else if(C(J,E.nargs))return m=Error(q("Invalid configuration: %s, opts.count excludes opts.narg.",J)),!0;return!1})}return{aliases:Object.assign({},E.aliases),argv:Object.assign(s0,A),configuration:B,defaulted:Object.assign({},j),error:m,newAliases:Object.assign({},L)}}}function Af($){let h=[],f=Object.create(null),z=!0;Object.keys($).forEach(function(G){h.push([].concat($[G],G))});while(z){z=!1;for(let G=0;G<h.length;G++)for(let O=G+1;O<h.length;O++)if(h[G].filter(function(U){return h[O].indexOf(U)!==-1}).length){h[G]=h[G].concat(h[O]),h.splice(O,1),z=!0;break}}return h.forEach(function(G){G=G.filter(function(B,U,I){return I.indexOf(B)===U});let O=G.pop();if(O!==void 0&&typeof O==="string")f[O]=G}),f}function t$($){return $!==void 0?$+1:1}function Th($){if($==="__proto__")return"___proto___";return $}function cf($){return typeof $==="string"&&($[0]==="'"||$[0]==='"')&&$[$.length-1]===$[0]?$.substring(1,$.length-1):$}var A$,c$,m$,jh=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,Vh=(c$=(A$=process===null||process===void 0?void 0:process.versions)===null||A$===void 0?void 0:A$.node)!==null&&c$!==void 0?c$:(m$=process===null||process===void 0?void 0:process.version)===null||m$===void 0?void 0:m$.slice(1);if(Vh){if(Number(Vh.match(/^([^.]+)/)[1])<jh)throw Error(`yargs parser supports a minimum Node.js version of ${jh}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`)}var of=process?process.env:{},Yh=new u$({cwd:process.cwd,env:()=>{return of},format:mf,normalize:pf,resolve:df,require:($)=>{return F0($)}}),J$=function(h,f){return Yh.parse(h.slice(),f).argv};J$.detailed=function($,h){return Yh.parse($.slice(),h)};J$.camelCase=u0;J$.decamelize=L$;J$.looksLikeNumber=U$;var p$=J$;import{basename as G1,dirname as M1,extname as O1,relative as B1,resolve as Dh}from"path";function Hh(){if(vf())return 0;return 1}function vf(){return gf()&&!process.defaultApp}function gf(){return!!process.versions.electron}function i$($){return $.slice(Hh()+1)}function Ph(){return process.argv[Hh()]}class g extends Error{constructor($){super($||"yargs error");if(this.name="YError",Error.captureStackTrace)Error.captureStackTrace(this,g)}}import{readFileSync as kf,statSync as lf,writeFile as yf}from"fs";import{format as sf}from"util";import{resolve as rf}from"path";var Sh={fs:{readFileSync:kf,writeFile:yf},format:sf,resolve:rf,exists:($)=>{try{return lf($).isFile()}catch(h){return!1}}};var Y0;class Kh{constructor($){$=$||{},this.directory=$.directory||"./locales",this.updateFiles=typeof $.updateFiles==="boolean"?$.updateFiles:!0,this.locale=$.locale||"en",this.fallbackToLanguage=typeof $.fallbackToLanguage==="boolean"?$.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...$){if(typeof arguments[0]!=="string")return this._taggedLiteral(arguments[0],...arguments);let h=$.shift(),f=function(){};if(typeof $[$.length-1]==="function")f=$.pop();if(f=f||function(){},!this.cache[this.locale])this._readLocaleFile();if(!this.cache[this.locale][h]&&this.updateFiles)this.cache[this.locale][h]=h,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:f});else f();return Y0.format.apply(Y0.format,[this.cache[this.locale][h]||h].concat($))}__n(){let $=Array.prototype.slice.call(arguments),h=$.shift(),f=$.shift(),z=$.shift(),G=function(){};if(typeof $[$.length-1]==="function")G=$.pop();if(!this.cache[this.locale])this._readLocaleFile();let O=z===1?h:f;if(this.cache[this.locale][h])O=this.cache[this.locale][h][z===1?"one":"other"];if(!this.cache[this.locale][h]&&this.updateFiles)this.cache[this.locale][h]={one:h,other:f},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:G});else G();let B=[O];if(~O.indexOf("%d"))B.push(z);return Y0.format.apply(Y0.format,B.concat($))}setLocale($){this.locale=$}getLocale(){return this.locale}updateLocale($){if(!this.cache[this.locale])this._readLocaleFile();for(let h in $)if(Object.prototype.hasOwnProperty.call($,h))this.cache[this.locale][h]=$[h]}_taggedLiteral($,...h){let f="";return $.forEach(function(z,G){let O=h[G+1];if(f+=z,typeof O<"u")f+="%s"}),this.__.apply(this,[f].concat([].slice.call(h,1)))}_enqueueWrite($){if(this.writeQueue.push($),this.writeQueue.length===1)this._processWriteQueue()}_processWriteQueue(){let $=this,h=this.writeQueue[0],f=h.directory,z=h.locale,G=h.cb,O=this._resolveLocaleFile(f,z),B=JSON.stringify(this.cache[z],null,2);Y0.fs.writeFile(O,B,"utf-8",function(U){if($.writeQueue.shift(),$.writeQueue.length>0)$._processWriteQueue();G(U)})}_readLocaleFile(){let $={},h=this._resolveLocaleFile(this.directory,this.locale);try{if(Y0.fs.readFileSync)$=JSON.parse(Y0.fs.readFileSync(h,"utf-8"))}catch(f){if(f instanceof SyntaxError)f.message="syntax error in "+h;if(f.code==="ENOENT")$={};else throw f}this.cache[this.locale]=$}_resolveLocaleFile($,h){let f=Y0.resolve($,"./",h+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(f)&&~h.lastIndexOf("_")){let z=Y0.resolve($,"./",h.split("_")[0]+".json");if(this._fileExistsSync(z))f=z}return f}_fileExistsSync($){return Y0.exists($)}}function Rh($,h){Y0=h;let f=new Kh($);return{__:f.__.bind(f),__n:f.__n.bind(f),setLocale:f.setLocale.bind(f),getLocale:f.getLocale.bind(f),updateLocale:f.updateLocale.bind(f),locale:f.locale}}var af=($)=>{return Rh($,Sh)},wh=af;var J1="require is not supported by ESM",Fh="loading a directory of commands is not supported yet for ESM",X$;try{X$=z1(import.meta.url)}catch($){X$=process.cwd()}var X1=X$.substring(0,X$.lastIndexOf("node_modules")),d$={assert:{notStrictEqual:ef,strictEqual:$1},cliui:n$,findUp:b$,getEnv:($)=>{return process.env[$]},inspect:h1,getCallerFile:()=>{throw new g(Fh)},getProcessArgvBin:Ph,mainFilename:X1||process.cwd(),Parser:p$,path:{basename:G1,dirname:M1,extname:O1,relative:B1,resolve:Dh},process:{argv:()=>process.argv,cwd:process.cwd,emitWarning:($,h)=>process.emitWarning($,h),execPath:()=>process.execPath,exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns<"u"?process.stdout.columns:null},readFileSync:f1,require:()=>{throw new g(J1)},requireDirectory:()=>{throw new g(Fh)},stringWidth:($)=>{return[...$].length},y18n:wh({directory:Dh(X$,"../../../locales"),updateFiles:!1})};function X0($,h,f,z){f.assert.notStrictEqual($,h,z)}function o$($,h){h.assert.strictEqual(typeof $,"string")}function e0($){return Object.keys($)}function k($){return!!$&&!!$.then&&typeof $.then==="function"}function C0($){let f=$.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),z=/\.*[\][<>]/g,G=f.shift();if(!G)throw Error(`No command found in: ${$}`);let O={cmd:G.replace(z,""),demanded:[],optional:[]};return f.forEach((B,U)=>{let I=!1;if(B=B.replace(/\s/g,""),/\.+[\]>]/.test(B)&&U===f.length-1)I=!0;if(/^\[/.test(B))O.optional.push({cmd:B.replace(z,"").split("|"),variadic:I});else O.demanded.push({cmd:B.replace(z,"").split("|"),variadic:I})}),O}var Z1=["first","second","third","fourth","fifth","sixth"];function P($,h,f){function z(){return typeof $==="object"?[{demanded:[],optional:[]},$,h]:[C0(`cmd ${$}`),h,f]}try{let G=0,[O,B,U]=z(),I=[].slice.call(B);while(I.length&&I[I.length-1]===void 0)I.pop();let W=U||I.length;if(W<O.demanded.length)throw new g(`Not enough arguments provided. Expected ${O.demanded.length} but received ${I.length}.`);let V=O.demanded.length+O.optional.length;if(W>V)throw new g(`Too many arguments provided. Expected max ${V} but received ${W}.`);O.demanded.forEach((Q)=>{let L=I.shift(),j=Ch(L);if(Q.cmd.filter((E)=>E===j||E==="*").length===0)_h(j,Q.cmd,G);G+=1}),O.optional.forEach((Q)=>{if(I.length===0)return;let L=I.shift(),j=Ch(L);if(Q.cmd.filter((E)=>E===j||E==="*").length===0)_h(j,Q.cmd,G);G+=1})}catch(G){console.warn(G.stack)}}function Ch($){if(Array.isArray($))return"array";else if($===null)return"null";return typeof $}function _h($,h,f){throw new g(`Invalid ${Z1[f]||"manyith"} argument. Expected ${h.join(" or ")} but received ${$}.`)}class v${constructor($){this.globalMiddleware=[],this.frozens=[],this.yargs=$}addMiddleware($,h,f=!0,z=!1){if(P("<array|function> [boolean] [boolean] [boolean]",[$,h,f],arguments.length),Array.isArray($)){for(let G=0;G<$.length;G++){if(typeof $[G]!=="function")throw Error("middleware must be a function");let O=$[G];O.applyBeforeValidation=h,O.global=f}Array.prototype.push.apply(this.globalMiddleware,$)}else if(typeof $==="function"){let G=$;G.applyBeforeValidation=h,G.global=f,G.mutates=z,this.globalMiddleware.push($)}return this.yargs}addCoerceMiddleware($,h){let f=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter((z)=>{let G=[...f[h]||[],h];if(!z.option)return!0;else return!G.includes(z.option)}),$.option=h,this.addMiddleware($,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let $=this.frozens.pop();if($!==void 0)this.globalMiddleware=$}reset(){this.globalMiddleware=this.globalMiddleware.filter(($)=>$.global)}}function xh($){if(!$)return[];return $.map((h)=>{return h.applyBeforeValidation=!1,h})}function A0($,h,f,z){return f.reduce((G,O)=>{if(O.applyBeforeValidation!==z)return G;if(O.mutates){if(O.applied)return G;O.applied=!0}if(k(G))return G.then((B)=>Promise.all([B,O(B,h)])).then(([B,U])=>Object.assign(B,U));else{let B=O(G,h);return k(B)?B.then((U)=>Object.assign(G,U)):Object.assign(G,B)}},$)}function c0($,h,f=(z)=>{throw z}){try{let z=E1($)?$():$;return k(z)?z.then((G)=>h(G)):h(z)}catch(z){return f(z)}}function E1($){return typeof $==="function"}function g$($){for(let h=0,f=Object.keys(F0.cache),z;h<f.length;h++)if(z=F0.cache[f[h]],z.exports===$)return z;return null}var $$=/(^\*)|(^\$0)/;class bh{constructor($,h,f,z){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=z,this.usage=$,this.globalMiddleware=f,this.validation=h}addDirectory($,h,f,z){if(z=z||{},typeof z.recurse!=="boolean")z.recurse=!1;if(!Array.isArray(z.extensions))z.extensions=["js"];let G=typeof z.visit==="function"?z.visit:(O)=>O;z.visit=(O,B,U)=>{let I=G(O,B,U);if(I){if(this.requireCache.has(B))return I;else this.requireCache.add(B);this.addHandler(I)}return I},this.shim.requireDirectory({require:h,filename:f},$,z)}addHandler($,h,f,z,G,O){let B=[],U=xh(G);if(z=z||(()=>{}),Array.isArray($))if(I1($))[$,...B]=$;else for(let I of $)this.addHandler(I);else if(W1($)){let I=Array.isArray($.command)||typeof $.command==="string"?$.command:this.moduleName($);if($.aliases)I=[].concat(I).concat($.aliases);this.addHandler(I,this.extractDesc($),$.builder,$.handler,$.middlewares,$.deprecated);return}else if(nh(f)){this.addHandler([$].concat(B),h,f.builder,f.handler,f.middlewares,f.deprecated);return}if(typeof $==="string"){let I=C0($);B=B.map((Q)=>C0(Q).cmd);let W=!1,V=[I.cmd].concat(B).filter((Q)=>{if($$.test(Q))return W=!0,!1;return!0});if(V.length===0&&W)V.push("$0");if(W)I.cmd=V[0],B=V.slice(1),$=$.replace($$,I.cmd);if(B.forEach((Q)=>{this.aliasMap[Q]=I.cmd}),h!==!1)this.usage.command($,h,W,B,O);if(this.handlers[I.cmd]={original:$,description:h,handler:z,builder:f||{},middlewares:U,deprecated:O,demanded:I.demanded,optional:I.optional},W)this.defaultCommand=this.handlers[I.cmd]}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand($,h,f,z,G,O){let B=this.handlers[$]||this.handlers[this.aliasMap[$]]||this.defaultCommand,U=h.getInternalMethods().getContext(),I=U.commands.slice(),W=!$;if($)U.commands.push($),U.fullCommands.push(B.original);let V=this.applyBuilderUpdateUsageAndParse(W,B,h,f.aliases,I,z,G,O);return k(V)?V.then((Q)=>this.applyMiddlewareAndGetResult(W,B,Q.innerArgv,U,G,Q.aliases,h)):this.applyMiddlewareAndGetResult(W,B,V.innerArgv,U,G,V.aliases,h)}applyBuilderUpdateUsageAndParse($,h,f,z,G,O,B,U){let I=h.builder,W=f;if(q$(I)){f.getInternalMethods().getUsageInstance().freeze();let V=I(f.getInternalMethods().reset(z),U);if(k(V))return V.then((Q)=>{return W=uh(Q)?Q:f,this.parseAndUpdateUsage($,h,W,G,O,B)})}else if(Q1(I))f.getInternalMethods().getUsageInstance().freeze(),W=f.getInternalMethods().reset(z),Object.keys(h.builder).forEach((V)=>{W.option(V,I[V])});return this.parseAndUpdateUsage($,h,W,G,O,B)}parseAndUpdateUsage($,h,f,z,G,O){if($)f.getInternalMethods().getUsageInstance().unfreeze(!0);if(this.shouldUpdateUsage(f))f.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(z,h),h.description);let B=f.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,G,O);return k(B)?B.then((U)=>({aliases:f.parsed.aliases,innerArgv:U})):{aliases:f.parsed.aliases,innerArgv:B}}shouldUpdateUsage($){return!$.getInternalMethods().getUsageInstance().getUsageDisabled()&&$.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler($,h){let f=$$.test(h.original)?h.original.replace($$,"").trim():h.original,z=$.filter((G)=>{return!$$.test(G)});return z.push(f),`$0 ${z.join(" ")}`}handleValidationAndGetResult($,h,f,z,G,O,B,U){if(!O.getInternalMethods().getHasOutput()){let I=O.getInternalMethods().runValidation(G,U,O.parsed.error,$);f=c0(f,(W)=>{return I(W),W})}if(h.handler&&!O.getInternalMethods().getHasOutput()){O.getInternalMethods().setHasOutput();let I=!!O.getOptions().configuration["populate--"];if(O.getInternalMethods().postProcess(f,I,!1,!1),f=A0(f,O,B,!1),f=c0(f,(W)=>{let V=h.handler(W);return k(V)?V.then(()=>W):W}),!$)O.getInternalMethods().getUsageInstance().cacheHelpMessage();if(k(f)&&!O.getInternalMethods().hasParseCallback())f.catch((W)=>{try{O.getInternalMethods().getUsageInstance().fail(null,W)}catch(V){}})}if(!$)z.commands.pop(),z.fullCommands.pop();return f}applyMiddlewareAndGetResult($,h,f,z,G,O,B){let U={};if(G)return f;if(!B.getInternalMethods().getHasOutput())U=this.populatePositionals(h,f,z,B);let I=this.globalMiddleware.getMiddleware().slice(0).concat(h.middlewares),W=A0(f,B,I,!0);return k(W)?W.then((V)=>this.handleValidationAndGetResult($,h,V,z,O,B,I,U)):this.handleValidationAndGetResult($,h,W,z,O,B,I,U)}populatePositionals($,h,f,z){h._=h._.slice(f.commands.length);let G=$.demanded.slice(0),O=$.optional.slice(0),B={};this.validation.positionalCount(G.length,h._.length);while(G.length){let U=G.shift();this.populatePositional(U,h,B)}while(O.length){let U=O.shift();this.populatePositional(U,h,B)}return h._=f.commands.concat(h._.map((U)=>""+U)),this.postProcessPositionals(h,B,this.cmdToParseOptions($.original),z),B}populatePositional($,h,f){let z=$.cmd[0];if($.variadic)f[z]=h._.splice(0).map(String);else if(h._.length)f[z]=[String(h._.shift())]}cmdToParseOptions($){let h={array:[],default:{},alias:{},demand:{}},f=C0($);return f.demanded.forEach((z)=>{let[G,...O]=z.cmd;if(z.variadic)h.array.push(G),h.default[G]=[];h.alias[G]=O,h.demand[G]=!0}),f.optional.forEach((z)=>{let[G,...O]=z.cmd;if(z.variadic)h.array.push(G),h.default[G]=[];h.alias[G]=O}),h}postProcessPositionals($,h,f,z){let G=Object.assign({},z.getOptions());G.default=Object.assign(f.default,G.default);for(let I of Object.keys(f.alias))G.alias[I]=(G.alias[I]||[]).concat(f.alias[I]);G.array=G.array.concat(f.array),G.config={};let O=[];if(Object.keys(h).forEach((I)=>{h[I].map((W)=>{if(G.configuration["unknown-options-as-args"])G.key[I]=!0;O.push(`--${I}`),O.push(W)})}),!O.length)return;let B=Object.assign({},G.configuration,{"populate--":!1}),U=this.shim.Parser.detailed(O,Object.assign({},G,{configuration:B}));if(U.error)z.getInternalMethods().getUsageInstance().fail(U.error.message,U.error);else{let I=Object.keys(h);Object.keys(h).forEach((W)=>{I.push(...U.aliases[W])}),Object.keys(U.argv).forEach((W)=>{if(I.includes(W)){if(!h[W])h[W]=U.argv[W];if(!this.isInConfigs(z,W)&&!this.isDefaulted(z,W)&&Object.prototype.hasOwnProperty.call($,W)&&Object.prototype.hasOwnProperty.call(U.argv,W)&&(Array.isArray($[W])||Array.isArray(U.argv[W])))$[W]=[].concat($[W],U.argv[W]);else $[W]=U.argv[W]}})}}isDefaulted($,h){let{default:f}=$.getOptions();return Object.prototype.hasOwnProperty.call(f,h)||Object.prototype.hasOwnProperty.call(f,this.shim.Parser.camelCase(h))}isInConfigs($,h){let{configObjects:f}=$.getOptions();return f.some((z)=>Object.prototype.hasOwnProperty.call(z,h))||f.some((z)=>Object.prototype.hasOwnProperty.call(z,this.shim.Parser.camelCase(h)))}runDefaultBuilderOn($){if(!this.defaultCommand)return;if(this.shouldUpdateUsage($)){let f=$$.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");$.getInternalMethods().getUsageInstance().usage(f,this.defaultCommand.description)}let h=this.defaultCommand.builder;if(q$(h))return h($,!0);else if(!nh(h))Object.keys(h).forEach((f)=>{$.option(f,h[f])});return}moduleName($){let h=g$($);if(!h)throw Error(`No command name given for module: ${this.shim.inspect($)}`);return this.commandFromFilename(h.filename)}commandFromFilename($){return this.shim.path.basename($,this.shim.path.extname($))}extractDesc({describe:$,description:h,desc:f}){for(let z of[$,h,f]){if(typeof z==="string"||z===!1)return z;X0(z,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let $=this.frozens.pop();X0($,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=$}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}}function th($,h,f,z){return new bh($,h,f,z)}function nh($){return typeof $==="object"&&!!$.builder&&typeof $.handler==="function"}function I1($){return $.every((h)=>typeof h==="string")}function q$($){return typeof $==="function"}function Q1($){return typeof $==="object"}function W1($){return typeof $==="object"&&!Array.isArray($)}function _0($={},h=()=>!0){let f={};return e0($).forEach((z)=>{if(h(z,$[z]))f[z]=$[z]}),f}function x0($){if(typeof process>"u")return;[process.stdout,process.stderr].forEach((h)=>{let f=h;if(f._handle&&f.isTTY&&typeof f._handle.setBlocking==="function")f._handle.setBlocking($)})}function N1($){return typeof $==="boolean"}function ch($,h){let f=h.y18n.__,z={},G=[];z.failFn=function(Y){G.push(Y)};let O=null,B=null,U=!0;z.showHelpOnFail=function(Y=!0,w){let[n,i]=typeof Y==="string"?[!0,Y]:[Y,w];if($.getInternalMethods().isGlobalContext())B=i;return O=i,U=n,z};let I=!1;z.fail=function(Y,w){let n=$.getInternalMethods().getLoggerInstance();if(G.length)for(let i=G.length-1;i>=0;--i){let h0=G[i];if(N1(h0)){if(w)throw w;else if(Y)throw Error(Y)}else h0(Y,w,z)}else{if($.getExitProcess())x0(!0);if(!I){if(I=!0,U)$.showHelp("error"),n.error();if(Y||w)n.error(Y||w);let i=O||B;if(i){if(Y||w)n.error("");n.error(i)}}if(w=w||new g(Y),$.getExitProcess())return $.exit(1);else if($.getInternalMethods().hasParseCallback())return $.exit(1,w);else throw w}};let W=[],V=!1;z.usage=(R,Y)=>{if(R===null)return V=!0,W=[],z;return V=!1,W.push([R,Y||""]),z},z.getUsage=()=>{return W},z.getUsageDisabled=()=>{return V},z.getPositionalGroupName=()=>{return f("Positionals:")};let Q=[];z.example=(R,Y)=>{Q.push([R,Y||""])};let L=[];z.command=function(Y,w,n,i,h0=!1){if(n)L=L.map((p)=>{return p[2]=!1,p});L.push([Y,w||"",n,i,h0])},z.getCommands=()=>L;let j={};z.describe=function(Y,w){if(Array.isArray(Y))Y.forEach((n)=>{z.describe(n,w)});else if(typeof Y==="object")Object.keys(Y).forEach((n)=>{z.describe(n,Y[n])});else j[Y]=w},z.getDescriptions=()=>j;let q=[];z.epilog=(R)=>{q.push(R)};let E=!1,b;z.wrap=(R)=>{E=!0,b=R},z.getWrap=()=>{if(h.getEnv("YARGS_DISABLE_WRAP"))return null;if(!E)b=r0(),E=!0;return b};let u="__yargsString__:";z.deferY18nLookup=(R)=>u+R,z.help=function(){if(A)return A;$0();let Y=$.customScriptName?$.$0:h.path.basename($.$0),w=$.getDemandedOptions(),n=$.getDemandedCommands(),i=$.getDeprecatedOptions(),h0=$.getGroups(),p=$.getOptions(),f0=[];f0=f0.concat(Object.keys(j)),f0=f0.concat(Object.keys(w)),f0=f0.concat(Object.keys(n)),f0=f0.concat(Object.keys(p.default)),f0=f0.filter(K0),f0=Object.keys(f0.reduce((_,o)=>{if(o!=="_")_[o]=!0;return _},{}));let D0=z.getWrap(),v=h.cliui({width:D0,wrap:!!D0});if(!V){if(W.length)W.forEach((_)=>{if(v.div({text:`${_[0].replace(/\$0/g,Y)}`}),_[1])v.div({text:`${_[1]}`,padding:[1,0,0,0]})}),v.div();else if(L.length){let _=null;if(n._)_=`${Y} <${f("command")}>
`;else _=`${Y} [${f("command")}]
`;v.div(`${_}`)}}if(L.length>1||L.length===1&&!L[0][2]){v.div(f("Commands:"));let _=$.getInternalMethods().getContext(),o=_.commands.length?`${_.commands.join(" ")} `:"";if($.getInternalMethods().getParserConfiguration()["sort-commands"]===!0)L=L.sort((c,B0)=>c[0].localeCompare(B0[0]));let z0=Y?`${Y} `:"";L.forEach((c)=>{let B0=`${z0}${o}${c[0].replace(/^\$0 ?/,"")}`;v.span({text:B0,padding:[0,2,0,2],width:m(L,D0,`${Y}${o}`)+4},{text:c[1]});let a=[];if(c[2])a.push(`[${f("default")}]`);if(c[3]&&c[3].length)a.push(`[${f("aliases:")} ${c[3].join(", ")}]`);if(c[4])if(typeof c[4]==="string")a.push(`[${f("deprecated: %s",c[4])}]`);else a.push(`[${f("deprecated")}]`);if(a.length)v.div({text:a.join(" "),padding:[0,0,0,2],align:"right"});else v.div()}),v.div()}let R0=(Object.keys(p.alias)||[]).concat(Object.keys($.parsed.newAliases)||[]);f0=f0.filter((_)=>!$.parsed.newAliases[_]&&R0.every((o)=>(p.alias[o]||[]).indexOf(_)===-1));let B$=f("Options:");if(!h0[B$])h0[B$]=[];s0(f0,p.alias,h0,B$);let C=(_)=>/^--/.test(T$(_)),a0=Object.keys(h0).filter((_)=>h0[_].length>0).map((_)=>{let o=h0[_].filter(K0).map((z0)=>{if(R0.includes(z0))return z0;for(let c=0,B0;(B0=R0[c])!==void 0;c++)if((p.alias[B0]||[]).includes(z0))return B0;return z0});return{groupName:_,normalizedKeys:o}}).filter(({normalizedKeys:_})=>_.length>0).map(({groupName:_,normalizedKeys:o})=>{let z0=o.reduce((c,B0)=>{return c[B0]=[B0].concat(p.alias[B0]||[]).map((a)=>{if(_===z.getPositionalGroupName())return a;else return(/^[0-9]$/.test(a)?p.boolean.includes(B0)?"-":"--":a.length>1?"--":"-")+a}).sort((a,G0)=>C(a)===C(G0)?0:C(a)?1:-1).join(", "),c},{});return{groupName:_,normalizedKeys:o,switches:z0}});if(a0.filter(({groupName:_})=>_!==z.getPositionalGroupName()).some(({normalizedKeys:_,switches:o})=>!_.every((z0)=>C(o[z0]))))a0.filter(({groupName:_})=>_!==z.getPositionalGroupName()).forEach(({normalizedKeys:_,switches:o})=>{_.forEach((z0)=>{if(C(o[z0]))o[z0]=L1(o[z0],4)})});if(a0.forEach(({groupName:_,normalizedKeys:o,switches:z0})=>{v.div(_),o.forEach((c)=>{let B0=z0[c],a=j[c]||"",G0=null;if(a.includes(u))a=f(a.substring(u.length));if(p.boolean.includes(c))G0=`[${f("boolean")}]`;if(p.count.includes(c))G0=`[${f("count")}]`;if(p.string.includes(c))G0=`[${f("string")}]`;if(p.normalize.includes(c))G0=`[${f("string")}]`;if(p.array.includes(c))G0=`[${f("array")}]`;if(p.number.includes(c))G0=`[${f("number")}]`;let _$=(T)=>typeof T==="string"?`[${f("deprecated: %s",T)}]`:`[${f("deprecated")}]`,J=[c in i?_$(i[c]):null,G0,c in w?`[${f("required")}]`:null,p.choices&&p.choices[c]?`[${f("choices:")} ${z.stringifiedValues(p.choices[c])}]`:null,W0(p.default[c],p.defaultDescription[c])].filter(Boolean).join(" ");v.span({text:T$(B0),padding:[0,2,0,2+Ah(B0)],width:m(z0,D0)+4},a);let Z=$.getInternalMethods().getUsageConfiguration()["hide-types"]===!0;if(J&&!Z)v.div({text:J,padding:[0,0,0,2],align:"right"});else v.div()}),v.div()}),Q.length)v.div(f("Examples:")),Q.forEach((_)=>{_[0]=_[0].replace(/\$0/g,Y)}),Q.forEach((_)=>{if(_[1]==="")v.div({text:_[0],padding:[0,2,0,2]});else v.div({text:_[0],padding:[0,2,0,2],width:m(Q,D0)+4},{text:_[1]})}),v.div();if(q.length>0){let _=q.map((o)=>o.replace(/\$0/g,Y)).join(`
`);v.div(`${_}
`)}return v.toString().replace(/\s*$/,"")};function m(R,Y,w){let n=0;if(!Array.isArray(R))R=Object.values(R).map((i)=>[i]);if(R.forEach((i)=>{n=Math.max(h.stringWidth(w?`${w} ${T$(i[0])}`:T$(i[0]))+Ah(i[0]),n)}),Y)n=Math.min(n,parseInt((Y*0.5).toString(),10));return n}function $0(){let R=$.getDemandedOptions(),Y=$.getOptions();(Object.keys(Y.alias)||[]).forEach((w)=>{Y.alias[w].forEach((n)=>{if(j[n])z.describe(w,j[n]);if(n in R)$.demandOption(w,R[n]);if(Y.boolean.includes(n))$.boolean(w);if(Y.count.includes(n))$.count(w);if(Y.string.includes(n))$.string(w);if(Y.normalize.includes(n))$.normalize(w);if(Y.array.includes(n))$.array(w);if(Y.number.includes(n))$.number(w)})})}let A;z.cacheHelpMessage=function(){A=this.help()},z.clearCachedHelpMessage=function(){A=void 0},z.hasCachedHelpMessage=function(){return!!A};function s0(R,Y,w,n){let i=[],h0=null;return Object.keys(w).forEach((p)=>{i=i.concat(w[p])}),R.forEach((p)=>{if(h0=[p].concat(Y[p]),!h0.some((f0)=>i.indexOf(f0)!==-1))w[n].push(p)}),i}function K0(R){return $.getOptions().hiddenOptions.indexOf(R)<0||$.parsed.argv[$.getOptions().showHiddenOpt]}z.showHelp=(R)=>{let Y=$.getInternalMethods().getLoggerInstance();if(!R)R="error";(typeof R==="function"?R:Y[R])(z.help())},z.functionDescription=(R)=>{return["(",R.name?h.Parser.decamelize(R.name,"-"):f("generated-value"),")"].join("")},z.stringifiedValues=function(Y,w){let n="",i=w||", ",h0=[].concat(Y);if(!Y||!h0.length)return n;return h0.forEach((p)=>{if(n.length)n+=i;n+=JSON.stringify(p)}),n};function W0(R,Y){let w=`[${f("default:")} `;if(R===void 0&&!Y)return null;if(Y)w+=Y;else switch(typeof R){case"string":w+=`"${R}"`;break;case"object":w+=JSON.stringify(R);break;default:w+=R}return`${w}]`}function r0(){if(h.process.stdColumns)return Math.min(80,h.process.stdColumns);else return 80}let d=null;z.version=(R)=>{d=R},z.showVersion=(R)=>{let Y=$.getInternalMethods().getLoggerInstance();if(!R)R="error";(typeof R==="function"?R:Y[R])(d)},z.reset=function(Y){return O=null,I=!1,W=[],V=!1,q=[],Q=[],L=[],j=_0(j,(w)=>!Y[w]),z};let O$=[];return z.freeze=function(){O$.push({failMessage:O,failureOutput:I,usages:W,usageDisabled:V,epilogs:q,examples:Q,commands:L,descriptions:j})},z.unfreeze=function(Y=!1){let w=O$.pop();if(!w)return;if(Y)j={...w.descriptions,...j},L=[...w.commands,...L],W=[...w.usages,...W],Q=[...w.examples,...Q],q=[...w.epilogs,...q];else({failMessage:O,failureOutput:I,usages:W,usageDisabled:V,epilogs:q,examples:Q,commands:L,descriptions:j}=w)},z}function k$($){return typeof $==="object"}function L1($,h){return k$($)?{text:$.text,indentation:$.indentation+h}:{text:$,indentation:h}}function Ah($){return k$($)?$.indentation:0}function T$($){return k$($)?$.text:$}var mh=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,ph=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;class ih{constructor($,h,f,z){var G,O,B;this.yargs=$,this.usage=h,this.command=f,this.shim=z,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=(B=((G=this.shim.getEnv("SHELL"))===null||G===void 0?void 0:G.includes("zsh"))||((O=this.shim.getEnv("ZSH_NAME"))===null||O===void 0?void 0:O.includes("zsh")))!==null&&B!==void 0?B:!1}defaultCompletion($,h,f,z){let G=this.command.getCommandHandlers();for(let B=0,U=$.length;B<U;++B)if(G[$[B]]&&G[$[B]].builder){let I=G[$[B]].builder;if(q$(I)){this.indexAfterLastReset=B+1;let W=this.yargs.getInternalMethods().reset();return I(W,!0),W.argv}}let O=[];this.commandCompletions(O,$,f),this.optionCompletions(O,$,h,f),this.choicesFromOptionsCompletions(O,$,h,f),this.choicesFromPositionalsCompletions(O,$,h,f),z(null,O)}commandCompletions($,h,f){let z=this.yargs.getInternalMethods().getContext().commands;if(!f.match(/^-/)&&z[z.length-1]!==f&&!this.previousArgHasChoices(h))this.usage.getCommands().forEach((G)=>{let O=C0(G[0]).cmd;if(h.indexOf(O)===-1)if(!this.zshShell)$.push(O);else{let B=G[1]||"";$.push(O.replace(/:/g,"\\:")+":"+B)}})}optionCompletions($,h,f,z){if((z.match(/^-/)||z===""&&$.length===0)&&!this.previousArgHasChoices(h)){let G=this.yargs.getOptions(),O=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(G.key).forEach((B)=>{let U=!!G.configuration["boolean-negation"]&&G.boolean.includes(B);if(!O.includes(B)&&!G.hiddenOptions.includes(B)&&!this.argsContainKey(h,B,U))this.completeOptionKey(B,$,z,U&&!!G.default[B])})}}choicesFromOptionsCompletions($,h,f,z){if(this.previousArgHasChoices(h)){let G=this.getPreviousArgChoices(h);if(G&&G.length>0)$.push(...G.map((O)=>O.replace(/:/g,"\\:")))}}choicesFromPositionalsCompletions($,h,f,z){if(z===""&&$.length>0&&this.previousArgHasChoices(h))return;let G=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],O=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),B=G[f._.length-O-1];if(!B)return;let U=this.yargs.getOptions().choices[B]||[];for(let I of U)if(I.startsWith(z))$.push(I.replace(/:/g,"\\:"))}getPreviousArgChoices($){if($.length<1)return;let h=$[$.length-1],f="";if(!h.startsWith("-")&&$.length>1)f=h,h=$[$.length-2];if(!h.startsWith("-"))return;let z=h.replace(/^-+/,""),G=this.yargs.getOptions(),O=[z,...this.yargs.getAliases()[z]||[]],B;for(let U of O)if(Object.prototype.hasOwnProperty.call(G.key,U)&&Array.isArray(G.choices[U])){B=G.choices[U];break}if(B)return B.filter((U)=>!f||U.startsWith(f))}previousArgHasChoices($){let h=this.getPreviousArgChoices($);return h!==void 0&&h.length>0}argsContainKey($,h,f){let z=(G)=>$.indexOf((/^[^0-9]$/.test(G)?"-":"--")+G)!==-1;if(z(h))return!0;if(f&&z(`no-${h}`))return!0;if(this.aliases){for(let G of this.aliases[h])if(z(G))return!0}return!1}completeOptionKey($,h,f,z){var G,O,B,U;let I=$;if(this.zshShell){let L=this.usage.getDescriptions(),j=(O=(G=this===null||this===void 0?void 0:this.aliases)===null||G===void 0?void 0:G[$])===null||O===void 0?void 0:O.find((b)=>{let u=L[b];return typeof u==="string"&&u.length>0}),q=j?L[j]:void 0,E=(U=(B=L[$])!==null&&B!==void 0?B:q)!==null&&U!==void 0?U:"";I=`${$.replace(/:/g,"\\:")}:${E.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`}let W=(L)=>/^--/.test(L),V=(L)=>/^[^0-9]$/.test(L),Q=!W(f)&&V($)?"-":"--";if(h.push(Q+I),z)h.push(Q+"no-"+I)}customCompletion($,h,f,z){if(X0(this.customCompletionFunction,null,this.shim),q1(this.customCompletionFunction)){let G=this.customCompletionFunction(f,h);if(k(G))return G.then((O)=>{this.shim.process.nextTick(()=>{z(null,O)})}).catch((O)=>{this.shim.process.nextTick(()=>{z(O,void 0)})});return z(null,G)}else if(T1(this.customCompletionFunction))return this.customCompletionFunction(f,h,(G=z)=>this.defaultCompletion($,h,f,G),(G)=>{z(null,G)});else return this.customCompletionFunction(f,h,(G)=>{z(null,G)})}getCompletion($,h){let f=$.length?$[$.length-1]:"",z=this.yargs.parse($,!0),G=this.customCompletionFunction?(O)=>this.customCompletion($,O,f,h):(O)=>this.defaultCompletion($,O,f,h);return k(z)?z.then(G):G(z)}generateCompletionScript($,h){let f=this.zshShell?ph:mh,z=this.shim.path.basename($);if($.match(/\.js$/))$=`./${$}`;return f=f.replace(/{{app_name}}/g,z),f=f.replace(/{{completion_command}}/g,h),f.replace(/{{app_path}}/g,$)}registerFunction($){this.customCompletionFunction=$}setParsed($){this.aliases=$.aliases}}function dh($,h,f,z){return new ih($,h,f,z)}function q1($){return $.length<3}function T1($){return $.length>3}function oh($,h){if($.length===0)return h.length;if(h.length===0)return $.length;let f=[],z;for(z=0;z<=h.length;z++)f[z]=[z];let G;for(G=0;G<=$.length;G++)f[0][G]=G;for(z=1;z<=h.length;z++)for(G=1;G<=$.length;G++)if(h.charAt(z-1)===$.charAt(G-1))f[z][G]=f[z-1][G-1];else if(z>1&&G>1&&h.charAt(z-2)===$.charAt(G-1)&&h.charAt(z-1)===$.charAt(G-2))f[z][G]=f[z-2][G-2]+1;else f[z][G]=Math.min(f[z-1][G-1]+1,Math.min(f[z][G-1]+1,f[z-1][G]+1));return f[h.length][$.length]}var vh=["$0","--","_"];function gh($,h,f){let z=f.y18n.__,G=f.y18n.__n,O={};O.nonOptionCount=function(Q){let L=$.getDemandedCommands(),q=Q._.length+(Q["--"]?Q["--"].length:0)-$.getInternalMethods().getContext().commands.length;if(L._&&(q<L._.min||q>L._.max)){if(q<L._.min)if(L._.minMsg!==void 0)h.fail(L._.minMsg?L._.minMsg.replace(/\$0/g,q.toString()).replace(/\$1/,L._.min.toString()):null);else h.fail(G("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",q,q.toString(),L._.min.toString()));else if(q>L._.max)if(L._.maxMsg!==void 0)h.fail(L._.maxMsg?L._.maxMsg.replace(/\$0/g,q.toString()).replace(/\$1/,L._.max.toString()):null);else h.fail(G("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",q,q.toString(),L._.max.toString()))}},O.positionalCount=function(Q,L){if(L<Q)h.fail(G("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",L,L+"",Q+""))},O.requiredArguments=function(Q,L){let j=null;for(let q of Object.keys(L))if(!Object.prototype.hasOwnProperty.call(Q,q)||typeof Q[q]>"u")j=j||{},j[q]=L[q];if(j){let q=[];for(let b of Object.keys(j)){let u=j[b];if(u&&q.indexOf(u)<0)q.push(u)}let E=q.length?`
${q.join(`
`)}`:"";h.fail(G("Missing required argument: %s","Missing required arguments: %s",Object.keys(j).length,Object.keys(j).join(", ")+E))}},O.unknownArguments=function(Q,L,j,q,E=!0){var b;let u=$.getInternalMethods().getCommandInstance().getCommands(),m=[],$0=$.getInternalMethods().getContext();if(Object.keys(Q).forEach((A)=>{if(!vh.includes(A)&&!Object.prototype.hasOwnProperty.call(j,A)&&!Object.prototype.hasOwnProperty.call($.getInternalMethods().getParseContext(),A)&&!O.isValidAndSomeAliasIsNotNew(A,L))m.push(A)}),E&&($0.commands.length>0||u.length>0||q))Q._.slice($0.commands.length).forEach((A)=>{if(!u.includes(""+A))m.push(""+A)});if(E){let s0=((b=$.getDemandedCommands()._)===null||b===void 0?void 0:b.max)||0,K0=$0.commands.length+s0;if(K0<Q._.length)Q._.slice(K0).forEach((W0)=>{if(W0=String(W0),!$0.commands.includes(W0)&&!m.includes(W0))m.push(W0)})}if(m.length)h.fail(G("Unknown argument: %s","Unknown arguments: %s",m.length,m.map((A)=>A.trim()?A:`"${A}"`).join(", ")))},O.unknownCommands=function(Q){let L=$.getInternalMethods().getCommandInstance().getCommands(),j=[],q=$.getInternalMethods().getContext();if(q.commands.length>0||L.length>0)Q._.slice(q.commands.length).forEach((E)=>{if(!L.includes(""+E))j.push(""+E)});if(j.length>0)return h.fail(G("Unknown command: %s","Unknown commands: %s",j.length,j.join(", "))),!0;else return!1},O.isValidAndSomeAliasIsNotNew=function(Q,L){if(!Object.prototype.hasOwnProperty.call(L,Q))return!1;let j=$.parsed.newAliases;return[Q,...L[Q]].some((q)=>!Object.prototype.hasOwnProperty.call(j,q)||!j[Q])},O.limitedChoices=function(Q){let L=$.getOptions(),j={};if(!Object.keys(L.choices).length)return;Object.keys(Q).forEach((b)=>{if(vh.indexOf(b)===-1&&Object.prototype.hasOwnProperty.call(L.choices,b))[].concat(Q[b]).forEach((u)=>{if(L.choices[b].indexOf(u)===-1&&u!==void 0)j[b]=(j[b]||[]).concat(u)})});let q=Object.keys(j);if(!q.length)return;let E=z("Invalid values:");q.forEach((b)=>{E+=`
  ${z("Argument: %s, Given: %s, Choices: %s",b,h.stringifiedValues(j[b]),h.stringifiedValues(L.choices[b]))}`}),h.fail(E)};let B={};O.implies=function(Q,L){if(P("<string|object> [array|number|string]",[Q,L],arguments.length),typeof Q==="object")Object.keys(Q).forEach((j)=>{O.implies(j,Q[j])});else{if($.global(Q),!B[Q])B[Q]=[];if(Array.isArray(L))L.forEach((j)=>O.implies(Q,j));else X0(L,void 0,f),B[Q].push(L)}},O.getImplied=function(){return B};function U(V,Q){let L=Number(Q);if(Q=isNaN(L)?Q:L,typeof Q==="number")Q=V._.length>=Q;else if(Q.match(/^--no-.+/))Q=Q.match(/^--no-(.+)/)[1],Q=!Object.prototype.hasOwnProperty.call(V,Q);else Q=Object.prototype.hasOwnProperty.call(V,Q);return Q}O.implications=function(Q){let L=[];if(Object.keys(B).forEach((j)=>{let q=j;(B[j]||[]).forEach((E)=>{let b=q,u=E;if(b=U(Q,b),E=U(Q,E),b&&!E)L.push(` ${q} -> ${u}`)})}),L.length){let j=`${z("Implications failed:")}
`;L.forEach((q)=>{j+=q}),h.fail(j)}};let I={};O.conflicts=function(Q,L){if(P("<string|object> [array|string]",[Q,L],arguments.length),typeof Q==="object")Object.keys(Q).forEach((j)=>{O.conflicts(j,Q[j])});else{if($.global(Q),!I[Q])I[Q]=[];if(Array.isArray(L))L.forEach((j)=>O.conflicts(Q,j));else I[Q].push(L)}},O.getConflicting=()=>I,O.conflicting=function(Q){if(Object.keys(Q).forEach((L)=>{if(I[L])I[L].forEach((j)=>{if(j&&Q[L]!==void 0&&Q[j]!==void 0)h.fail(z("Arguments %s and %s are mutually exclusive",L,j))})}),$.getInternalMethods().getParserConfiguration()["strip-dashed"])Object.keys(I).forEach((L)=>{I[L].forEach((j)=>{if(j&&Q[f.Parser.camelCase(L)]!==void 0&&Q[f.Parser.camelCase(j)]!==void 0)h.fail(z("Arguments %s and %s are mutually exclusive",L,j))})})},O.recommendCommands=function(Q,L){L=L.sort((b,u)=>u.length-b.length);let q=null,E=1/0;for(let b=0,u;(u=L[b])!==void 0;b++){let m=oh(Q,u);if(m<=3&&m<E)E=m,q=u}if(q)h.fail(z("Did you mean %s?",q))},O.reset=function(Q){return B=_0(B,(L)=>!Q[L]),I=_0(I,(L)=>!Q[L]),O};let W=[];return O.freeze=function(){W.push({implied:B,conflicting:I})},O.unfreeze=function(){let Q=W.pop();X0(Q,void 0,f),{implied:B,conflicting:I}=Q},O}var l$=[],Z$;function E$($,h,f,z){Z$=z;let G={};if(Object.prototype.hasOwnProperty.call($,"extends")){if(typeof $.extends!=="string")return G;let O=/\.json|\..*rc$/.test($.extends),B=null;if(!O)try{B=F0.resolve($.extends)}catch(U){return $}else B=V1(h,$.extends);j1(B),l$.push(B),G=O?JSON.parse(Z$.readFileSync(B,"utf8")):F0($.extends),delete $.extends,G=E$(G,Z$.path.dirname(B),f,Z$)}return l$=[],f?kh(G,$):Object.assign({},G,$)}function j1($){if(l$.indexOf($)>-1)throw new g(`Circular extended configurations: '${$}'.`)}function V1($,h){return Z$.path.resolve($,h)}function kh($,h){let f={};function z(G){return G&&typeof G==="object"&&!Array.isArray(G)}Object.assign(f,$);for(let G of Object.keys(h))if(z(h[G])&&z(f[G]))f[G]=kh($[G],h[G]);else f[G]=h[G];return f}var S=function($,h,f,z,G){if(z==="m")throw TypeError("Private method is not writable");if(z==="a"&&!G)throw TypeError("Private accessor was defined without a setter");if(typeof h==="function"?$!==h||!G:!h.has($))throw TypeError("Cannot write private member to an object whose class did not declare it");return z==="a"?G.call($,f):G?G.value=f:h.set($,f),f},M=function($,h,f,z){if(f==="a"&&!z)throw TypeError("Private accessor was defined without a getter");if(typeof h==="function"?$!==h||!z:!h.has($))throw TypeError("Cannot read private member from an object whose class did not declare it");return f==="m"?z:f==="a"?z.call($):z?z.value:h.get($)},e,m0,I$,L0,E0,j$,n0,p0,V$,U0,Y$,q0,P0,I0,T0,H$,h$,O0,D,P$,S$,Q0,i0,f$,d0,b0,K$,x,o0,v0,g0,t,R$,S0,r;function Qf($){return(h=[],f=$.process.cwd(),z)=>{let G=new Wf(h,f,z,$);return Object.defineProperty(G,"argv",{get:()=>{return G.parse()},enumerable:!0}),G.help(),G.version(),G}}var lh=Symbol("copyDoubleDash"),yh=Symbol("copyDoubleDash"),y$=Symbol("deleteFromParserHintObject"),sh=Symbol("emitWarning"),rh=Symbol("freeze"),ah=Symbol("getDollarZero"),k0=Symbol("getParserConfiguration"),eh=Symbol("getUsageConfiguration"),s$=Symbol("guessLocale"),$f=Symbol("guessVersion"),hf=Symbol("parsePositionalNumbers"),r$=Symbol("pkgUp"),t0=Symbol("populateParserHintArray"),z$=Symbol("populateParserHintSingleValueDictionary"),a$=Symbol("populateParserHintArrayDictionary"),e$=Symbol("populateParserHintDictionary"),$h=Symbol("sanitizeKey"),hh=Symbol("setKey"),fh=Symbol("unfreeze"),ff=Symbol("validateAsync"),zf=Symbol("getCommandInstance"),Gf=Symbol("getContext"),Mf=Symbol("getHasOutput"),Of=Symbol("getLoggerInstance"),Bf=Symbol("getParseContext"),Jf=Symbol("getUsageInstance"),Xf=Symbol("getValidationInstance"),w$=Symbol("hasParseCallback"),Zf=Symbol("isGlobalContext"),l0=Symbol("postProcess"),Ef=Symbol("rebase"),zh=Symbol("reset"),Q$=Symbol("runYargsParserAndExecuteCommands"),Gh=Symbol("runValidation"),If=Symbol("setHasOutput"),y0=Symbol("kTrackManuallySetKeys");class Wf{constructor($=[],h,f,z){this.customScriptName=!1,this.parsed=!1,e.set(this,void 0),m0.set(this,void 0),I$.set(this,{commands:[],fullCommands:[]}),L0.set(this,null),E0.set(this,null),j$.set(this,"show-hidden"),n0.set(this,null),p0.set(this,!0),V$.set(this,{}),U0.set(this,!0),Y$.set(this,[]),q0.set(this,void 0),P0.set(this,{}),I0.set(this,!1),T0.set(this,null),H$.set(this,!0),h$.set(this,void 0),O0.set(this,""),D.set(this,void 0),P$.set(this,void 0),S$.set(this,{}),Q0.set(this,null),i0.set(this,null),f$.set(this,{}),d0.set(this,{}),b0.set(this,void 0),K$.set(this,!1),x.set(this,void 0),o0.set(this,!1),v0.set(this,!1),g0.set(this,!1),t.set(this,void 0),R$.set(this,{}),S0.set(this,null),r.set(this,void 0),S(this,x,z,"f"),S(this,b0,$,"f"),S(this,m0,h,"f"),S(this,P$,f,"f"),S(this,q0,new v$(this),"f"),this.$0=this[ah](),this[zh](),S(this,e,M(this,e,"f"),"f"),S(this,t,M(this,t,"f"),"f"),S(this,r,M(this,r,"f"),"f"),S(this,D,M(this,D,"f"),"f"),M(this,D,"f").showHiddenOpt=M(this,j$,"f"),S(this,h$,this[yh](),"f")}addHelpOpt($,h){if(P("[string|boolean] [string]",[$,h],arguments.length),M(this,T0,"f"))this[y$](M(this,T0,"f")),S(this,T0,null,"f");if($===!1&&h===void 0)return this;return S(this,T0,typeof $==="string"?$:"help","f"),this.boolean(M(this,T0,"f")),this.describe(M(this,T0,"f"),h||M(this,t,"f").deferY18nLookup("Show help")),this}help($,h){return this.addHelpOpt($,h)}addShowHiddenOpt($,h){if(P("[string|boolean] [string]",[$,h],arguments.length),$===!1&&h===void 0)return this;let f=typeof $==="string"?$:M(this,j$,"f");return this.boolean(f),this.describe(f,h||M(this,t,"f").deferY18nLookup("Show hidden options")),M(this,D,"f").showHiddenOpt=f,this}showHidden($,h){return this.addShowHiddenOpt($,h)}alias($,h){return P("<object|string|array> [string|array]",[$,h],arguments.length),this[a$](this.alias.bind(this),"alias",$,h),this}array($){return P("<array|string>",[$],arguments.length),this[t0]("array",$),this[y0]($),this}boolean($){return P("<array|string>",[$],arguments.length),this[t0]("boolean",$),this[y0]($),this}check($,h){return P("<function> [boolean]",[$,h],arguments.length),this.middleware((f,z)=>{return c0(()=>{return $(f,z.getOptions())},(G)=>{if(!G)M(this,t,"f").fail(M(this,x,"f").y18n.__("Argument check failed: %s",$.toString()));else if(typeof G==="string"||G instanceof Error)M(this,t,"f").fail(G.toString(),G);return f},(G)=>{return M(this,t,"f").fail(G.message?G.message:G.toString(),G),f})},!1,h),this}choices($,h){return P("<object|string|array> [string|array]",[$,h],arguments.length),this[a$](this.choices.bind(this),"choices",$,h),this}coerce($,h){if(P("<object|string|array> [function]",[$,h],arguments.length),Array.isArray($)){if(!h)throw new g("coerce callback must be provided");for(let f of $)this.coerce(f,h);return this}else if(typeof $==="object"){for(let f of Object.keys($))this.coerce(f,$[f]);return this}if(!h)throw new g("coerce callback must be provided");return M(this,D,"f").key[$]=!0,M(this,q0,"f").addCoerceMiddleware((f,z)=>{let G;if(!Object.prototype.hasOwnProperty.call(f,$))return f;return c0(()=>{return G=z.getAliases(),h(f[$])},(B)=>{f[$]=B;let U=z.getInternalMethods().getParserConfiguration()["strip-aliased"];if(G[$]&&U!==!0)for(let I of G[$])f[I]=B;return f},(B)=>{throw new g(B.message)})},$),this}conflicts($,h){return P("<string|object> [string|array]",[$,h],arguments.length),M(this,r,"f").conflicts($,h),this}config($="config",h,f){if(P("[object|string] [string|function] [function]",[$,h,f],arguments.length),typeof $==="object"&&!Array.isArray($))return $=E$($,M(this,m0,"f"),this[k0]()["deep-merge-config"]||!1,M(this,x,"f")),M(this,D,"f").configObjects=(M(this,D,"f").configObjects||[]).concat($),this;if(typeof h==="function")f=h,h=void 0;return this.describe($,h||M(this,t,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray($)?$:[$]).forEach((z)=>{M(this,D,"f").config[z]=f||!0}),this}completion($,h,f){if(P("[string] [string|boolean|function] [function]",[$,h,f],arguments.length),typeof h==="function")f=h,h=void 0;if(S(this,E0,$||M(this,E0,"f")||"completion","f"),!h&&h!==!1)h="generate completion script";if(this.command(M(this,E0,"f"),h),f)M(this,L0,"f").registerFunction(f);return this}command($,h,f,z,G,O){return P("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[$,h,f,z,G,O],arguments.length),M(this,e,"f").addHandler($,h,f,z,G,O),this}commands($,h,f,z,G,O){return this.command($,h,f,z,G,O)}commandDir($,h){P("<string> [object]",[$,h],arguments.length);let f=M(this,P$,"f")||M(this,x,"f").require;return M(this,e,"f").addDirectory($,f,M(this,x,"f").getCallerFile(),h),this}count($){return P("<array|string>",[$],arguments.length),this[t0]("count",$),this[y0]($),this}default($,h,f){if(P("<object|string|array> [*] [string]",[$,h,f],arguments.length),f)o$($,M(this,x,"f")),M(this,D,"f").defaultDescription[$]=f;if(typeof h==="function"){if(o$($,M(this,x,"f")),!M(this,D,"f").defaultDescription[$])M(this,D,"f").defaultDescription[$]=M(this,t,"f").functionDescription(h);h=h.call()}return this[z$](this.default.bind(this),"default",$,h),this}defaults($,h,f){return this.default($,h,f)}demandCommand($=1,h,f,z){if(P("[number] [number|string] [string|null|undefined] [string|null|undefined]",[$,h,f,z],arguments.length),typeof h!=="number")f=h,h=1/0;return this.global("_",!1),M(this,D,"f").demandedCommands._={min:$,max:h,minMsg:f,maxMsg:z},this}demand($,h,f){if(Array.isArray(h))h.forEach((z)=>{X0(f,!0,M(this,x,"f")),this.demandOption(z,f)}),h=1/0;else if(typeof h!=="number")f=h,h=1/0;if(typeof $==="number")X0(f,!0,M(this,x,"f")),this.demandCommand($,h,f,f);else if(Array.isArray($))$.forEach((z)=>{X0(f,!0,M(this,x,"f")),this.demandOption(z,f)});else if(typeof f==="string")this.demandOption($,f);else if(f===!0||typeof f>"u")this.demandOption($);return this}demandOption($,h){return P("<object|string|array> [string]",[$,h],arguments.length),this[z$](this.demandOption.bind(this),"demandedOptions",$,h),this}deprecateOption($,h){return P("<string> [string|boolean]",[$,h],arguments.length),M(this,D,"f").deprecatedOptions[$]=h,this}describe($,h){return P("<object|string|array> [string]",[$,h],arguments.length),this[hh]($,!0),M(this,t,"f").describe($,h),this}detectLocale($){return P("<boolean>",[$],arguments.length),S(this,p0,$,"f"),this}env($){if(P("[string|boolean]",[$],arguments.length),$===!1)delete M(this,D,"f").envPrefix;else M(this,D,"f").envPrefix=$||"";return this}epilogue($){return P("<string>",[$],arguments.length),M(this,t,"f").epilog($),this}epilog($){return this.epilogue($)}example($,h){if(P("<string|array> [string]",[$,h],arguments.length),Array.isArray($))$.forEach((f)=>this.example(...f));else M(this,t,"f").example($,h);return this}exit($,h){if(S(this,I0,!0,"f"),S(this,n0,h,"f"),M(this,U0,"f"))M(this,x,"f").process.exit($)}exitProcess($=!0){return P("[boolean]",[$],arguments.length),S(this,U0,$,"f"),this}fail($){if(P("<function|boolean>",[$],arguments.length),typeof $==="boolean"&&$!==!1)throw new g("Invalid first argument. Expected function or boolean 'false'");return M(this,t,"f").failFn($),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion($,h){if(P("<array> [function]",[$,h],arguments.length),!h)return new Promise((f,z)=>{M(this,L0,"f").getCompletion($,(G,O)=>{if(G)z(G);else f(O)})});else return M(this,L0,"f").getCompletion($,h)}getDemandedOptions(){return P([],0),M(this,D,"f").demandedOptions}getDemandedCommands(){return P([],0),M(this,D,"f").demandedCommands}getDeprecatedOptions(){return P([],0),M(this,D,"f").deprecatedOptions}getDetectLocale(){return M(this,p0,"f")}getExitProcess(){return M(this,U0,"f")}getGroups(){return Object.assign({},M(this,P0,"f"),M(this,d0,"f"))}getHelp(){if(S(this,I0,!0,"f"),!M(this,t,"f").hasCachedHelpMessage()){if(!this.parsed){let h=this[Q$](M(this,b0,"f"),void 0,void 0,0,!0);if(k(h))return h.then(()=>{return M(this,t,"f").help()})}let $=M(this,e,"f").runDefaultBuilderOn(this);if(k($))return $.then(()=>{return M(this,t,"f").help()})}return Promise.resolve(M(this,t,"f").help())}getOptions(){return M(this,D,"f")}getStrict(){return M(this,o0,"f")}getStrictCommands(){return M(this,v0,"f")}getStrictOptions(){return M(this,g0,"f")}global($,h){if(P("<string|array> [boolean]",[$,h],arguments.length),$=[].concat($),h!==!1)M(this,D,"f").local=M(this,D,"f").local.filter((f)=>$.indexOf(f)===-1);else $.forEach((f)=>{if(!M(this,D,"f").local.includes(f))M(this,D,"f").local.push(f)});return this}group($,h){P("<string|array> <string>",[$,h],arguments.length);let f=M(this,d0,"f")[h]||M(this,P0,"f")[h];if(M(this,d0,"f")[h])delete M(this,d0,"f")[h];let z={};return M(this,P0,"f")[h]=(f||[]).concat($).filter((G)=>{if(z[G])return!1;return z[G]=!0}),this}hide($){return P("<string>",[$],arguments.length),M(this,D,"f").hiddenOptions.push($),this}implies($,h){return P("<string|object> [number|string|array]",[$,h],arguments.length),M(this,r,"f").implies($,h),this}locale($){if(P("[string]",[$],arguments.length),$===void 0)return this[s$](),M(this,x,"f").y18n.getLocale();return S(this,p0,!1,"f"),M(this,x,"f").y18n.setLocale($),this}middleware($,h,f){return M(this,q0,"f").addMiddleware($,!!h,f)}nargs($,h){return P("<string|object|array> [number]",[$,h],arguments.length),this[z$](this.nargs.bind(this),"narg",$,h),this}normalize($){return P("<array|string>",[$],arguments.length),this[t0]("normalize",$),this}number($){return P("<array|string>",[$],arguments.length),this[t0]("number",$),this[y0]($),this}option($,h){if(P("<string|object> [object]",[$,h],arguments.length),typeof $==="object")Object.keys($).forEach((f)=>{this.options(f,$[f])});else{if(typeof h!=="object")h={};if(this[y0]($),M(this,S0,"f")&&($==="version"||(h===null||h===void 0?void 0:h.alias)==="version"))this[sh](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join(`
`),void 0,"versionWarning");if(M(this,D,"f").key[$]=!0,h.alias)this.alias($,h.alias);let f=h.deprecate||h.deprecated;if(f)this.deprecateOption($,f);let z=h.demand||h.required||h.require;if(z)this.demand($,z);if(h.demandOption)this.demandOption($,typeof h.demandOption==="string"?h.demandOption:void 0);if(h.conflicts)this.conflicts($,h.conflicts);if("default"in h)this.default($,h.default);if(h.implies!==void 0)this.implies($,h.implies);if(h.nargs!==void 0)this.nargs($,h.nargs);if(h.config)this.config($,h.configParser);if(h.normalize)this.normalize($);if(h.choices)this.choices($,h.choices);if(h.coerce)this.coerce($,h.coerce);if(h.group)this.group($,h.group);if(h.boolean||h.type==="boolean"){if(this.boolean($),h.alias)this.boolean(h.alias)}if(h.array||h.type==="array"){if(this.array($),h.alias)this.array(h.alias)}if(h.number||h.type==="number"){if(this.number($),h.alias)this.number(h.alias)}if(h.string||h.type==="string"){if(this.string($),h.alias)this.string(h.alias)}if(h.count||h.type==="count")this.count($);if(typeof h.global==="boolean")this.global($,h.global);if(h.defaultDescription)M(this,D,"f").defaultDescription[$]=h.defaultDescription;if(h.skipValidation)this.skipValidation($);let G=h.describe||h.description||h.desc,O=M(this,t,"f").getDescriptions();if(!Object.prototype.hasOwnProperty.call(O,$)||typeof G==="string")this.describe($,G);if(h.hidden)this.hide($);if(h.requiresArg)this.requiresArg($)}return this}options($,h){return this.option($,h)}parse($,h,f){if(P("[string|array] [function|boolean|object] [function]",[$,h,f],arguments.length),this[rh](),typeof $>"u")$=M(this,b0,"f");if(typeof h==="object")S(this,i0,h,"f"),h=f;if(typeof h==="function")S(this,Q0,h,"f"),h=!1;if(!h)S(this,b0,$,"f");if(M(this,Q0,"f"))S(this,U0,!1,"f");let z=this[Q$]($,!!h),G=this.parsed;if(M(this,L0,"f").setParsed(this.parsed),k(z))return z.then((O)=>{if(M(this,Q0,"f"))M(this,Q0,"f").call(this,M(this,n0,"f"),O,M(this,O0,"f"));return O}).catch((O)=>{if(M(this,Q0,"f"))M(this,Q0,"f")(O,this.parsed.argv,M(this,O0,"f"));throw O}).finally(()=>{this[fh](),this.parsed=G});else{if(M(this,Q0,"f"))M(this,Q0,"f").call(this,M(this,n0,"f"),z,M(this,O0,"f"));this[fh](),this.parsed=G}return z}parseAsync($,h,f){let z=this.parse($,h,f);return!k(z)?Promise.resolve(z):z}parseSync($,h,f){let z=this.parse($,h,f);if(k(z))throw new g(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return z}parserConfiguration($){return P("<object>",[$],arguments.length),S(this,S$,$,"f"),this}pkgConf($,h){P("<string> [string]",[$,h],arguments.length);let f=null,z=this[r$](h||M(this,m0,"f"));if(z[$]&&typeof z[$]==="object")f=E$(z[$],h||M(this,m0,"f"),this[k0]()["deep-merge-config"]||!1,M(this,x,"f")),M(this,D,"f").configObjects=(M(this,D,"f").configObjects||[]).concat(f);return this}positional($,h){P("<string> <object>",[$,h],arguments.length);let f=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];h=_0(h,(O,B)=>{if(O==="type"&&!["string","number","boolean"].includes(B))return!1;return f.includes(O)});let z=M(this,I$,"f").fullCommands[M(this,I$,"f").fullCommands.length-1],G=z?M(this,e,"f").cmdToParseOptions(z):{array:[],alias:{},default:{},demand:{}};return e0(G).forEach((O)=>{let B=G[O];if(Array.isArray(B)){if(B.indexOf($)!==-1)h[O]=!0}else if(B[$]&&!(O in h))h[O]=B[$]}),this.group($,M(this,t,"f").getPositionalGroupName()),this.option($,h)}recommendCommands($=!0){return P("[boolean]",[$],arguments.length),S(this,K$,$,"f"),this}required($,h,f){return this.demand($,h,f)}require($,h,f){return this.demand($,h,f)}requiresArg($){if(P("<array|string|object> [number]",[$],arguments.length),typeof $==="string"&&M(this,D,"f").narg[$])return this;else this[z$](this.requiresArg.bind(this),"narg",$,NaN);return this}showCompletionScript($,h){return P("[string] [string]",[$,h],arguments.length),$=$||this.$0,M(this,h$,"f").log(M(this,L0,"f").generateCompletionScript($,h||M(this,E0,"f")||"completion")),this}showHelp($){if(P("[string|function]",[$],arguments.length),S(this,I0,!0,"f"),!M(this,t,"f").hasCachedHelpMessage()){if(!this.parsed){let f=this[Q$](M(this,b0,"f"),void 0,void 0,0,!0);if(k(f))return f.then(()=>{M(this,t,"f").showHelp($)}),this}let h=M(this,e,"f").runDefaultBuilderOn(this);if(k(h))return h.then(()=>{M(this,t,"f").showHelp($)}),this}return M(this,t,"f").showHelp($),this}scriptName($){return this.customScriptName=!0,this.$0=$,this}showHelpOnFail($,h){return P("[boolean|string] [string]",[$,h],arguments.length),M(this,t,"f").showHelpOnFail($,h),this}showVersion($){return P("[string|function]",[$],arguments.length),M(this,t,"f").showVersion($),this}skipValidation($){return P("<array|string>",[$],arguments.length),this[t0]("skipValidation",$),this}strict($){return P("[boolean]",[$],arguments.length),S(this,o0,$!==!1,"f"),this}strictCommands($){return P("[boolean]",[$],arguments.length),S(this,v0,$!==!1,"f"),this}strictOptions($){return P("[boolean]",[$],arguments.length),S(this,g0,$!==!1,"f"),this}string($){return P("<array|string>",[$],arguments.length),this[t0]("string",$),this[y0]($),this}terminalWidth(){return P([],0),M(this,x,"f").process.stdColumns}updateLocale($){return this.updateStrings($)}updateStrings($){return P("<object>",[$],arguments.length),S(this,p0,!1,"f"),M(this,x,"f").y18n.updateLocale($),this}usage($,h,f,z){if(P("<string|null|undefined> [string|boolean] [function|object] [function]",[$,h,f,z],arguments.length),h!==void 0)if(X0($,null,M(this,x,"f")),($||"").match(/^\$0( |$)/))return this.command($,h,f,z);else throw new g(".usage() description must start with $0 if being used as alias for .command()");else return M(this,t,"f").usage($),this}usageConfiguration($){return P("<object>",[$],arguments.length),S(this,R$,$,"f"),this}version($,h,f){if(P("[boolean|string] [string] [string]",[$,h,f],arguments.length),M(this,S0,"f"))this[y$](M(this,S0,"f")),M(this,t,"f").version(void 0),S(this,S0,null,"f");if(arguments.length===0)f=this[$f](),$="version";else if(arguments.length===1){if($===!1)return this;f=$,$="version"}else if(arguments.length===2)f=h,h=void 0;return S(this,S0,typeof $==="string"?$:"version","f"),h=h||M(this,t,"f").deferY18nLookup("Show version number"),M(this,t,"f").version(f||void 0),this.boolean(M(this,S0,"f")),this.describe(M(this,S0,"f"),h),this}wrap($){return P("<number|null|undefined>",[$],arguments.length),M(this,t,"f").wrap($),this}[(e=new WeakMap,m0=new WeakMap,I$=new WeakMap,L0=new WeakMap,E0=new WeakMap,j$=new WeakMap,n0=new WeakMap,p0=new WeakMap,V$=new WeakMap,U0=new WeakMap,Y$=new WeakMap,q0=new WeakMap,P0=new WeakMap,I0=new WeakMap,T0=new WeakMap,H$=new WeakMap,h$=new WeakMap,O0=new WeakMap,D=new WeakMap,P$=new WeakMap,S$=new WeakMap,Q0=new WeakMap,i0=new WeakMap,f$=new WeakMap,d0=new WeakMap,b0=new WeakMap,K$=new WeakMap,x=new WeakMap,o0=new WeakMap,v0=new WeakMap,g0=new WeakMap,t=new WeakMap,R$=new WeakMap,S0=new WeakMap,r=new WeakMap,lh)]($){if(!$._||!$["--"])return $;$._.push.apply($._,$["--"]);try{delete $["--"]}catch(h){}return $}[yh](){return{log:(...$)=>{if(!this[w$]())console.log(...$);if(S(this,I0,!0,"f"),M(this,O0,"f").length)S(this,O0,M(this,O0,"f")+`
`,"f");S(this,O0,M(this,O0,"f")+$.join(" "),"f")},error:(...$)=>{if(!this[w$]())console.error(...$);if(S(this,I0,!0,"f"),M(this,O0,"f").length)S(this,O0,M(this,O0,"f")+`
`,"f");S(this,O0,M(this,O0,"f")+$.join(" "),"f")}}}[y$]($){e0(M(this,D,"f")).forEach((h)=>{if(((z)=>z==="configObjects")(h))return;let f=M(this,D,"f")[h];if(Array.isArray(f)){if(f.includes($))f.splice(f.indexOf($),1)}else if(typeof f==="object")delete f[$]}),delete M(this,t,"f").getDescriptions()[$]}[sh]($,h,f){if(!M(this,V$,"f")[f])M(this,x,"f").process.emitWarning($,h),M(this,V$,"f")[f]=!0}[rh](){M(this,Y$,"f").push({options:M(this,D,"f"),configObjects:M(this,D,"f").configObjects.slice(0),exitProcess:M(this,U0,"f"),groups:M(this,P0,"f"),strict:M(this,o0,"f"),strictCommands:M(this,v0,"f"),strictOptions:M(this,g0,"f"),completionCommand:M(this,E0,"f"),output:M(this,O0,"f"),exitError:M(this,n0,"f"),hasOutput:M(this,I0,"f"),parsed:this.parsed,parseFn:M(this,Q0,"f"),parseContext:M(this,i0,"f")}),M(this,t,"f").freeze(),M(this,r,"f").freeze(),M(this,e,"f").freeze(),M(this,q0,"f").freeze()}[ah](){let $="",h;if(/\b(node|iojs|electron)(\.exe)?$/.test(M(this,x,"f").process.argv()[0]))h=M(this,x,"f").process.argv().slice(1,2);else h=M(this,x,"f").process.argv().slice(0,1);if($=h.map((f)=>{let z=this[Ef](M(this,m0,"f"),f);return f.match(/^(\/|([a-zA-Z]:)?\\)/)&&z.length<f.length?z:f}).join(" ").trim(),M(this,x,"f").getEnv("_")&&M(this,x,"f").getProcessArgvBin()===M(this,x,"f").getEnv("_"))$=M(this,x,"f").getEnv("_").replace(`${M(this,x,"f").path.dirname(M(this,x,"f").process.execPath())}/`,"");return $}[k0](){return M(this,S$,"f")}[eh](){return M(this,R$,"f")}[s$](){if(!M(this,p0,"f"))return;let $=M(this,x,"f").getEnv("LC_ALL")||M(this,x,"f").getEnv("LC_MESSAGES")||M(this,x,"f").getEnv("LANG")||M(this,x,"f").getEnv("LANGUAGE")||"en_US";this.locale($.replace(/[.:].*/,""))}[$f](){return this[r$]().version||"unknown"}[hf]($){let h=$["--"]?$["--"]:$._;for(let f=0,z;(z=h[f])!==void 0;f++)if(M(this,x,"f").Parser.looksLikeNumber(z)&&Number.isSafeInteger(Math.floor(parseFloat(`${z}`))))h[f]=Number(z);return $}[r$]($){let h=$||"*";if(M(this,f$,"f")[h])return M(this,f$,"f")[h];let f={};try{let z=$||M(this,x,"f").mainFilename;if(!$&&M(this,x,"f").path.extname(z))z=M(this,x,"f").path.dirname(z);let G=M(this,x,"f").findUp(z,(O,B)=>{if(B.includes("package.json"))return"package.json";else return});X0(G,void 0,M(this,x,"f")),f=JSON.parse(M(this,x,"f").readFileSync(G,"utf8"))}catch(z){}return M(this,f$,"f")[h]=f||{},M(this,f$,"f")[h]}[t0]($,h){h=[].concat(h),h.forEach((f)=>{f=this[$h](f),M(this,D,"f")[$].push(f)})}[z$]($,h,f,z){this[e$]($,h,f,z,(G,O,B)=>{M(this,D,"f")[G][O]=B})}[a$]($,h,f,z){this[e$]($,h,f,z,(G,O,B)=>{M(this,D,"f")[G][O]=(M(this,D,"f")[G][O]||[]).concat(B)})}[e$]($,h,f,z,G){if(Array.isArray(f))f.forEach((O)=>{$(O,z)});else if(((O)=>typeof O==="object")(f))for(let O of e0(f))$(O,f[O]);else G(h,this[$h](f),z)}[$h]($){if($==="__proto__")return"___proto___";return $}[hh]($,h){return this[z$](this[hh].bind(this),"key",$,h),this}[fh](){var $,h,f,z,G,O,B,U,I,W,V,Q;let L=M(this,Y$,"f").pop();X0(L,void 0,M(this,x,"f"));let j;$=this,h=this,f=this,z=this,G=this,O=this,B=this,U=this,I=this,W=this,V=this,Q=this,{options:{set value(q){S($,D,q,"f")}}.value,configObjects:j,exitProcess:{set value(q){S(h,U0,q,"f")}}.value,groups:{set value(q){S(f,P0,q,"f")}}.value,output:{set value(q){S(z,O0,q,"f")}}.value,exitError:{set value(q){S(G,n0,q,"f")}}.value,hasOutput:{set value(q){S(O,I0,q,"f")}}.value,parsed:this.parsed,strict:{set value(q){S(B,o0,q,"f")}}.value,strictCommands:{set value(q){S(U,v0,q,"f")}}.value,strictOptions:{set value(q){S(I,g0,q,"f")}}.value,completionCommand:{set value(q){S(W,E0,q,"f")}}.value,parseFn:{set value(q){S(V,Q0,q,"f")}}.value,parseContext:{set value(q){S(Q,i0,q,"f")}}.value}=L,M(this,D,"f").configObjects=j,M(this,t,"f").unfreeze(),M(this,r,"f").unfreeze(),M(this,e,"f").unfreeze(),M(this,q0,"f").unfreeze()}[ff]($,h){return c0(h,(f)=>{return $(f),f})}getInternalMethods(){return{getCommandInstance:this[zf].bind(this),getContext:this[Gf].bind(this),getHasOutput:this[Mf].bind(this),getLoggerInstance:this[Of].bind(this),getParseContext:this[Bf].bind(this),getParserConfiguration:this[k0].bind(this),getUsageConfiguration:this[eh].bind(this),getUsageInstance:this[Jf].bind(this),getValidationInstance:this[Xf].bind(this),hasParseCallback:this[w$].bind(this),isGlobalContext:this[Zf].bind(this),postProcess:this[l0].bind(this),reset:this[zh].bind(this),runValidation:this[Gh].bind(this),runYargsParserAndExecuteCommands:this[Q$].bind(this),setHasOutput:this[If].bind(this)}}[zf](){return M(this,e,"f")}[Gf](){return M(this,I$,"f")}[Mf](){return M(this,I0,"f")}[Of](){return M(this,h$,"f")}[Bf](){return M(this,i0,"f")||{}}[Jf](){return M(this,t,"f")}[Xf](){return M(this,r,"f")}[w$](){return!!M(this,Q0,"f")}[Zf](){return M(this,H$,"f")}[l0]($,h,f,z){if(f)return $;if(k($))return $;if(!h)$=this[lh]($);if(this[k0]()["parse-positional-numbers"]||this[k0]()["parse-positional-numbers"]===void 0)$=this[hf]($);if(z)$=A0($,this,M(this,q0,"f").getMiddleware(),!1);return $}[zh]($={}){S(this,D,M(this,D,"f")||{},"f");let h={};h.local=M(this,D,"f").local||[],h.configObjects=M(this,D,"f").configObjects||[];let f={};h.local.forEach((O)=>{f[O]=!0,($[O]||[]).forEach((B)=>{f[B]=!0})}),Object.assign(M(this,d0,"f"),Object.keys(M(this,P0,"f")).reduce((O,B)=>{let U=M(this,P0,"f")[B].filter((I)=>!(I in f));if(U.length>0)O[B]=U;return O},{})),S(this,P0,{},"f");let z=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],G=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];if(z.forEach((O)=>{h[O]=(M(this,D,"f")[O]||[]).filter((B)=>!f[B])}),G.forEach((O)=>{h[O]=_0(M(this,D,"f")[O],(B)=>!f[B])}),h.envPrefix=M(this,D,"f").envPrefix,S(this,D,h,"f"),S(this,t,M(this,t,"f")?M(this,t,"f").reset(f):ch(this,M(this,x,"f")),"f"),S(this,r,M(this,r,"f")?M(this,r,"f").reset(f):gh(this,M(this,t,"f"),M(this,x,"f")),"f"),S(this,e,M(this,e,"f")?M(this,e,"f").reset():th(M(this,t,"f"),M(this,r,"f"),M(this,q0,"f"),M(this,x,"f")),"f"),!M(this,L0,"f"))S(this,L0,dh(this,M(this,t,"f"),M(this,e,"f"),M(this,x,"f")),"f");return M(this,q0,"f").reset(),S(this,E0,null,"f"),S(this,O0,"","f"),S(this,n0,null,"f"),S(this,I0,!1,"f"),this.parsed=!1,this}[Ef]($,h){return M(this,x,"f").path.relative($,h)}[Q$]($,h,f,z=0,G=!1){let O=!!f||G;$=$||M(this,b0,"f"),M(this,D,"f").__=M(this,x,"f").y18n.__,M(this,D,"f").configuration=this[k0]();let B=!!M(this,D,"f").configuration["populate--"],U=Object.assign({},M(this,D,"f").configuration,{"populate--":!0}),I=M(this,x,"f").Parser.detailed($,Object.assign({},M(this,D,"f"),{configuration:{"parse-positional-numbers":!1,...U}})),W=Object.assign(I.argv,M(this,i0,"f")),V=void 0,Q=I.aliases,L=!1,j=!1;if(Object.keys(W).forEach((q)=>{if(q===M(this,T0,"f")&&W[q])L=!0;else if(q===M(this,S0,"f")&&W[q])j=!0}),W.$0=this.$0,this.parsed=I,z===0)M(this,t,"f").clearCachedHelpMessage();try{if(this[s$](),h)return this[l0](W,B,!!f,!1);if(M(this,T0,"f")){if([M(this,T0,"f")].concat(Q[M(this,T0,"f")]||[]).filter((m)=>m.length>1).includes(""+W._[W._.length-1]))W._.pop(),L=!0}S(this,H$,!1,"f");let q=M(this,e,"f").getCommands(),E=M(this,L0,"f").completionKey in W,b=L||E||G;if(W._.length){if(q.length){let u;for(let m=z||0,$0;W._[m]!==void 0;m++)if($0=String(W._[m]),q.includes($0)&&$0!==M(this,E0,"f")){let A=M(this,e,"f").runCommand($0,this,I,m+1,G,L||j||G);return this[l0](A,B,!!f,!1)}else if(!u&&$0!==M(this,E0,"f")){u=$0;break}if(!M(this,e,"f").hasDefaultCommand()&&M(this,K$,"f")&&u&&!b)M(this,r,"f").recommendCommands(u,q)}if(M(this,E0,"f")&&W._.includes(M(this,E0,"f"))&&!E){if(M(this,U0,"f"))x0(!0);this.showCompletionScript(),this.exit(0)}}if(M(this,e,"f").hasDefaultCommand()&&!b){let u=M(this,e,"f").runCommand(null,this,I,0,G,L||j||G);return this[l0](u,B,!!f,!1)}if(E){if(M(this,U0,"f"))x0(!0);$=[].concat($);let u=$.slice($.indexOf(`--${M(this,L0,"f").completionKey}`)+1);return M(this,L0,"f").getCompletion(u,(m,$0)=>{if(m)throw new g(m.message);($0||[]).forEach((A)=>{M(this,h$,"f").log(A)}),this.exit(0)}),this[l0](W,!B,!!f,!1)}if(!M(this,I0,"f")){if(L){if(M(this,U0,"f"))x0(!0);O=!0,this.showHelp("log"),this.exit(0)}else if(j){if(M(this,U0,"f"))x0(!0);O=!0,M(this,t,"f").showVersion("log"),this.exit(0)}}if(!O&&M(this,D,"f").skipValidation.length>0)O=Object.keys(W).some((u)=>M(this,D,"f").skipValidation.indexOf(u)>=0&&W[u]===!0);if(!O){if(I.error)throw new g(I.error.message);if(!E){let u=this[Gh](Q,{},I.error);if(!f)V=A0(W,this,M(this,q0,"f").getMiddleware(),!0);if(V=this[ff](u,V!==null&&V!==void 0?V:W),k(V)&&!f)V=V.then(()=>{return A0(W,this,M(this,q0,"f").getMiddleware(),!1)})}}}catch(q){if(q instanceof g)M(this,t,"f").fail(q.message,q);else throw q}return this[l0](V!==null&&V!==void 0?V:W,B,!!f,!0)}[Gh]($,h,f,z){let G={...this.getDemandedOptions()};return(O)=>{if(f)throw new g(f.message);M(this,r,"f").nonOptionCount(O),M(this,r,"f").requiredArguments(O,G);let B=!1;if(M(this,v0,"f"))B=M(this,r,"f").unknownCommands(O);if(M(this,o0,"f")&&!B)M(this,r,"f").unknownArguments(O,$,h,!!z);else if(M(this,g0,"f"))M(this,r,"f").unknownArguments(O,$,{},!1,!1);M(this,r,"f").limitedChoices(O),M(this,r,"f").implications(O),M(this,r,"f").conflicting(O)}}[If](){S(this,I0,!0,"f")}[y0]($){if(typeof $==="string")M(this,D,"f").key[$]=!0;else for(let h of $)M(this,D,"f").key[h]=!0}}function uh($){return!!$&&typeof $.getInternalMethods==="function"}var Y1=Qf(d$),Nf=Y1;var Lf=($=0)=>(h)=>`\x1B[${h+$}m`,Uf=($=0)=>(h)=>`\x1B[${38+$};5;${h}m`,qf=($=0)=>(h,f,z)=>`\x1B[${38+$};2;${h};${f};${z}m`,l={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},g8=Object.keys(l.modifier),H1=Object.keys(l.color),P1=Object.keys(l.bgColor),k8=[...H1,...P1];function S1(){let $=new Map;for(let[h,f]of Object.entries(l)){for(let[z,G]of Object.entries(f))l[z]={open:`\x1B[${G[0]}m`,close:`\x1B[${G[1]}m`},f[z]=l[z],$.set(G[0],G[1]);Object.defineProperty(l,h,{value:f,enumerable:!1})}return Object.defineProperty(l,"codes",{value:$,enumerable:!1}),l.color.close="\x1B[39m",l.bgColor.close="\x1B[49m",l.color.ansi=Lf(),l.color.ansi256=Uf(),l.color.ansi16m=qf(),l.bgColor.ansi=Lf(10),l.bgColor.ansi256=Uf(10),l.bgColor.ansi16m=qf(10),Object.defineProperties(l,{rgbToAnsi256:{value(h,f,z){if(h===f&&f===z){if(h<8)return 16;if(h>248)return 231;return Math.round((h-8)/247*24)+232}return 16+36*Math.round(h/255*5)+6*Math.round(f/255*5)+Math.round(z/255*5)},enumerable:!1},hexToRgb:{value(h){let f=/[a-f\d]{6}|[a-f\d]{3}/i.exec(h.toString(16));if(!f)return[0,0,0];let[z]=f;if(z.length===3)z=[...z].map((O)=>O+O).join("");let G=Number.parseInt(z,16);return[G>>16&255,G>>8&255,G&255]},enumerable:!1},hexToAnsi256:{value:(h)=>l.rgbToAnsi256(...l.hexToRgb(h)),enumerable:!1},ansi256ToAnsi:{value(h){if(h<8)return 30+h;if(h<16)return 90+(h-8);let f,z,G;if(h>=232)f=((h-232)*10+8)/255,z=f,G=f;else{h-=16;let U=h%36;f=Math.floor(h/36)/5,z=Math.floor(U/6)/5,G=U%6/5}let O=Math.max(f,z,G)*2;if(O===0)return 30;let B=30+(Math.round(G)<<2|Math.round(z)<<1|Math.round(f));if(O===2)B+=60;return B},enumerable:!1},rgbToAnsi:{value:(h,f,z)=>l.ansi256ToAnsi(l.rgbToAnsi256(h,f,z)),enumerable:!1},hexToAnsi:{value:(h)=>l.ansi256ToAnsi(l.hexToAnsi256(h)),enumerable:!1}}),l}var K1=S1(),H0=K1;import Mh from"process";import R1 from"os";import Tf from"tty";function j0($,h=globalThis.Deno?globalThis.Deno.args:Mh.argv){let f=$.startsWith("-")?"":$.length===1?"-":"--",z=h.indexOf(f+$),G=h.indexOf("--");return z!==-1&&(G===-1||z<G)}var{env:y}=Mh,D$;if(j0("no-color")||j0("no-colors")||j0("color=false")||j0("color=never"))D$=0;else if(j0("color")||j0("colors")||j0("color=true")||j0("color=always"))D$=1;function w1(){if("FORCE_COLOR"in y){if(y.FORCE_COLOR==="true")return 1;if(y.FORCE_COLOR==="false")return 0;return y.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(y.FORCE_COLOR,10),3)}}function D1($){if($===0)return!1;return{level:$,hasBasic:!0,has256:$>=2,has16m:$>=3}}function F1($,{streamIsTTY:h,sniffFlags:f=!0}={}){let z=w1();if(z!==void 0)D$=z;let G=f?D$:z;if(G===0)return 0;if(f){if(j0("color=16m")||j0("color=full")||j0("color=truecolor"))return 3;if(j0("color=256"))return 2}if("TF_BUILD"in y&&"AGENT_NAME"in y)return 1;if($&&!h&&G===void 0)return 0;let O=G||0;if(y.TERM==="dumb")return O;if(Mh.platform==="win32"){let B=R1.release().split(".");if(Number(B[0])>=10&&Number(B[2])>=10586)return Number(B[2])>=14931?3:2;return 1}if("CI"in y){if(["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some((B)=>(B in y)))return 3;if(["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some((B)=>(B in y))||y.CI_NAME==="codeship")return 1;return O}if("TEAMCITY_VERSION"in y)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(y.TEAMCITY_VERSION)?1:0;if(y.COLORTERM==="truecolor")return 3;if(y.TERM==="xterm-kitty")return 3;if(y.TERM==="xterm-ghostty")return 3;if(y.TERM==="wezterm")return 3;if("TERM_PROGRAM"in y){let B=Number.parseInt((y.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(y.TERM_PROGRAM){case"iTerm.app":return B>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(y.TERM))return 2;if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(y.TERM))return 1;if("COLORTERM"in y)return 1;return O}function jf($,h={}){let f=F1($,{streamIsTTY:$&&$.isTTY,...h});return D1(f)}var C1={stdout:jf({isTTY:Tf.isatty(1)}),stderr:jf({isTTY:Tf.isatty(2)})},Vf=C1;function Yf($,h,f){let z=$.indexOf(h);if(z===-1)return $;let G=h.length,O=0,B="";do B+=$.slice(O,z)+h+f,O=z+G,z=$.indexOf(h,O);while(z!==-1);return B+=$.slice(O),B}function Hf($,h,f,z){let G=0,O="";do{let B=$[z-1]==="\r";O+=$.slice(G,B?z-1:z)+h+(B?`\r
`:`
`)+f,G=z+1,z=$.indexOf(`
`,G)}while(z!==-1);return O+=$.slice(G),O}var{stdout:Pf,stderr:Sf}=Vf,Oh=Symbol("GENERATOR"),G$=Symbol("STYLER"),W$=Symbol("IS_EMPTY"),Kf=["ansi","ansi","ansi256","ansi16m"],M$=Object.create(null),_1=($,h={})=>{if(h.level&&!(Number.isInteger(h.level)&&h.level>=0&&h.level<=3))throw Error("The `level` option should be an integer from 0 to 3");let f=Pf?Pf.level:0;$.level=h.level===void 0?f:h.level};var x1=($)=>{let h=(...f)=>f.join(" ");return _1(h,$),Object.setPrototypeOf(h,N$.prototype),h};function N$($){return x1($)}Object.setPrototypeOf(N$.prototype,Function.prototype);for(let[$,h]of Object.entries(H0))M$[$]={get(){let f=F$(this,Jh(h.open,h.close,this[G$]),this[W$]);return Object.defineProperty(this,$,{value:f}),f}};M$.visible={get(){let $=F$(this,this[G$],!0);return Object.defineProperty(this,"visible",{value:$}),$}};var Bh=($,h,f,...z)=>{if($==="rgb"){if(h==="ansi16m")return H0[f].ansi16m(...z);if(h==="ansi256")return H0[f].ansi256(H0.rgbToAnsi256(...z));return H0[f].ansi(H0.rgbToAnsi(...z))}if($==="hex")return Bh("rgb",h,f,...H0.hexToRgb(...z));return H0[f][$](...z)},n1=["rgb","hex","ansi256"];for(let $ of n1){M$[$]={get(){let{level:f}=this;return function(...z){let G=Jh(Bh($,Kf[f],"color",...z),H0.color.close,this[G$]);return F$(this,G,this[W$])}}};let h="bg"+$[0].toUpperCase()+$.slice(1);M$[h]={get(){let{level:f}=this;return function(...z){let G=Jh(Bh($,Kf[f],"bgColor",...z),H0.bgColor.close,this[G$]);return F$(this,G,this[W$])}}}}var b1=Object.defineProperties(()=>{},{...M$,level:{enumerable:!0,get(){return this[Oh].level},set($){this[Oh].level=$}}}),Jh=($,h,f)=>{let z,G;if(f===void 0)z=$,G=h;else z=f.openAll+$,G=h+f.closeAll;return{open:$,close:h,openAll:z,closeAll:G,parent:f}},F$=($,h,f)=>{let z=(...G)=>t1(z,G.length===1?""+G[0]:G.join(" "));return Object.setPrototypeOf(z,b1),z[Oh]=$,z[G$]=h,z[W$]=f,z},t1=($,h)=>{if($.level<=0||!h)return $[W$]?"":h;let f=$[G$];if(f===void 0)return h;let{openAll:z,closeAll:G}=f;if(h.includes("\x1B"))while(f!==void 0)h=Yf(h,f.close,f.open),f=f.parent;let O=h.indexOf(`
`);if(O!==-1)h=Hf(h,G,z,O);return z+h+G};Object.defineProperties(N$.prototype,M$);var u1=N$(),zG=N$({level:Sf?Sf.level:0});var s=u1;import{join as Xh,extname as c1,basename as C$,dirname as m1}from"path";import{existsSync as p1,renameSync as i1,unlinkSync as Rf}from"fs";var wf=["mpeg4","msmpeg4v3","mpeg2video","vc1","theora","vp8","h263","flv1"],V0=await Nf(i$(process.argv)).option("dir",{alias:"d",type:"string",description:"Directory to scan",default:"."}).option("limit",{alias:"l",type:"number",description:"Limit the number of files to convert",default:1/0}).option("dry-run",{type:"boolean",description:"Scan and identify files without converting",default:!1}).option("preset",{type:"number",description:"SVT-AV1 preset (0-13, lower is slower/better)",default:6}).option("crf",{type:"number",description:"SVT-AV1 CRF (0-63, lower is higher quality)",default:30}).option("delete-original",{type:"boolean",description:"Delete the original file after successful conversion",default:!1}).option("upscale-to",{type:"string",description:"Upscale video if height is below target (e.g., 720p, 1080p)"}).help().argv;async function d1($){try{let f=(await Df`ffprobe -v error -select_streams v:0 -show_entries stream=codec_name,height -of json ${$}`.json()).streams[0];return{codec:f.codec_name,height:f.height}}catch(h){return null}}function Ff($){if(!$)return null;let h=$.match(/(\d+)/);if(!h)return null;let f=parseInt(h[1]);if($.toLowerCase().includes("4k"))return 2160;return f}async function o1($,h){let f=m1($),z=c1($),G=C$($,z),O=Xh(f,`${G}.av1.mkv`);console.log(s.blue(`
Converting: ${C$($)}`));let B=Ff(V0["upscale-to"]),U="";if(B&&h<B)console.log(s.yellow(`\u2191 Upscaling: ${h}p -> ${B}p`)),U=`-vf scale=-2:${B}:flags=lanczos`;else console.log(s.gray(`Height: ${h}p`));console.log(s.gray(`Output: ${C$(O)}`));try{let I=["-i",$,"-map","0","-c:v","libsvtav1","-preset",String(V0.preset),"-crf",String(V0.crf),...U?U.split(" "):[],"-c:a","copy","-c:s","copy",O,"-y"];if(await Df`ffmpeg ${I}`.quiet(),console.log(s.green("\u2713 Successfully converted to AV1")),V0["delete-original"]){console.log(s.yellow(`! Deleting original: ${C$($)}`)),Rf($);let W=Xh(f,`${G}.mkv`);if(O!==W)i1(O,W)}else console.log(s.yellow(`i Original file kept. New file at ${O}`));return!0}catch(I){if(console.error(s.red(`\u2717 Failed to convert ${$}`)),p1(O))Rf(O);return!1}}async function v1(){let $=V0.dir,h=Ff(V0["upscale-to"]);if(console.log(s.cyan(`
--- SKYLAB Media Converter ---`)),console.log(s.gray(`Scanning directory: ${$}`)),console.log(s.gray(`Targeting codecs: ${wf.join(", ")}`)),h)console.log(s.yellow(`Target Upscale: ${h}p`));if(V0["dry-run"])console.log(s.yellow("Mode: DRY RUN (no files will be changed)"));if(V0.limit!==1/0)console.log(s.gray(`Limit: ${V0.limit} files`));let f=new A1("**/*.{avi,mp4,mkv,wmv,flv,mpg,mpeg,mov,ts}"),z=Array.from(f.scanSync($));console.log(s.gray(`Found ${z.length} potential media files.`));let G=0,O=0;for(let B of z){if(O>=V0.limit)break;let U=Xh($,B),I=await d1(U);if(I&&wf.includes(I.codec)){G++;let W=h&&I.height<h?s.yellow(" [UP] "):" ";if(console.log(s.yellow(`[${I.codec}]`)+W+B),!V0["dry-run"]){if(await o1(U,I.height))O++}else O++}}if(console.log(s.cyan(`
--- Summary ---`)),console.log(s.gray(`Files scanned: ${z.length}`)),console.log(s.gray(`Files matching target codecs: ${G}`)),!V0["dry-run"])console.log(s.green(`Files successfully converted: ${O}`));else console.log(s.yellow(`Files that would be converted: ${O}`))}v1().catch(($)=>{console.error(s.red(`
An unexpected error occurred:`)),console.error($),process.exit(1)});
