#!/usr/bin/env bun
// @bun
var F0=import.meta.require;var{Glob:A1,$:Fh}=globalThis.Bun;import{notStrictEqual as eh,strictEqual as $1}from"assert";var _h={right:bh,center:th};class If{constructor($){var f;this.width=$.width,this.wrap=(f=$.wrap)!==null&&f!==void 0?f:!0,this.rows=[]}span(...$){let f=this.div(...$);f.span=!0}resetOutput(){this.rows=[]}div(...$){if($.length===0)this.div("");if(this.wrap&&this.shouldApplyLayoutDSL(...$)&&typeof $[0]==="string")return this.applyLayoutDSL($[0]);let f=$.map((h)=>{if(typeof h==="string")return this.colFromString(h);return h});return this.rows.push(f),f}shouldApplyLayoutDSL(...$){return $.length===1&&typeof $[0]==="string"&&/[\t\n]/.test($[0])}applyLayoutDSL($){let f=$.split(`
`).map((z)=>z.split("\t")),h=0;return f.forEach((z)=>{if(z.length>1&&Z0.stringWidth(z[0])>h)h=Math.min(Math.floor(this.width*0.5),Z0.stringWidth(z[0]))}),f.forEach((z)=>{this.div(...z.map((G,O)=>{return{text:G.trim(),padding:this.measurePadding(G),width:O===0&&z.length>1?h:void 0}}))}),this.rows[this.rows.length-1]}colFromString($){return{text:$,padding:this.measurePadding($)}}measurePadding($){let f=Z0.stripAnsi($);return[0,f.match(/\s*$/)[0].length,0,f.match(/^\s*/)[0].length]}toString(){let $=[];return this.rows.forEach((f)=>{this.rowToString(f,$)}),$.filter((f)=>!f.hidden).map((f)=>f.text).join(`
`)}rowToString($,f){return this.rasterize($).forEach((h,z)=>{let G="";h.forEach((O,B)=>{let{width:U}=$[B],I=this.negatePadding($[B]),N=O;if(I>Z0.stringWidth(O))N+=" ".repeat(I-Z0.stringWidth(O));if($[B].align&&$[B].align!=="left"&&this.wrap){let Q=_h[$[B].align];if(N=Q(N,I),Z0.stringWidth(N)<I)N+=" ".repeat((U||0)-Z0.stringWidth(N)-1)}let V=$[B].padding||[0,0,0,0];if(V[3])G+=" ".repeat(V[3]);if(G+=Ef($[B],N,"| "),G+=N,G+=Ef($[B],N," |"),V[1])G+=" ".repeat(V[1]);if(z===0&&f.length>0)G=this.renderInline(G,f[f.length-1])}),f.push({text:G.replace(/ +$/,""),span:$.span})}),f}renderInline($,f){let h=$.match(/^ */),z=h?h[0].length:0,G=f.text,O=Z0.stringWidth(G.trimRight());if(!f.span)return $;if(!this.wrap)return f.hidden=!0,G+$;if(z<O)return $;return f.hidden=!0,G.trimRight()+" ".repeat(z-O)+$.trimLeft()}rasterize($){let f=[],h=this.columnWidths($),z;return $.forEach((G,O)=>{if(G.width=h[O],this.wrap)z=Z0.wrap(G.text,this.negatePadding(G),{hard:!0}).split(`
`);else z=G.text.split(`
`);if(G.border)z.unshift("."+"-".repeat(this.negatePadding(G)+2)+"."),z.push("'"+"-".repeat(this.negatePadding(G)+2)+"'");if(G.padding)z.unshift(...Array(G.padding[0]||0).fill("")),z.push(...Array(G.padding[2]||0).fill(""));z.forEach((B,U)=>{if(!f[U])f.push([]);let I=f[U];for(let N=0;N<O;N++)if(I[N]===void 0)I.push("");I.push(B)})}),f}negatePadding($){let f=$.width||0;if($.padding)f-=($.padding[3]||0)+($.padding[1]||0);if($.border)f-=4;return f}columnWidths($){if(!this.wrap)return $.map((O)=>{return O.width||Z0.stringWidth(O.text)});let f=$.length,h=this.width,z=$.map((O)=>{if(O.width)return f--,h-=O.width,O.width;return}),G=f?Math.floor(h/f):0;return z.map((O,B)=>{if(O===void 0)return Math.max(G,xh($[B]));return O})}}function Ef($,f,h){if($.border){if(/[.']-+[.']/.test(f))return"";if(f.trim().length!==0)return h;return"  "}return""}function xh($){let f=$.padding||[],h=1+(f[3]||0)+(f[1]||0);if($.border)return h+4;return h}function nh(){if(typeof process==="object"&&process.stdout&&process.stdout.columns)return process.stdout.columns;return 80}function bh($,f){$=$.trim();let h=Z0.stringWidth($);if(h<f)return" ".repeat(f-h)+$;return $}function th($,f){$=$.trim();let h=Z0.stringWidth($);if(h>=f)return $;return" ".repeat(f-h>>1)+$}var Z0;function Qf($,f){return Z0=f,new If({width:($===null||$===void 0?void 0:$.width)||nh(),wrap:$===null||$===void 0?void 0:$.wrap})}var Wf=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function x$($){return $.replace(Wf,"")}function Nf($,f){let[h,z]=$.match(Wf)||["",""];$=x$($);let G="";for(let O=0;O<$.length;O++){if(O!==0&&O%f===0)G+=`
`;G+=$.charAt(O)}if(h&&z)G=`${h}${G}${z}`;return G}function n$($){return Qf($,{stringWidth:(f)=>{return[...f].length},stripAnsi:x$,wrap:Nf})}import{dirname as Lf,resolve as Uf}from"path";import{readdirSync as uh,statSync as Ah}from"fs";function b$($,f){let h=Uf(".",$),z;if(!Ah(h).isDirectory())h=Lf(h);while(!0){if(z=f(h,uh(h)),z)return Uf(h,z);if(h=Lf(z=h),z===h)break}}import{inspect as f1}from"util";import{readFileSync as h1}from"fs";import{fileURLToPath as z1}from"url";import{format as ph}from"util";import{normalize as ih,resolve as dh}from"path";function u0($){if(!($!==$.toLowerCase()&&$!==$.toUpperCase()))$=$.toLowerCase();if($.indexOf("-")===-1&&$.indexOf("_")===-1)return $;else{let h="",z=!1,G=$.match(/^-+/);for(let O=G?G[0].length:0;O<$.length;O++){let B=$.charAt(O);if(z)z=!1,B=B.toUpperCase();if(O!==0&&(B==="-"||B==="_"))z=!0;else if(B!=="-"&&B!=="_")h+=B}return h}}function L$($,f){let h=$.toLowerCase();f=f||"-";let z="";for(let G=0;G<$.length;G++){let O=h.charAt(G),B=$.charAt(G);if(O!==B&&G>0)z+=`${f}${h.charAt(G)}`;else z+=B}return z}function U$($){if($===null||$===void 0)return!1;if(typeof $==="number")return!0;if(/^0x[0-9a-f]+$/i.test($))return!0;if(/^0[^.]/.test($))return!1;return/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test($)}function qf($){if(Array.isArray($))return $.map((B)=>typeof B!=="string"?B+"":B);$=$.trim();let f=0,h=null,z=null,G=null,O=[];for(let B=0;B<$.length;B++){if(h=z,z=$.charAt(B),z===" "&&!G){if(h!==" ")f++;continue}if(z===G)G=null;else if((z==="'"||z==='"')&&!G)G=z;if(!O[f])O[f]="";O[f]+=z}return O}var N0;(function($){$.BOOLEAN="boolean",$.STRING="string",$.NUMBER="number",$.ARRAY="array"})(N0||(N0={}));var w0;class u${constructor($){w0=$}parse($,f){let h=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},f),z=qf($),G=typeof $==="string",O=ch(Object.assign(Object.create(null),h.alias)),B=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},h.configuration),U=Object.assign(Object.create(null),h.default),I=h.configObjects||[],N=h.envPrefix,V=B["populate--"],Q=V?"--":"_",L=Object.create(null),j=Object.create(null),q=h.__||w0.format,E={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},b=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,u=new RegExp("^--"+B["negation-prefix"]+"(.+)");if([].concat(h.array||[]).filter(Boolean).forEach(function(J){let Z=typeof J==="object"?J.key:J,T=Object.keys(J).map(function(W){return{boolean:"bools",string:"strings",number:"numbers"}[W]}).filter(Boolean).pop();if(T)E[T][Z]=!0;E.arrays[Z]=!0,E.keys.push(Z)}),[].concat(h.boolean||[]).filter(Boolean).forEach(function(J){E.bools[J]=!0,E.keys.push(J)}),[].concat(h.string||[]).filter(Boolean).forEach(function(J){E.strings[J]=!0,E.keys.push(J)}),[].concat(h.number||[]).filter(Boolean).forEach(function(J){E.numbers[J]=!0,E.keys.push(J)}),[].concat(h.count||[]).filter(Boolean).forEach(function(J){E.counts[J]=!0,E.keys.push(J)}),[].concat(h.normalize||[]).filter(Boolean).forEach(function(J){E.normalize[J]=!0,E.keys.push(J)}),typeof h.narg==="object")Object.entries(h.narg).forEach(([J,Z])=>{if(typeof Z==="number")E.nargs[J]=Z,E.keys.push(J)});if(typeof h.coerce==="object")Object.entries(h.coerce).forEach(([J,Z])=>{if(typeof Z==="function")E.coercions[J]=Z,E.keys.push(J)});if(typeof h.config<"u"){if(Array.isArray(h.config)||typeof h.config==="string")[].concat(h.config).filter(Boolean).forEach(function(J){E.configs[J]=!0});else if(typeof h.config==="object")Object.entries(h.config).forEach(([J,Z])=>{if(typeof Z==="boolean"||typeof Z==="function")E.configs[J]=Z})}B$(h.key,O,h.default,E.arrays),Object.keys(U).forEach(function(J){(E.aliases[J]||[]).forEach(function(Z){U[Z]=U[J]})});let m=null;_$();let $0=[],A=Object.assign(Object.create(null),{_:[]}),s0={};for(let J=0;J<z.length;J++){let Z=z[J],T=Z.replace(/^-{3,}/,"---"),W,X,K,H,F,M0;if(Z!=="--"&&/^-/.test(Z)&&o(Z))K0(Z);else if(T.match(/^---+(=|$)/)){K0(Z);continue}else if(Z.match(/^--.+=/)||!B["short-option-groups"]&&Z.match(/^-.+=/)){if(H=Z.match(/^--?([^=]+)=([\s\S]*)$/),H!==null&&Array.isArray(H)&&H.length>=3)if(C(H[1],E.arrays))J=r0(J,H[1],z,H[2]);else if(C(H[1],E.nargs)!==!1)J=W0(J,H[1],z,H[2]);else d(H[1],H[2],!0)}else if(Z.match(u)&&B["boolean-negation"]){if(H=Z.match(u),H!==null&&Array.isArray(H)&&H.length>=2)X=H[1],d(X,C(X,E.arrays)?[!1]:!1)}else if(Z.match(/^--.+/)||!B["short-option-groups"]&&Z.match(/^-[^-]+/)){if(H=Z.match(/^--?(.+)/),H!==null&&Array.isArray(H)&&H.length>=2)if(X=H[1],C(X,E.arrays))J=r0(J,X,z);else if(C(X,E.nargs)!==!1)J=W0(J,X,z);else if(F=z[J+1],F!==void 0&&(!F.match(/^-/)||F.match(b))&&!C(X,E.bools)&&!C(X,E.counts))d(X,F),J++;else if(/^(true|false)$/.test(F))d(X,F),J++;else d(X,c(X))}else if(Z.match(/^-.\..+=/)){if(H=Z.match(/^-([^=]+)=([\s\S]*)$/),H!==null&&Array.isArray(H)&&H.length>=3)d(H[1],H[2])}else if(Z.match(/^-.\..+/)&&!Z.match(b)){if(F=z[J+1],H=Z.match(/^-(.\..+)/),H!==null&&Array.isArray(H)&&H.length>=2)if(X=H[1],F!==void 0&&!F.match(/^-/)&&!C(X,E.bools)&&!C(X,E.counts))d(X,F),J++;else d(X,c(X))}else if(Z.match(/^-[^-]+/)&&!Z.match(b)){K=Z.slice(1,-1).split(""),W=!1;for(let J0=0;J0<K.length;J0++){if(F=Z.slice(J0+2),K[J0+1]&&K[J0+1]==="="){if(M0=Z.slice(J0+3),X=K[J0],C(X,E.arrays))J=r0(J,X,z,M0);else if(C(X,E.nargs)!==!1)J=W0(J,X,z,M0);else d(X,M0);W=!0;break}if(F==="-"){d(K[J0],F);continue}if(/[A-Za-z]/.test(K[J0])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(F)&&C(F,E.bools)===!1){d(K[J0],F),W=!0;break}if(K[J0+1]&&K[J0+1].match(/\W/)){d(K[J0],F),W=!0;break}else d(K[J0],c(K[J0]))}if(X=Z.slice(-1)[0],!W&&X!=="-")if(C(X,E.arrays))J=r0(J,X,z);else if(C(X,E.nargs)!==!1)J=W0(J,X,z);else if(F=z[J+1],F!==void 0&&(!/^(-|--)[^-]/.test(F)||F.match(b))&&!C(X,E.bools)&&!C(X,E.counts))d(X,F),J++;else if(/^(true|false)$/.test(F))d(X,F),J++;else d(X,c(X))}else if(Z.match(/^-[0-9]$/)&&Z.match(b)&&C(Z.slice(1),E.bools))X=Z.slice(1),d(X,c(X));else if(Z==="--"){$0=z.slice(J+1);break}else if(B["halt-at-non-option"]){$0=z.slice(J);break}else K0(Z)}if(f0(A,!0),f0(A,!1),w(A),i(),D0(A,E.aliases,U,!0),p(A),B["set-placeholder-key"])h0(A);if(Object.keys(E.counts).forEach(function(J){if(!v(A,J.split(".")))d(J,0)}),V&&$0.length)A[Q]=[];if($0.forEach(function(J){A[Q].push(J)}),B["camel-case-expansion"]&&B["strip-dashed"])Object.keys(A).filter((J)=>J!=="--"&&J.includes("-")).forEach((J)=>{delete A[J]});if(B["strip-aliased"])[].concat(...Object.keys(O).map((J)=>O[J])).forEach((J)=>{if(B["camel-case-expansion"]&&J.includes("-"))delete A[J.split(".").map((Z)=>u0(Z)).join(".")];delete A[J]});function K0(J){let Z=Y("_",J);if(typeof Z==="string"||typeof Z==="number")A._.push(Z)}function W0(J,Z,T,W){let X,K=C(Z,E.nargs);if(K=typeof K!=="number"||isNaN(K)?1:K,K===0){if(!G0(W))m=Error(q("Argument unexpected for: %s",Z));return d(Z,c(Z)),J}let H=G0(W)?0:1;if(B["nargs-eats-options"]){if(T.length-(J+1)+H<K)m=Error(q("Not enough arguments following: %s",Z));H=K}else{for(X=J+1;X<T.length;X++)if(!T[X].match(/^-[^0-9]/)||T[X].match(b)||o(T[X]))H++;else break;if(H<K)m=Error(q("Not enough arguments following: %s",Z))}let F=Math.min(H,K);if(!G0(W)&&F>0)d(Z,W),F--;for(X=J+1;X<F+J+1;X++)d(Z,T[X]);return J+F}function r0(J,Z,T,W){let X=[],K=W||T[J+1],H=C(Z,E.nargs);if(C(Z,E.bools)&&!/^(true|false)$/.test(K))X.push(!0);else if(G0(K)||G0(W)&&/^-/.test(K)&&!b.test(K)&&!o(K)){if(U[Z]!==void 0){let F=U[Z];X=Array.isArray(F)?F:[F]}}else{if(!G0(W))X.push(R(Z,W,!0));for(let F=J+1;F<T.length;F++){if(!B["greedy-arrays"]&&X.length>0||H&&typeof H==="number"&&X.length>=H)break;if(K=T[F],/^-/.test(K)&&!b.test(K)&&!o(K))break;J=F,X.push(R(Z,K,G))}}if(typeof H==="number"&&(H&&X.length<H||isNaN(H)&&X.length===0))m=Error(q("Not enough arguments following: %s",Z));return d(Z,X),J}function d(J,Z,T=G){if(/-/.test(J)&&B["camel-case-expansion"]){let K=J.split(".").map(function(H){return u0(H)}).join(".");O$(J,K)}let W=R(J,Z,T),X=J.split(".");if(R0(A,X,W),E.aliases[J])E.aliases[J].forEach(function(K){let H=K.split(".");R0(A,H,W)});if(X.length>1&&B["dot-notation"])(E.aliases[X[0]]||[]).forEach(function(K){let H=K.split("."),F=[].concat(X);if(F.shift(),H=H.concat(F),!(E.aliases[J]||[]).includes(H.join(".")))R0(A,H,W)});if(C(J,E.normalize)&&!C(J,E.arrays))[J].concat(E.aliases[J]||[]).forEach(function(H){Object.defineProperty(s0,H,{enumerable:!0,get(){return Z},set(F){Z=typeof F==="string"?w0.normalize(F):F}})})}function O$(J,Z){if(!(E.aliases[J]&&E.aliases[J].length))E.aliases[J]=[Z],L[Z]=!0;if(!(E.aliases[Z]&&E.aliases[Z].length))O$(Z,J)}function R(J,Z,T){if(T)Z=mh(Z);if(C(J,E.bools)||C(J,E.counts)){if(typeof Z==="string")Z=Z==="true"}let W=Array.isArray(Z)?Z.map(function(X){return Y(J,X)}):Y(J,Z);if(C(J,E.counts)&&(G0(W)||typeof W==="boolean"))W=t$();if(C(J,E.normalize)&&C(J,E.arrays))if(Array.isArray(Z))W=Z.map((X)=>{return w0.normalize(X)});else W=w0.normalize(Z);return W}function Y(J,Z){if(!B["parse-positional-numbers"]&&J==="_")return Z;if(!C(J,E.strings)&&!C(J,E.bools)&&!Array.isArray(Z)){if(U$(Z)&&B["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${Z}`)))||!G0(Z)&&C(J,E.numbers))Z=Number(Z)}return Z}function w(J){let Z=Object.create(null);D0(Z,E.aliases,U),Object.keys(E.configs).forEach(function(T){let W=J[T]||Z[T];if(W)try{let X=null,K=w0.resolve(w0.cwd(),W),H=E.configs[T];if(typeof H==="function"){try{X=H(K)}catch(F){X=F}if(X instanceof Error){m=X;return}}else X=w0.require(K);n(X)}catch(X){if(X.name==="PermissionDenied")m=X;else if(J[T])m=Error(q("Invalid JSON config file: %s",W))}})}function n(J,Z){Object.keys(J).forEach(function(T){let W=J[T],X=Z?Z+"."+T:T;if(typeof W==="object"&&W!==null&&!Array.isArray(W)&&B["dot-notation"])n(W,X);else if(!v(A,X.split("."))||C(X,E.arrays)&&B["combine-arrays"])d(X,W)})}function i(){if(typeof I<"u")I.forEach(function(J){n(J)})}function f0(J,Z){if(typeof N>"u")return;let T=typeof N==="string"?N:"",W=w0.env();Object.keys(W).forEach(function(X){if(T===""||X.lastIndexOf(T,0)===0){let K=X.split("__").map(function(H,F){if(F===0)H=H.substring(T.length);return u0(H)});if((Z&&E.configs[K.join(".")]||!Z)&&!v(J,K))d(K.join("."),W[X])}})}function p(J){let Z,T=new Set;Object.keys(J).forEach(function(W){if(!T.has(W)){if(Z=C(W,E.coercions),typeof Z==="function")try{let X=Y(W,Z(J[W]));[].concat(E.aliases[W]||[],W).forEach((K)=>{T.add(K),J[K]=X})}catch(X){m=X}}})}function h0(J){return E.keys.forEach((Z)=>{if(~Z.indexOf("."))return;if(typeof J[Z]>"u")J[Z]=void 0}),J}function D0(J,Z,T,W=!1){Object.keys(T).forEach(function(X){if(!v(J,X.split("."))){if(R0(J,X.split("."),T[X]),W)j[X]=!0;(Z[X]||[]).forEach(function(K){if(v(J,K.split(".")))return;R0(J,K.split("."),T[X])})}})}function v(J,Z){let T=J;if(!B["dot-notation"])Z=[Z.join(".")];Z.slice(0,-1).forEach(function(X){T=T[X]||{}});let W=Z[Z.length-1];if(typeof T!=="object")return!1;else return W in T}function R0(J,Z,T){let W=J;if(!B["dot-notation"])Z=[Z.join(".")];Z.slice(0,-1).forEach(function(M0){if(M0=Tf(M0),typeof W==="object"&&W[M0]===void 0)W[M0]={};if(typeof W[M0]!=="object"||Array.isArray(W[M0])){if(Array.isArray(W[M0]))W[M0].push({});else W[M0]=[W[M0],{}];W=W[M0][W[M0].length-1]}else W=W[M0]});let X=Tf(Z[Z.length-1]),K=C(Z.join("."),E.arrays),H=Array.isArray(T),F=B["duplicate-arguments-array"];if(!F&&C(X,E.nargs)){if(F=!0,!G0(W[X])&&E.nargs[X]===1||Array.isArray(W[X])&&W[X].length===E.nargs[X])W[X]=void 0}if(T===t$())W[X]=t$(W[X]);else if(Array.isArray(W[X]))if(F&&K&&H)W[X]=B["flatten-duplicate-arrays"]?W[X].concat(T):(Array.isArray(W[X][0])?W[X]:[W[X]]).concat([T]);else if(!F&&Boolean(K)===Boolean(H))W[X]=T;else W[X]=W[X].concat([T]);else if(W[X]===void 0&&K)W[X]=H?T:[T];else if(F&&!(W[X]===void 0||C(X,E.counts)||C(X,E.bools)))W[X]=[W[X],T];else W[X]=T}function B$(...J){J.forEach(function(Z){Object.keys(Z||{}).forEach(function(T){if(E.aliases[T])return;E.aliases[T]=[].concat(O[T]||[]),E.aliases[T].concat(T).forEach(function(W){if(/-/.test(W)&&B["camel-case-expansion"]){let X=u0(W);if(X!==T&&E.aliases[T].indexOf(X)===-1)E.aliases[T].push(X),L[X]=!0}}),E.aliases[T].concat(T).forEach(function(W){if(W.length>1&&/[A-Z]/.test(W)&&B["camel-case-expansion"]){let X=L$(W,"-");if(X!==T&&E.aliases[T].indexOf(X)===-1)E.aliases[T].push(X),L[X]=!0}}),E.aliases[T].forEach(function(W){E.aliases[W]=[T].concat(E.aliases[T].filter(function(X){return W!==X}))})})})}function C(J,Z){let T=[].concat(E.aliases[J]||[],J),W=Object.keys(Z),X=T.find((K)=>W.includes(K));return X?Z[X]:!1}function a0(J){let Z=Object.keys(E);return[].concat(Z.map((W)=>E[W])).some(function(W){return Array.isArray(W)?W.includes(J):W[J]})}function Zf(J,...Z){return[].concat(...Z).some(function(W){let X=J.match(W);return X&&a0(X[1])})}function _(J){if(J.match(b)||!J.match(/^-[^-]+/))return!1;let Z=!0,T,W=J.slice(1).split("");for(let X=0;X<W.length;X++){if(T=J.slice(X+2),!a0(W[X])){Z=!1;break}if(W[X+1]&&W[X+1]==="="||T==="-"||/[A-Za-z]/.test(W[X])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(T)||W[X+1]&&W[X+1].match(/\W/))break}return Z}function o(J){return B["unknown-options-as-args"]&&z0(J)}function z0(J){if(J=J.replace(/^-{3,}/,"--"),J.match(b))return!1;if(_(J))return!1;return!Zf(J,/^-+([^=]+?)=[\s\S]*$/,u,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}function c(J){if(!C(J,E.bools)&&!C(J,E.counts)&&`${J}`in U)return U[J];else return B0(a(J))}function B0(J){return{[N0.BOOLEAN]:!0,[N0.STRING]:"",[N0.NUMBER]:void 0,[N0.ARRAY]:[]}[J]}function a(J){let Z=N0.BOOLEAN;if(C(J,E.strings))Z=N0.STRING;else if(C(J,E.numbers))Z=N0.NUMBER;else if(C(J,E.bools))Z=N0.BOOLEAN;else if(C(J,E.arrays))Z=N0.ARRAY;return Z}function G0(J){return J===void 0}function _$(){Object.keys(E.counts).find((J)=>{if(C(J,E.arrays))return m=Error(q("Invalid configuration: %s, opts.count excludes opts.array.",J)),!0;else if(C(J,E.nargs))return m=Error(q("Invalid configuration: %s, opts.count excludes opts.narg.",J)),!0;return!1})}return{aliases:Object.assign({},E.aliases),argv:Object.assign(s0,A),configuration:B,defaulted:Object.assign({},j),error:m,newAliases:Object.assign({},L)}}}function ch($){let f=[],h=Object.create(null),z=!0;Object.keys($).forEach(function(G){f.push([].concat($[G],G))});while(z){z=!1;for(let G=0;G<f.length;G++)for(let O=G+1;O<f.length;O++)if(f[G].filter(function(U){return f[O].indexOf(U)!==-1}).length){f[G]=f[G].concat(f[O]),f.splice(O,1),z=!0;break}}return f.forEach(function(G){G=G.filter(function(B,U,I){return I.indexOf(B)===U});let O=G.pop();if(O!==void 0&&typeof O==="string")h[O]=G}),h}function t$($){return $!==void 0?$+1:1}function Tf($){if($==="__proto__")return"___proto___";return $}function mh($){return typeof $==="string"&&($[0]==="'"||$[0]==='"')&&$[$.length-1]===$[0]?$.substring(1,$.length-1):$}var A$,c$,m$,jf=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,Vf=(c$=(A$=process===null||process===void 0?void 0:process.versions)===null||A$===void 0?void 0:A$.node)!==null&&c$!==void 0?c$:(m$=process===null||process===void 0?void 0:process.version)===null||m$===void 0?void 0:m$.slice(1);if(Vf){if(Number(Vf.match(/^([^.]+)/)[1])<jf)throw Error(`yargs parser supports a minimum Node.js version of ${jf}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`)}var oh=process?process.env:{},Yf=new u$({cwd:process.cwd,env:()=>{return oh},format:ph,normalize:ih,resolve:dh,require:($)=>{return F0($)}}),J$=function(f,h){return Yf.parse(f.slice(),h).argv};J$.detailed=function($,f){return Yf.parse($.slice(),f)};J$.camelCase=u0;J$.decamelize=L$;J$.looksLikeNumber=U$;var p$=J$;import{basename as G1,dirname as M1,extname as O1,relative as B1,resolve as Df}from"path";function Hf(){if(vh())return 0;return 1}function vh(){return gh()&&!process.defaultApp}function gh(){return!!process.versions.electron}function i$($){return $.slice(Hf()+1)}function Pf(){return process.argv[Hf()]}class g extends Error{constructor($){super($||"yargs error");if(this.name="YError",Error.captureStackTrace)Error.captureStackTrace(this,g)}}import{readFileSync as kh,statSync as lh,writeFile as yh}from"fs";import{format as sh}from"util";import{resolve as rh}from"path";var Sf={fs:{readFileSync:kh,writeFile:yh},format:sh,resolve:rh,exists:($)=>{try{return lh($).isFile()}catch(f){return!1}}};var Y0;class Kf{constructor($){$=$||{},this.directory=$.directory||"./locales",this.updateFiles=typeof $.updateFiles==="boolean"?$.updateFiles:!0,this.locale=$.locale||"en",this.fallbackToLanguage=typeof $.fallbackToLanguage==="boolean"?$.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...$){if(typeof arguments[0]!=="string")return this._taggedLiteral(arguments[0],...arguments);let f=$.shift(),h=function(){};if(typeof $[$.length-1]==="function")h=$.pop();if(h=h||function(){},!this.cache[this.locale])this._readLocaleFile();if(!this.cache[this.locale][f]&&this.updateFiles)this.cache[this.locale][f]=f,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:h});else h();return Y0.format.apply(Y0.format,[this.cache[this.locale][f]||f].concat($))}__n(){let $=Array.prototype.slice.call(arguments),f=$.shift(),h=$.shift(),z=$.shift(),G=function(){};if(typeof $[$.length-1]==="function")G=$.pop();if(!this.cache[this.locale])this._readLocaleFile();let O=z===1?f:h;if(this.cache[this.locale][f])O=this.cache[this.locale][f][z===1?"one":"other"];if(!this.cache[this.locale][f]&&this.updateFiles)this.cache[this.locale][f]={one:f,other:h},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:G});else G();let B=[O];if(~O.indexOf("%d"))B.push(z);return Y0.format.apply(Y0.format,B.concat($))}setLocale($){this.locale=$}getLocale(){return this.locale}updateLocale($){if(!this.cache[this.locale])this._readLocaleFile();for(let f in $)if(Object.prototype.hasOwnProperty.call($,f))this.cache[this.locale][f]=$[f]}_taggedLiteral($,...f){let h="";return $.forEach(function(z,G){let O=f[G+1];if(h+=z,typeof O<"u")h+="%s"}),this.__.apply(this,[h].concat([].slice.call(f,1)))}_enqueueWrite($){if(this.writeQueue.push($),this.writeQueue.length===1)this._processWriteQueue()}_processWriteQueue(){let $=this,f=this.writeQueue[0],h=f.directory,z=f.locale,G=f.cb,O=this._resolveLocaleFile(h,z),B=JSON.stringify(this.cache[z],null,2);Y0.fs.writeFile(O,B,"utf-8",function(U){if($.writeQueue.shift(),$.writeQueue.length>0)$._processWriteQueue();G(U)})}_readLocaleFile(){let $={},f=this._resolveLocaleFile(this.directory,this.locale);try{if(Y0.fs.readFileSync)$=JSON.parse(Y0.fs.readFileSync(f,"utf-8"))}catch(h){if(h instanceof SyntaxError)h.message="syntax error in "+f;if(h.code==="ENOENT")$={};else throw h}this.cache[this.locale]=$}_resolveLocaleFile($,f){let h=Y0.resolve($,"./",f+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(h)&&~f.lastIndexOf("_")){let z=Y0.resolve($,"./",f.split("_")[0]+".json");if(this._fileExistsSync(z))h=z}return h}_fileExistsSync($){return Y0.exists($)}}function Rf($,f){Y0=f;let h=new Kf($);return{__:h.__.bind(h),__n:h.__n.bind(h),setLocale:h.setLocale.bind(h),getLocale:h.getLocale.bind(h),updateLocale:h.updateLocale.bind(h),locale:h.locale}}var ah=($)=>{return Rf($,Sf)},wf=ah;var J1="require is not supported by ESM",Ff="loading a directory of commands is not supported yet for ESM",X$;try{X$=z1(import.meta.url)}catch($){X$=process.cwd()}var X1=X$.substring(0,X$.lastIndexOf("node_modules")),d$={assert:{notStrictEqual:eh,strictEqual:$1},cliui:n$,findUp:b$,getEnv:($)=>{return process.env[$]},inspect:f1,getCallerFile:()=>{throw new g(Ff)},getProcessArgvBin:Pf,mainFilename:X1||process.cwd(),Parser:p$,path:{basename:G1,dirname:M1,extname:O1,relative:B1,resolve:Df},process:{argv:()=>process.argv,cwd:process.cwd,emitWarning:($,f)=>process.emitWarning($,f),execPath:()=>process.execPath,exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns<"u"?process.stdout.columns:null},readFileSync:h1,require:()=>{throw new g(J1)},requireDirectory:()=>{throw new g(Ff)},stringWidth:($)=>{return[...$].length},y18n:wf({directory:Df(X$,"../../../locales"),updateFiles:!1})};function X0($,f,h,z){h.assert.notStrictEqual($,f,z)}function o$($,f){f.assert.strictEqual(typeof $,"string")}function e0($){return Object.keys($)}function k($){return!!$&&!!$.then&&typeof $.then==="function"}function C0($){let h=$.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),z=/\.*[\][<>]/g,G=h.shift();if(!G)throw Error(`No command found in: ${$}`);let O={cmd:G.replace(z,""),demanded:[],optional:[]};return h.forEach((B,U)=>{let I=!1;if(B=B.replace(/\s/g,""),/\.+[\]>]/.test(B)&&U===h.length-1)I=!0;if(/^\[/.test(B))O.optional.push({cmd:B.replace(z,"").split("|"),variadic:I});else O.demanded.push({cmd:B.replace(z,"").split("|"),variadic:I})}),O}var Z1=["first","second","third","fourth","fifth","sixth"];function P($,f,h){function z(){return typeof $==="object"?[{demanded:[],optional:[]},$,f]:[C0(`cmd ${$}`),f,h]}try{let G=0,[O,B,U]=z(),I=[].slice.call(B);while(I.length&&I[I.length-1]===void 0)I.pop();let N=U||I.length;if(N<O.demanded.length)throw new g(`Not enough arguments provided. Expected ${O.demanded.length} but received ${I.length}.`);let V=O.demanded.length+O.optional.length;if(N>V)throw new g(`Too many arguments provided. Expected max ${V} but received ${N}.`);O.demanded.forEach((Q)=>{let L=I.shift(),j=Cf(L);if(Q.cmd.filter((E)=>E===j||E==="*").length===0)_f(j,Q.cmd,G);G+=1}),O.optional.forEach((Q)=>{if(I.length===0)return;let L=I.shift(),j=Cf(L);if(Q.cmd.filter((E)=>E===j||E==="*").length===0)_f(j,Q.cmd,G);G+=1})}catch(G){console.warn(G.stack)}}function Cf($){if(Array.isArray($))return"array";else if($===null)return"null";return typeof $}function _f($,f,h){throw new g(`Invalid ${Z1[h]||"manyith"} argument. Expected ${f.join(" or ")} but received ${$}.`)}class v${constructor($){this.globalMiddleware=[],this.frozens=[],this.yargs=$}addMiddleware($,f,h=!0,z=!1){if(P("<array|function> [boolean] [boolean] [boolean]",[$,f,h],arguments.length),Array.isArray($)){for(let G=0;G<$.length;G++){if(typeof $[G]!=="function")throw Error("middleware must be a function");let O=$[G];O.applyBeforeValidation=f,O.global=h}Array.prototype.push.apply(this.globalMiddleware,$)}else if(typeof $==="function"){let G=$;G.applyBeforeValidation=f,G.global=h,G.mutates=z,this.globalMiddleware.push($)}return this.yargs}addCoerceMiddleware($,f){let h=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter((z)=>{let G=[...h[f]||[],f];if(!z.option)return!0;else return!G.includes(z.option)}),$.option=f,this.addMiddleware($,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let $=this.frozens.pop();if($!==void 0)this.globalMiddleware=$}reset(){this.globalMiddleware=this.globalMiddleware.filter(($)=>$.global)}}function xf($){if(!$)return[];return $.map((f)=>{return f.applyBeforeValidation=!1,f})}function A0($,f,h,z){return h.reduce((G,O)=>{if(O.applyBeforeValidation!==z)return G;if(O.mutates){if(O.applied)return G;O.applied=!0}if(k(G))return G.then((B)=>Promise.all([B,O(B,f)])).then(([B,U])=>Object.assign(B,U));else{let B=O(G,f);return k(B)?B.then((U)=>Object.assign(G,U)):Object.assign(G,B)}},$)}function c0($,f,h=(z)=>{throw z}){try{let z=E1($)?$():$;return k(z)?z.then((G)=>f(G)):f(z)}catch(z){return h(z)}}function E1($){return typeof $==="function"}function g$($){for(let f=0,h=Object.keys(F0.cache),z;f<h.length;f++)if(z=F0.cache[h[f]],z.exports===$)return z;return null}var $$=/(^\*)|(^\$0)/;class bf{constructor($,f,h,z){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=z,this.usage=$,this.globalMiddleware=h,this.validation=f}addDirectory($,f,h,z){if(z=z||{},typeof z.recurse!=="boolean")z.recurse=!1;if(!Array.isArray(z.extensions))z.extensions=["js"];let G=typeof z.visit==="function"?z.visit:(O)=>O;z.visit=(O,B,U)=>{let I=G(O,B,U);if(I){if(this.requireCache.has(B))return I;else this.requireCache.add(B);this.addHandler(I)}return I},this.shim.requireDirectory({require:f,filename:h},$,z)}addHandler($,f,h,z,G,O){let B=[],U=xf(G);if(z=z||(()=>{}),Array.isArray($))if(I1($))[$,...B]=$;else for(let I of $)this.addHandler(I);else if(W1($)){let I=Array.isArray($.command)||typeof $.command==="string"?$.command:this.moduleName($);if($.aliases)I=[].concat(I).concat($.aliases);this.addHandler(I,this.extractDesc($),$.builder,$.handler,$.middlewares,$.deprecated);return}else if(nf(h)){this.addHandler([$].concat(B),f,h.builder,h.handler,h.middlewares,h.deprecated);return}if(typeof $==="string"){let I=C0($);B=B.map((Q)=>C0(Q).cmd);let N=!1,V=[I.cmd].concat(B).filter((Q)=>{if($$.test(Q))return N=!0,!1;return!0});if(V.length===0&&N)V.push("$0");if(N)I.cmd=V[0],B=V.slice(1),$=$.replace($$,I.cmd);if(B.forEach((Q)=>{this.aliasMap[Q]=I.cmd}),f!==!1)this.usage.command($,f,N,B,O);if(this.handlers[I.cmd]={original:$,description:f,handler:z,builder:h||{},middlewares:U,deprecated:O,demanded:I.demanded,optional:I.optional},N)this.defaultCommand=this.handlers[I.cmd]}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand($,f,h,z,G,O){let B=this.handlers[$]||this.handlers[this.aliasMap[$]]||this.defaultCommand,U=f.getInternalMethods().getContext(),I=U.commands.slice(),N=!$;if($)U.commands.push($),U.fullCommands.push(B.original);let V=this.applyBuilderUpdateUsageAndParse(N,B,f,h.aliases,I,z,G,O);return k(V)?V.then((Q)=>this.applyMiddlewareAndGetResult(N,B,Q.innerArgv,U,G,Q.aliases,f)):this.applyMiddlewareAndGetResult(N,B,V.innerArgv,U,G,V.aliases,f)}applyBuilderUpdateUsageAndParse($,f,h,z,G,O,B,U){let I=f.builder,N=h;if(q$(I)){h.getInternalMethods().getUsageInstance().freeze();let V=I(h.getInternalMethods().reset(z),U);if(k(V))return V.then((Q)=>{return N=uf(Q)?Q:h,this.parseAndUpdateUsage($,f,N,G,O,B)})}else if(Q1(I))h.getInternalMethods().getUsageInstance().freeze(),N=h.getInternalMethods().reset(z),Object.keys(f.builder).forEach((V)=>{N.option(V,I[V])});return this.parseAndUpdateUsage($,f,N,G,O,B)}parseAndUpdateUsage($,f,h,z,G,O){if($)h.getInternalMethods().getUsageInstance().unfreeze(!0);if(this.shouldUpdateUsage(h))h.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(z,f),f.description);let B=h.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,G,O);return k(B)?B.then((U)=>({aliases:h.parsed.aliases,innerArgv:U})):{aliases:h.parsed.aliases,innerArgv:B}}shouldUpdateUsage($){return!$.getInternalMethods().getUsageInstance().getUsageDisabled()&&$.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler($,f){let h=$$.test(f.original)?f.original.replace($$,"").trim():f.original,z=$.filter((G)=>{return!$$.test(G)});return z.push(h),`$0 ${z.join(" ")}`}handleValidationAndGetResult($,f,h,z,G,O,B,U){if(!O.getInternalMethods().getHasOutput()){let I=O.getInternalMethods().runValidation(G,U,O.parsed.error,$);h=c0(h,(N)=>{return I(N),N})}if(f.handler&&!O.getInternalMethods().getHasOutput()){O.getInternalMethods().setHasOutput();let I=!!O.getOptions().configuration["populate--"];if(O.getInternalMethods().postProcess(h,I,!1,!1),h=A0(h,O,B,!1),h=c0(h,(N)=>{let V=f.handler(N);return k(V)?V.then(()=>N):N}),!$)O.getInternalMethods().getUsageInstance().cacheHelpMessage();if(k(h)&&!O.getInternalMethods().hasParseCallback())h.catch((N)=>{try{O.getInternalMethods().getUsageInstance().fail(null,N)}catch(V){}})}if(!$)z.commands.pop(),z.fullCommands.pop();return h}applyMiddlewareAndGetResult($,f,h,z,G,O,B){let U={};if(G)return h;if(!B.getInternalMethods().getHasOutput())U=this.populatePositionals(f,h,z,B);let I=this.globalMiddleware.getMiddleware().slice(0).concat(f.middlewares),N=A0(h,B,I,!0);return k(N)?N.then((V)=>this.handleValidationAndGetResult($,f,V,z,O,B,I,U)):this.handleValidationAndGetResult($,f,N,z,O,B,I,U)}populatePositionals($,f,h,z){f._=f._.slice(h.commands.length);let G=$.demanded.slice(0),O=$.optional.slice(0),B={};this.validation.positionalCount(G.length,f._.length);while(G.length){let U=G.shift();this.populatePositional(U,f,B)}while(O.length){let U=O.shift();this.populatePositional(U,f,B)}return f._=h.commands.concat(f._.map((U)=>""+U)),this.postProcessPositionals(f,B,this.cmdToParseOptions($.original),z),B}populatePositional($,f,h){let z=$.cmd[0];if($.variadic)h[z]=f._.splice(0).map(String);else if(f._.length)h[z]=[String(f._.shift())]}cmdToParseOptions($){let f={array:[],default:{},alias:{},demand:{}},h=C0($);return h.demanded.forEach((z)=>{let[G,...O]=z.cmd;if(z.variadic)f.array.push(G),f.default[G]=[];f.alias[G]=O,f.demand[G]=!0}),h.optional.forEach((z)=>{let[G,...O]=z.cmd;if(z.variadic)f.array.push(G),f.default[G]=[];f.alias[G]=O}),f}postProcessPositionals($,f,h,z){let G=Object.assign({},z.getOptions());G.default=Object.assign(h.default,G.default);for(let I of Object.keys(h.alias))G.alias[I]=(G.alias[I]||[]).concat(h.alias[I]);G.array=G.array.concat(h.array),G.config={};let O=[];if(Object.keys(f).forEach((I)=>{f[I].map((N)=>{if(G.configuration["unknown-options-as-args"])G.key[I]=!0;O.push(`--${I}`),O.push(N)})}),!O.length)return;let B=Object.assign({},G.configuration,{"populate--":!1}),U=this.shim.Parser.detailed(O,Object.assign({},G,{configuration:B}));if(U.error)z.getInternalMethods().getUsageInstance().fail(U.error.message,U.error);else{let I=Object.keys(f);Object.keys(f).forEach((N)=>{I.push(...U.aliases[N])}),Object.keys(U.argv).forEach((N)=>{if(I.includes(N)){if(!f[N])f[N]=U.argv[N];if(!this.isInConfigs(z,N)&&!this.isDefaulted(z,N)&&Object.prototype.hasOwnProperty.call($,N)&&Object.prototype.hasOwnProperty.call(U.argv,N)&&(Array.isArray($[N])||Array.isArray(U.argv[N])))$[N]=[].concat($[N],U.argv[N]);else $[N]=U.argv[N]}})}}isDefaulted($,f){let{default:h}=$.getOptions();return Object.prototype.hasOwnProperty.call(h,f)||Object.prototype.hasOwnProperty.call(h,this.shim.Parser.camelCase(f))}isInConfigs($,f){let{configObjects:h}=$.getOptions();return h.some((z)=>Object.prototype.hasOwnProperty.call(z,f))||h.some((z)=>Object.prototype.hasOwnProperty.call(z,this.shim.Parser.camelCase(f)))}runDefaultBuilderOn($){if(!this.defaultCommand)return;if(this.shouldUpdateUsage($)){let h=$$.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");$.getInternalMethods().getUsageInstance().usage(h,this.defaultCommand.description)}let f=this.defaultCommand.builder;if(q$(f))return f($,!0);else if(!nf(f))Object.keys(f).forEach((h)=>{$.option(h,f[h])});return}moduleName($){let f=g$($);if(!f)throw Error(`No command name given for module: ${this.shim.inspect($)}`);return this.commandFromFilename(f.filename)}commandFromFilename($){return this.shim.path.basename($,this.shim.path.extname($))}extractDesc({describe:$,description:f,desc:h}){for(let z of[$,f,h]){if(typeof z==="string"||z===!1)return z;X0(z,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let $=this.frozens.pop();X0($,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=$}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}}function tf($,f,h,z){return new bf($,f,h,z)}function nf($){return typeof $==="object"&&!!$.builder&&typeof $.handler==="function"}function I1($){return $.every((f)=>typeof f==="string")}function q$($){return typeof $==="function"}function Q1($){return typeof $==="object"}function W1($){return typeof $==="object"&&!Array.isArray($)}function _0($={},f=()=>!0){let h={};return e0($).forEach((z)=>{if(f(z,$[z]))h[z]=$[z]}),h}function x0($){if(typeof process>"u")return;[process.stdout,process.stderr].forEach((f)=>{let h=f;if(h._handle&&h.isTTY&&typeof h._handle.setBlocking==="function")h._handle.setBlocking($)})}function N1($){return typeof $==="boolean"}function cf($,f){let h=f.y18n.__,z={},G=[];z.failFn=function(Y){G.push(Y)};let O=null,B=null,U=!0;z.showHelpOnFail=function(Y=!0,w){let[n,i]=typeof Y==="string"?[!0,Y]:[Y,w];if($.getInternalMethods().isGlobalContext())B=i;return O=i,U=n,z};let I=!1;z.fail=function(Y,w){let n=$.getInternalMethods().getLoggerInstance();if(G.length)for(let i=G.length-1;i>=0;--i){let f0=G[i];if(N1(f0)){if(w)throw w;else if(Y)throw Error(Y)}else f0(Y,w,z)}else{if($.getExitProcess())x0(!0);if(!I){if(I=!0,U)$.showHelp("error"),n.error();if(Y||w)n.error(Y||w);let i=O||B;if(i){if(Y||w)n.error("");n.error(i)}}if(w=w||new g(Y),$.getExitProcess())return $.exit(1);else if($.getInternalMethods().hasParseCallback())return $.exit(1,w);else throw w}};let N=[],V=!1;z.usage=(R,Y)=>{if(R===null)return V=!0,N=[],z;return V=!1,N.push([R,Y||""]),z},z.getUsage=()=>{return N},z.getUsageDisabled=()=>{return V},z.getPositionalGroupName=()=>{return h("Positionals:")};let Q=[];z.example=(R,Y)=>{Q.push([R,Y||""])};let L=[];z.command=function(Y,w,n,i,f0=!1){if(n)L=L.map((p)=>{return p[2]=!1,p});L.push([Y,w||"",n,i,f0])},z.getCommands=()=>L;let j={};z.describe=function(Y,w){if(Array.isArray(Y))Y.forEach((n)=>{z.describe(n,w)});else if(typeof Y==="object")Object.keys(Y).forEach((n)=>{z.describe(n,Y[n])});else j[Y]=w},z.getDescriptions=()=>j;let q=[];z.epilog=(R)=>{q.push(R)};let E=!1,b;z.wrap=(R)=>{E=!0,b=R},z.getWrap=()=>{if(f.getEnv("YARGS_DISABLE_WRAP"))return null;if(!E)b=r0(),E=!0;return b};let u="__yargsString__:";z.deferY18nLookup=(R)=>u+R,z.help=function(){if(A)return A;$0();let Y=$.customScriptName?$.$0:f.path.basename($.$0),w=$.getDemandedOptions(),n=$.getDemandedCommands(),i=$.getDeprecatedOptions(),f0=$.getGroups(),p=$.getOptions(),h0=[];h0=h0.concat(Object.keys(j)),h0=h0.concat(Object.keys(w)),h0=h0.concat(Object.keys(n)),h0=h0.concat(Object.keys(p.default)),h0=h0.filter(K0),h0=Object.keys(h0.reduce((_,o)=>{if(o!=="_")_[o]=!0;return _},{}));let D0=z.getWrap(),v=f.cliui({width:D0,wrap:!!D0});if(!V){if(N.length)N.forEach((_)=>{if(v.div({text:`${_[0].replace(/\$0/g,Y)}`}),_[1])v.div({text:`${_[1]}`,padding:[1,0,0,0]})}),v.div();else if(L.length){let _=null;if(n._)_=`${Y} <${h("command")}>
`;else _=`${Y} [${h("command")}]
`;v.div(`${_}`)}}if(L.length>1||L.length===1&&!L[0][2]){v.div(h("Commands:"));let _=$.getInternalMethods().getContext(),o=_.commands.length?`${_.commands.join(" ")} `:"";if($.getInternalMethods().getParserConfiguration()["sort-commands"]===!0)L=L.sort((c,B0)=>c[0].localeCompare(B0[0]));let z0=Y?`${Y} `:"";L.forEach((c)=>{let B0=`${z0}${o}${c[0].replace(/^\$0 ?/,"")}`;v.span({text:B0,padding:[0,2,0,2],width:m(L,D0,`${Y}${o}`)+4},{text:c[1]});let a=[];if(c[2])a.push(`[${h("default")}]`);if(c[3]&&c[3].length)a.push(`[${h("aliases:")} ${c[3].join(", ")}]`);if(c[4])if(typeof c[4]==="string")a.push(`[${h("deprecated: %s",c[4])}]`);else a.push(`[${h("deprecated")}]`);if(a.length)v.div({text:a.join(" "),padding:[0,0,0,2],align:"right"});else v.div()}),v.div()}let R0=(Object.keys(p.alias)||[]).concat(Object.keys($.parsed.newAliases)||[]);h0=h0.filter((_)=>!$.parsed.newAliases[_]&&R0.every((o)=>(p.alias[o]||[]).indexOf(_)===-1));let B$=h("Options:");if(!f0[B$])f0[B$]=[];s0(h0,p.alias,f0,B$);let C=(_)=>/^--/.test(T$(_)),a0=Object.keys(f0).filter((_)=>f0[_].length>0).map((_)=>{let o=f0[_].filter(K0).map((z0)=>{if(R0.includes(z0))return z0;for(let c=0,B0;(B0=R0[c])!==void 0;c++)if((p.alias[B0]||[]).includes(z0))return B0;return z0});return{groupName:_,normalizedKeys:o}}).filter(({normalizedKeys:_})=>_.length>0).map(({groupName:_,normalizedKeys:o})=>{let z0=o.reduce((c,B0)=>{return c[B0]=[B0].concat(p.alias[B0]||[]).map((a)=>{if(_===z.getPositionalGroupName())return a;else return(/^[0-9]$/.test(a)?p.boolean.includes(B0)?"-":"--":a.length>1?"--":"-")+a}).sort((a,G0)=>C(a)===C(G0)?0:C(a)?1:-1).join(", "),c},{});return{groupName:_,normalizedKeys:o,switches:z0}});if(a0.filter(({groupName:_})=>_!==z.getPositionalGroupName()).some(({normalizedKeys:_,switches:o})=>!_.every((z0)=>C(o[z0]))))a0.filter(({groupName:_})=>_!==z.getPositionalGroupName()).forEach(({normalizedKeys:_,switches:o})=>{_.forEach((z0)=>{if(C(o[z0]))o[z0]=L1(o[z0],4)})});if(a0.forEach(({groupName:_,normalizedKeys:o,switches:z0})=>{v.div(_),o.forEach((c)=>{let B0=z0[c],a=j[c]||"",G0=null;if(a.includes(u))a=h(a.substring(u.length));if(p.boolean.includes(c))G0=`[${h("boolean")}]`;if(p.count.includes(c))G0=`[${h("count")}]`;if(p.string.includes(c))G0=`[${h("string")}]`;if(p.normalize.includes(c))G0=`[${h("string")}]`;if(p.array.includes(c))G0=`[${h("array")}]`;if(p.number.includes(c))G0=`[${h("number")}]`;let _$=(T)=>typeof T==="string"?`[${h("deprecated: %s",T)}]`:`[${h("deprecated")}]`,J=[c in i?_$(i[c]):null,G0,c in w?`[${h("required")}]`:null,p.choices&&p.choices[c]?`[${h("choices:")} ${z.stringifiedValues(p.choices[c])}]`:null,W0(p.default[c],p.defaultDescription[c])].filter(Boolean).join(" ");v.span({text:T$(B0),padding:[0,2,0,2+Af(B0)],width:m(z0,D0)+4},a);let Z=$.getInternalMethods().getUsageConfiguration()["hide-types"]===!0;if(J&&!Z)v.div({text:J,padding:[0,0,0,2],align:"right"});else v.div()}),v.div()}),Q.length)v.div(h("Examples:")),Q.forEach((_)=>{_[0]=_[0].replace(/\$0/g,Y)}),Q.forEach((_)=>{if(_[1]==="")v.div({text:_[0],padding:[0,2,0,2]});else v.div({text:_[0],padding:[0,2,0,2],width:m(Q,D0)+4},{text:_[1]})}),v.div();if(q.length>0){let _=q.map((o)=>o.replace(/\$0/g,Y)).join(`
`);v.div(`${_}
`)}return v.toString().replace(/\s*$/,"")};function m(R,Y,w){let n=0;if(!Array.isArray(R))R=Object.values(R).map((i)=>[i]);if(R.forEach((i)=>{n=Math.max(f.stringWidth(w?`${w} ${T$(i[0])}`:T$(i[0]))+Af(i[0]),n)}),Y)n=Math.min(n,parseInt((Y*0.5).toString(),10));return n}function $0(){let R=$.getDemandedOptions(),Y=$.getOptions();(Object.keys(Y.alias)||[]).forEach((w)=>{Y.alias[w].forEach((n)=>{if(j[n])z.describe(w,j[n]);if(n in R)$.demandOption(w,R[n]);if(Y.boolean.includes(n))$.boolean(w);if(Y.count.includes(n))$.count(w);if(Y.string.includes(n))$.string(w);if(Y.normalize.includes(n))$.normalize(w);if(Y.array.includes(n))$.array(w);if(Y.number.includes(n))$.number(w)})})}let A;z.cacheHelpMessage=function(){A=this.help()},z.clearCachedHelpMessage=function(){A=void 0},z.hasCachedHelpMessage=function(){return!!A};function s0(R,Y,w,n){let i=[],f0=null;return Object.keys(w).forEach((p)=>{i=i.concat(w[p])}),R.forEach((p)=>{if(f0=[p].concat(Y[p]),!f0.some((h0)=>i.indexOf(h0)!==-1))w[n].push(p)}),i}function K0(R){return $.getOptions().hiddenOptions.indexOf(R)<0||$.parsed.argv[$.getOptions().showHiddenOpt]}z.showHelp=(R)=>{let Y=$.getInternalMethods().getLoggerInstance();if(!R)R="error";(typeof R==="function"?R:Y[R])(z.help())},z.functionDescription=(R)=>{return["(",R.name?f.Parser.decamelize(R.name,"-"):h("generated-value"),")"].join("")},z.stringifiedValues=function(Y,w){let n="",i=w||", ",f0=[].concat(Y);if(!Y||!f0.length)return n;return f0.forEach((p)=>{if(n.length)n+=i;n+=JSON.stringify(p)}),n};function W0(R,Y){let w=`[${h("default:")} `;if(R===void 0&&!Y)return null;if(Y)w+=Y;else switch(typeof R){case"string":w+=`"${R}"`;break;case"object":w+=JSON.stringify(R);break;default:w+=R}return`${w}]`}function r0(){if(f.process.stdColumns)return Math.min(80,f.process.stdColumns);else return 80}let d=null;z.version=(R)=>{d=R},z.showVersion=(R)=>{let Y=$.getInternalMethods().getLoggerInstance();if(!R)R="error";(typeof R==="function"?R:Y[R])(d)},z.reset=function(Y){return O=null,I=!1,N=[],V=!1,q=[],Q=[],L=[],j=_0(j,(w)=>!Y[w]),z};let O$=[];return z.freeze=function(){O$.push({failMessage:O,failureOutput:I,usages:N,usageDisabled:V,epilogs:q,examples:Q,commands:L,descriptions:j})},z.unfreeze=function(Y=!1){let w=O$.pop();if(!w)return;if(Y)j={...w.descriptions,...j},L=[...w.commands,...L],N=[...w.usages,...N],Q=[...w.examples,...Q],q=[...w.epilogs,...q];else({failMessage:O,failureOutput:I,usages:N,usageDisabled:V,epilogs:q,examples:Q,commands:L,descriptions:j}=w)},z}function k$($){return typeof $==="object"}function L1($,f){return k$($)?{text:$.text,indentation:$.indentation+f}:{text:$,indentation:f}}function Af($){return k$($)?$.indentation:0}function T$($){return k$($)?$.text:$}var mf=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,pf=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;class df{constructor($,f,h,z){var G,O,B;this.yargs=$,this.usage=f,this.command=h,this.shim=z,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=(B=((G=this.shim.getEnv("SHELL"))===null||G===void 0?void 0:G.includes("zsh"))||((O=this.shim.getEnv("ZSH_NAME"))===null||O===void 0?void 0:O.includes("zsh")))!==null&&B!==void 0?B:!1}defaultCompletion($,f,h,z){let G=this.command.getCommandHandlers();for(let B=0,U=$.length;B<U;++B)if(G[$[B]]&&G[$[B]].builder){let I=G[$[B]].builder;if(q$(I)){this.indexAfterLastReset=B+1;let N=this.yargs.getInternalMethods().reset();return I(N,!0),N.argv}}let O=[];this.commandCompletions(O,$,h),this.optionCompletions(O,$,f,h),this.choicesFromOptionsCompletions(O,$,f,h),this.choicesFromPositionalsCompletions(O,$,f,h),z(null,O)}commandCompletions($,f,h){let z=this.yargs.getInternalMethods().getContext().commands;if(!h.match(/^-/)&&z[z.length-1]!==h&&!this.previousArgHasChoices(f))this.usage.getCommands().forEach((G)=>{let O=C0(G[0]).cmd;if(f.indexOf(O)===-1)if(!this.zshShell)$.push(O);else{let B=G[1]||"";$.push(O.replace(/:/g,"\\:")+":"+B)}})}optionCompletions($,f,h,z){if((z.match(/^-/)||z===""&&$.length===0)&&!this.previousArgHasChoices(f)){let G=this.yargs.getOptions(),O=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(G.key).forEach((B)=>{let U=!!G.configuration["boolean-negation"]&&G.boolean.includes(B);if(!O.includes(B)&&!G.hiddenOptions.includes(B)&&!this.argsContainKey(f,B,U))this.completeOptionKey(B,$,z,U&&!!G.default[B])})}}choicesFromOptionsCompletions($,f,h,z){if(this.previousArgHasChoices(f)){let G=this.getPreviousArgChoices(f);if(G&&G.length>0)$.push(...G.map((O)=>O.replace(/:/g,"\\:")))}}choicesFromPositionalsCompletions($,f,h,z){if(z===""&&$.length>0&&this.previousArgHasChoices(f))return;let G=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],O=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),B=G[h._.length-O-1];if(!B)return;let U=this.yargs.getOptions().choices[B]||[];for(let I of U)if(I.startsWith(z))$.push(I.replace(/:/g,"\\:"))}getPreviousArgChoices($){if($.length<1)return;let f=$[$.length-1],h="";if(!f.startsWith("-")&&$.length>1)h=f,f=$[$.length-2];if(!f.startsWith("-"))return;let z=f.replace(/^-+/,""),G=this.yargs.getOptions(),O=[z,...this.yargs.getAliases()[z]||[]],B;for(let U of O)if(Object.prototype.hasOwnProperty.call(G.key,U)&&Array.isArray(G.choices[U])){B=G.choices[U];break}if(B)return B.filter((U)=>!h||U.startsWith(h))}previousArgHasChoices($){let f=this.getPreviousArgChoices($);return f!==void 0&&f.length>0}argsContainKey($,f,h){let z=(G)=>$.indexOf((/^[^0-9]$/.test(G)?"-":"--")+G)!==-1;if(z(f))return!0;if(h&&z(`no-${f}`))return!0;if(this.aliases){for(let G of this.aliases[f])if(z(G))return!0}return!1}completeOptionKey($,f,h,z){var G,O,B,U;let I=$;if(this.zshShell){let L=this.usage.getDescriptions(),j=(O=(G=this===null||this===void 0?void 0:this.aliases)===null||G===void 0?void 0:G[$])===null||O===void 0?void 0:O.find((b)=>{let u=L[b];return typeof u==="string"&&u.length>0}),q=j?L[j]:void 0,E=(U=(B=L[$])!==null&&B!==void 0?B:q)!==null&&U!==void 0?U:"";I=`${$.replace(/:/g,"\\:")}:${E.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`}let N=(L)=>/^--/.test(L),V=(L)=>/^[^0-9]$/.test(L),Q=!N(h)&&V($)?"-":"--";if(f.push(Q+I),z)f.push(Q+"no-"+I)}customCompletion($,f,h,z){if(X0(this.customCompletionFunction,null,this.shim),q1(this.customCompletionFunction)){let G=this.customCompletionFunction(h,f);if(k(G))return G.then((O)=>{this.shim.process.nextTick(()=>{z(null,O)})}).catch((O)=>{this.shim.process.nextTick(()=>{z(O,void 0)})});return z(null,G)}else if(T1(this.customCompletionFunction))return this.customCompletionFunction(h,f,(G=z)=>this.defaultCompletion($,f,h,G),(G)=>{z(null,G)});else return this.customCompletionFunction(h,f,(G)=>{z(null,G)})}getCompletion($,f){let h=$.length?$[$.length-1]:"",z=this.yargs.parse($,!0),G=this.customCompletionFunction?(O)=>this.customCompletion($,O,h,f):(O)=>this.defaultCompletion($,O,h,f);return k(z)?z.then(G):G(z)}generateCompletionScript($,f){let h=this.zshShell?pf:mf,z=this.shim.path.basename($);if($.match(/\.js$/))$=`./${$}`;return h=h.replace(/{{app_name}}/g,z),h=h.replace(/{{completion_command}}/g,f),h.replace(/{{app_path}}/g,$)}registerFunction($){this.customCompletionFunction=$}setParsed($){this.aliases=$.aliases}}function of($,f,h,z){return new df($,f,h,z)}function q1($){return $.length<3}function T1($){return $.length>3}function vf($,f){if($.length===0)return f.length;if(f.length===0)return $.length;let h=[],z;for(z=0;z<=f.length;z++)h[z]=[z];let G;for(G=0;G<=$.length;G++)h[0][G]=G;for(z=1;z<=f.length;z++)for(G=1;G<=$.length;G++)if(f.charAt(z-1)===$.charAt(G-1))h[z][G]=h[z-1][G-1];else if(z>1&&G>1&&f.charAt(z-2)===$.charAt(G-1)&&f.charAt(z-1)===$.charAt(G-2))h[z][G]=h[z-2][G-2]+1;else h[z][G]=Math.min(h[z-1][G-1]+1,Math.min(h[z][G-1]+1,h[z-1][G]+1));return h[f.length][$.length]}var gf=["$0","--","_"];function kf($,f,h){let z=h.y18n.__,G=h.y18n.__n,O={};O.nonOptionCount=function(Q){let L=$.getDemandedCommands(),q=Q._.length+(Q["--"]?Q["--"].length:0)-$.getInternalMethods().getContext().commands.length;if(L._&&(q<L._.min||q>L._.max)){if(q<L._.min)if(L._.minMsg!==void 0)f.fail(L._.minMsg?L._.minMsg.replace(/\$0/g,q.toString()).replace(/\$1/,L._.min.toString()):null);else f.fail(G("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",q,q.toString(),L._.min.toString()));else if(q>L._.max)if(L._.maxMsg!==void 0)f.fail(L._.maxMsg?L._.maxMsg.replace(/\$0/g,q.toString()).replace(/\$1/,L._.max.toString()):null);else f.fail(G("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",q,q.toString(),L._.max.toString()))}},O.positionalCount=function(Q,L){if(L<Q)f.fail(G("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",L,L+"",Q+""))},O.requiredArguments=function(Q,L){let j=null;for(let q of Object.keys(L))if(!Object.prototype.hasOwnProperty.call(Q,q)||typeof Q[q]>"u")j=j||{},j[q]=L[q];if(j){let q=[];for(let b of Object.keys(j)){let u=j[b];if(u&&q.indexOf(u)<0)q.push(u)}let E=q.length?`
${q.join(`
`)}`:"";f.fail(G("Missing required argument: %s","Missing required arguments: %s",Object.keys(j).length,Object.keys(j).join(", ")+E))}},O.unknownArguments=function(Q,L,j,q,E=!0){var b;let u=$.getInternalMethods().getCommandInstance().getCommands(),m=[],$0=$.getInternalMethods().getContext();if(Object.keys(Q).forEach((A)=>{if(!gf.includes(A)&&!Object.prototype.hasOwnProperty.call(j,A)&&!Object.prototype.hasOwnProperty.call($.getInternalMethods().getParseContext(),A)&&!O.isValidAndSomeAliasIsNotNew(A,L))m.push(A)}),E&&($0.commands.length>0||u.length>0||q))Q._.slice($0.commands.length).forEach((A)=>{if(!u.includes(""+A))m.push(""+A)});if(E){let s0=((b=$.getDemandedCommands()._)===null||b===void 0?void 0:b.max)||0,K0=$0.commands.length+s0;if(K0<Q._.length)Q._.slice(K0).forEach((W0)=>{if(W0=String(W0),!$0.commands.includes(W0)&&!m.includes(W0))m.push(W0)})}if(m.length)f.fail(G("Unknown argument: %s","Unknown arguments: %s",m.length,m.map((A)=>A.trim()?A:`"${A}"`).join(", ")))},O.unknownCommands=function(Q){let L=$.getInternalMethods().getCommandInstance().getCommands(),j=[],q=$.getInternalMethods().getContext();if(q.commands.length>0||L.length>0)Q._.slice(q.commands.length).forEach((E)=>{if(!L.includes(""+E))j.push(""+E)});if(j.length>0)return f.fail(G("Unknown command: %s","Unknown commands: %s",j.length,j.join(", "))),!0;else return!1},O.isValidAndSomeAliasIsNotNew=function(Q,L){if(!Object.prototype.hasOwnProperty.call(L,Q))return!1;let j=$.parsed.newAliases;return[Q,...L[Q]].some((q)=>!Object.prototype.hasOwnProperty.call(j,q)||!j[Q])},O.limitedChoices=function(Q){let L=$.getOptions(),j={};if(!Object.keys(L.choices).length)return;Object.keys(Q).forEach((b)=>{if(gf.indexOf(b)===-1&&Object.prototype.hasOwnProperty.call(L.choices,b))[].concat(Q[b]).forEach((u)=>{if(L.choices[b].indexOf(u)===-1&&u!==void 0)j[b]=(j[b]||[]).concat(u)})});let q=Object.keys(j);if(!q.length)return;let E=z("Invalid values:");q.forEach((b)=>{E+=`
  ${z("Argument: %s, Given: %s, Choices: %s",b,f.stringifiedValues(j[b]),f.stringifiedValues(L.choices[b]))}`}),f.fail(E)};let B={};O.implies=function(Q,L){if(P("<string|object> [array|number|string]",[Q,L],arguments.length),typeof Q==="object")Object.keys(Q).forEach((j)=>{O.implies(j,Q[j])});else{if($.global(Q),!B[Q])B[Q]=[];if(Array.isArray(L))L.forEach((j)=>O.implies(Q,j));else X0(L,void 0,h),B[Q].push(L)}},O.getImplied=function(){return B};function U(V,Q){let L=Number(Q);if(Q=isNaN(L)?Q:L,typeof Q==="number")Q=V._.length>=Q;else if(Q.match(/^--no-.+/))Q=Q.match(/^--no-(.+)/)[1],Q=!Object.prototype.hasOwnProperty.call(V,Q);else Q=Object.prototype.hasOwnProperty.call(V,Q);return Q}O.implications=function(Q){let L=[];if(Object.keys(B).forEach((j)=>{let q=j;(B[j]||[]).forEach((E)=>{let b=q,u=E;if(b=U(Q,b),E=U(Q,E),b&&!E)L.push(` ${q} -> ${u}`)})}),L.length){let j=`${z("Implications failed:")}
`;L.forEach((q)=>{j+=q}),f.fail(j)}};let I={};O.conflicts=function(Q,L){if(P("<string|object> [array|string]",[Q,L],arguments.length),typeof Q==="object")Object.keys(Q).forEach((j)=>{O.conflicts(j,Q[j])});else{if($.global(Q),!I[Q])I[Q]=[];if(Array.isArray(L))L.forEach((j)=>O.conflicts(Q,j));else I[Q].push(L)}},O.getConflicting=()=>I,O.conflicting=function(Q){if(Object.keys(Q).forEach((L)=>{if(I[L])I[L].forEach((j)=>{if(j&&Q[L]!==void 0&&Q[j]!==void 0)f.fail(z("Arguments %s and %s are mutually exclusive",L,j))})}),$.getInternalMethods().getParserConfiguration()["strip-dashed"])Object.keys(I).forEach((L)=>{I[L].forEach((j)=>{if(j&&Q[h.Parser.camelCase(L)]!==void 0&&Q[h.Parser.camelCase(j)]!==void 0)f.fail(z("Arguments %s and %s are mutually exclusive",L,j))})})},O.recommendCommands=function(Q,L){L=L.sort((b,u)=>u.length-b.length);let q=null,E=1/0;for(let b=0,u;(u=L[b])!==void 0;b++){let m=vf(Q,u);if(m<=3&&m<E)E=m,q=u}if(q)f.fail(z("Did you mean %s?",q))},O.reset=function(Q){return B=_0(B,(L)=>!Q[L]),I=_0(I,(L)=>!Q[L]),O};let N=[];return O.freeze=function(){N.push({implied:B,conflicting:I})},O.unfreeze=function(){let Q=N.pop();X0(Q,void 0,h),{implied:B,conflicting:I}=Q},O}var l$=[],Z$;function E$($,f,h,z){Z$=z;let G={};if(Object.prototype.hasOwnProperty.call($,"extends")){if(typeof $.extends!=="string")return G;let O=/\.json|\..*rc$/.test($.extends),B=null;if(!O)try{B=F0.resolve($.extends)}catch(U){return $}else B=V1(f,$.extends);j1(B),l$.push(B),G=O?JSON.parse(Z$.readFileSync(B,"utf8")):F0($.extends),delete $.extends,G=E$(G,Z$.path.dirname(B),h,Z$)}return l$=[],h?lf(G,$):Object.assign({},G,$)}function j1($){if(l$.indexOf($)>-1)throw new g(`Circular extended configurations: '${$}'.`)}function V1($,f){return Z$.path.resolve($,f)}function lf($,f){let h={};function z(G){return G&&typeof G==="object"&&!Array.isArray(G)}Object.assign(h,$);for(let G of Object.keys(f))if(z(f[G])&&z(h[G]))h[G]=lf($[G],f[G]);else h[G]=f[G];return h}var S=function($,f,h,z,G){if(z==="m")throw TypeError("Private method is not writable");if(z==="a"&&!G)throw TypeError("Private accessor was defined without a setter");if(typeof f==="function"?$!==f||!G:!f.has($))throw TypeError("Cannot write private member to an object whose class did not declare it");return z==="a"?G.call($,h):G?G.value=h:f.set($,h),h},M=function($,f,h,z){if(h==="a"&&!z)throw TypeError("Private accessor was defined without a getter");if(typeof f==="function"?$!==f||!z:!f.has($))throw TypeError("Cannot read private member from an object whose class did not declare it");return h==="m"?z:h==="a"?z.call($):z?z.value:f.get($)},e,m0,I$,L0,E0,j$,n0,p0,V$,U0,Y$,q0,P0,I0,T0,H$,f$,O0,D,P$,S$,Q0,i0,h$,d0,b0,K$,x,o0,v0,g0,t,R$,S0,r;function Wh($){return(f=[],h=$.process.cwd(),z)=>{let G=new Nh(f,h,z,$);return Object.defineProperty(G,"argv",{get:()=>{return G.parse()},enumerable:!0}),G.help(),G.version(),G}}var yf=Symbol("copyDoubleDash"),sf=Symbol("copyDoubleDash"),y$=Symbol("deleteFromParserHintObject"),rf=Symbol("emitWarning"),af=Symbol("freeze"),ef=Symbol("getDollarZero"),k0=Symbol("getParserConfiguration"),$h=Symbol("getUsageConfiguration"),s$=Symbol("guessLocale"),fh=Symbol("guessVersion"),hh=Symbol("parsePositionalNumbers"),r$=Symbol("pkgUp"),t0=Symbol("populateParserHintArray"),z$=Symbol("populateParserHintSingleValueDictionary"),a$=Symbol("populateParserHintArrayDictionary"),e$=Symbol("populateParserHintDictionary"),$f=Symbol("sanitizeKey"),ff=Symbol("setKey"),hf=Symbol("unfreeze"),zh=Symbol("validateAsync"),Gh=Symbol("getCommandInstance"),Mh=Symbol("getContext"),Oh=Symbol("getHasOutput"),Bh=Symbol("getLoggerInstance"),Jh=Symbol("getParseContext"),Xh=Symbol("getUsageInstance"),Zh=Symbol("getValidationInstance"),w$=Symbol("hasParseCallback"),Eh=Symbol("isGlobalContext"),l0=Symbol("postProcess"),Ih=Symbol("rebase"),zf=Symbol("reset"),Q$=Symbol("runYargsParserAndExecuteCommands"),Gf=Symbol("runValidation"),Qh=Symbol("setHasOutput"),y0=Symbol("kTrackManuallySetKeys");class Nh{constructor($=[],f,h,z){this.customScriptName=!1,this.parsed=!1,e.set(this,void 0),m0.set(this,void 0),I$.set(this,{commands:[],fullCommands:[]}),L0.set(this,null),E0.set(this,null),j$.set(this,"show-hidden"),n0.set(this,null),p0.set(this,!0),V$.set(this,{}),U0.set(this,!0),Y$.set(this,[]),q0.set(this,void 0),P0.set(this,{}),I0.set(this,!1),T0.set(this,null),H$.set(this,!0),f$.set(this,void 0),O0.set(this,""),D.set(this,void 0),P$.set(this,void 0),S$.set(this,{}),Q0.set(this,null),i0.set(this,null),h$.set(this,{}),d0.set(this,{}),b0.set(this,void 0),K$.set(this,!1),x.set(this,void 0),o0.set(this,!1),v0.set(this,!1),g0.set(this,!1),t.set(this,void 0),R$.set(this,{}),S0.set(this,null),r.set(this,void 0),S(this,x,z,"f"),S(this,b0,$,"f"),S(this,m0,f,"f"),S(this,P$,h,"f"),S(this,q0,new v$(this),"f"),this.$0=this[ef](),this[zf](),S(this,e,M(this,e,"f"),"f"),S(this,t,M(this,t,"f"),"f"),S(this,r,M(this,r,"f"),"f"),S(this,D,M(this,D,"f"),"f"),M(this,D,"f").showHiddenOpt=M(this,j$,"f"),S(this,f$,this[sf](),"f")}addHelpOpt($,f){if(P("[string|boolean] [string]",[$,f],arguments.length),M(this,T0,"f"))this[y$](M(this,T0,"f")),S(this,T0,null,"f");if($===!1&&f===void 0)return this;return S(this,T0,typeof $==="string"?$:"help","f"),this.boolean(M(this,T0,"f")),this.describe(M(this,T0,"f"),f||M(this,t,"f").deferY18nLookup("Show help")),this}help($,f){return this.addHelpOpt($,f)}addShowHiddenOpt($,f){if(P("[string|boolean] [string]",[$,f],arguments.length),$===!1&&f===void 0)return this;let h=typeof $==="string"?$:M(this,j$,"f");return this.boolean(h),this.describe(h,f||M(this,t,"f").deferY18nLookup("Show hidden options")),M(this,D,"f").showHiddenOpt=h,this}showHidden($,f){return this.addShowHiddenOpt($,f)}alias($,f){return P("<object|string|array> [string|array]",[$,f],arguments.length),this[a$](this.alias.bind(this),"alias",$,f),this}array($){return P("<array|string>",[$],arguments.length),this[t0]("array",$),this[y0]($),this}boolean($){return P("<array|string>",[$],arguments.length),this[t0]("boolean",$),this[y0]($),this}check($,f){return P("<function> [boolean]",[$,f],arguments.length),this.middleware((h,z)=>{return c0(()=>{return $(h,z.getOptions())},(G)=>{if(!G)M(this,t,"f").fail(M(this,x,"f").y18n.__("Argument check failed: %s",$.toString()));else if(typeof G==="string"||G instanceof Error)M(this,t,"f").fail(G.toString(),G);return h},(G)=>{return M(this,t,"f").fail(G.message?G.message:G.toString(),G),h})},!1,f),this}choices($,f){return P("<object|string|array> [string|array]",[$,f],arguments.length),this[a$](this.choices.bind(this),"choices",$,f),this}coerce($,f){if(P("<object|string|array> [function]",[$,f],arguments.length),Array.isArray($)){if(!f)throw new g("coerce callback must be provided");for(let h of $)this.coerce(h,f);return this}else if(typeof $==="object"){for(let h of Object.keys($))this.coerce(h,$[h]);return this}if(!f)throw new g("coerce callback must be provided");return M(this,D,"f").key[$]=!0,M(this,q0,"f").addCoerceMiddleware((h,z)=>{let G;if(!Object.prototype.hasOwnProperty.call(h,$))return h;return c0(()=>{return G=z.getAliases(),f(h[$])},(B)=>{h[$]=B;let U=z.getInternalMethods().getParserConfiguration()["strip-aliased"];if(G[$]&&U!==!0)for(let I of G[$])h[I]=B;return h},(B)=>{throw new g(B.message)})},$),this}conflicts($,f){return P("<string|object> [string|array]",[$,f],arguments.length),M(this,r,"f").conflicts($,f),this}config($="config",f,h){if(P("[object|string] [string|function] [function]",[$,f,h],arguments.length),typeof $==="object"&&!Array.isArray($))return $=E$($,M(this,m0,"f"),this[k0]()["deep-merge-config"]||!1,M(this,x,"f")),M(this,D,"f").configObjects=(M(this,D,"f").configObjects||[]).concat($),this;if(typeof f==="function")h=f,f=void 0;return this.describe($,f||M(this,t,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray($)?$:[$]).forEach((z)=>{M(this,D,"f").config[z]=h||!0}),this}completion($,f,h){if(P("[string] [string|boolean|function] [function]",[$,f,h],arguments.length),typeof f==="function")h=f,f=void 0;if(S(this,E0,$||M(this,E0,"f")||"completion","f"),!f&&f!==!1)f="generate completion script";if(this.command(M(this,E0,"f"),f),h)M(this,L0,"f").registerFunction(h);return this}command($,f,h,z,G,O){return P("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[$,f,h,z,G,O],arguments.length),M(this,e,"f").addHandler($,f,h,z,G,O),this}commands($,f,h,z,G,O){return this.command($,f,h,z,G,O)}commandDir($,f){P("<string> [object]",[$,f],arguments.length);let h=M(this,P$,"f")||M(this,x,"f").require;return M(this,e,"f").addDirectory($,h,M(this,x,"f").getCallerFile(),f),this}count($){return P("<array|string>",[$],arguments.length),this[t0]("count",$),this[y0]($),this}default($,f,h){if(P("<object|string|array> [*] [string]",[$,f,h],arguments.length),h)o$($,M(this,x,"f")),M(this,D,"f").defaultDescription[$]=h;if(typeof f==="function"){if(o$($,M(this,x,"f")),!M(this,D,"f").defaultDescription[$])M(this,D,"f").defaultDescription[$]=M(this,t,"f").functionDescription(f);f=f.call()}return this[z$](this.default.bind(this),"default",$,f),this}defaults($,f,h){return this.default($,f,h)}demandCommand($=1,f,h,z){if(P("[number] [number|string] [string|null|undefined] [string|null|undefined]",[$,f,h,z],arguments.length),typeof f!=="number")h=f,f=1/0;return this.global("_",!1),M(this,D,"f").demandedCommands._={min:$,max:f,minMsg:h,maxMsg:z},this}demand($,f,h){if(Array.isArray(f))f.forEach((z)=>{X0(h,!0,M(this,x,"f")),this.demandOption(z,h)}),f=1/0;else if(typeof f!=="number")h=f,f=1/0;if(typeof $==="number")X0(h,!0,M(this,x,"f")),this.demandCommand($,f,h,h);else if(Array.isArray($))$.forEach((z)=>{X0(h,!0,M(this,x,"f")),this.demandOption(z,h)});else if(typeof h==="string")this.demandOption($,h);else if(h===!0||typeof h>"u")this.demandOption($);return this}demandOption($,f){return P("<object|string|array> [string]",[$,f],arguments.length),this[z$](this.demandOption.bind(this),"demandedOptions",$,f),this}deprecateOption($,f){return P("<string> [string|boolean]",[$,f],arguments.length),M(this,D,"f").deprecatedOptions[$]=f,this}describe($,f){return P("<object|string|array> [string]",[$,f],arguments.length),this[ff]($,!0),M(this,t,"f").describe($,f),this}detectLocale($){return P("<boolean>",[$],arguments.length),S(this,p0,$,"f"),this}env($){if(P("[string|boolean]",[$],arguments.length),$===!1)delete M(this,D,"f").envPrefix;else M(this,D,"f").envPrefix=$||"";return this}epilogue($){return P("<string>",[$],arguments.length),M(this,t,"f").epilog($),this}epilog($){return this.epilogue($)}example($,f){if(P("<string|array> [string]",[$,f],arguments.length),Array.isArray($))$.forEach((h)=>this.example(...h));else M(this,t,"f").example($,f);return this}exit($,f){if(S(this,I0,!0,"f"),S(this,n0,f,"f"),M(this,U0,"f"))M(this,x,"f").process.exit($)}exitProcess($=!0){return P("[boolean]",[$],arguments.length),S(this,U0,$,"f"),this}fail($){if(P("<function|boolean>",[$],arguments.length),typeof $==="boolean"&&$!==!1)throw new g("Invalid first argument. Expected function or boolean 'false'");return M(this,t,"f").failFn($),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion($,f){if(P("<array> [function]",[$,f],arguments.length),!f)return new Promise((h,z)=>{M(this,L0,"f").getCompletion($,(G,O)=>{if(G)z(G);else h(O)})});else return M(this,L0,"f").getCompletion($,f)}getDemandedOptions(){return P([],0),M(this,D,"f").demandedOptions}getDemandedCommands(){return P([],0),M(this,D,"f").demandedCommands}getDeprecatedOptions(){return P([],0),M(this,D,"f").deprecatedOptions}getDetectLocale(){return M(this,p0,"f")}getExitProcess(){return M(this,U0,"f")}getGroups(){return Object.assign({},M(this,P0,"f"),M(this,d0,"f"))}getHelp(){if(S(this,I0,!0,"f"),!M(this,t,"f").hasCachedHelpMessage()){if(!this.parsed){let f=this[Q$](M(this,b0,"f"),void 0,void 0,0,!0);if(k(f))return f.then(()=>{return M(this,t,"f").help()})}let $=M(this,e,"f").runDefaultBuilderOn(this);if(k($))return $.then(()=>{return M(this,t,"f").help()})}return Promise.resolve(M(this,t,"f").help())}getOptions(){return M(this,D,"f")}getStrict(){return M(this,o0,"f")}getStrictCommands(){return M(this,v0,"f")}getStrictOptions(){return M(this,g0,"f")}global($,f){if(P("<string|array> [boolean]",[$,f],arguments.length),$=[].concat($),f!==!1)M(this,D,"f").local=M(this,D,"f").local.filter((h)=>$.indexOf(h)===-1);else $.forEach((h)=>{if(!M(this,D,"f").local.includes(h))M(this,D,"f").local.push(h)});return this}group($,f){P("<string|array> <string>",[$,f],arguments.length);let h=M(this,d0,"f")[f]||M(this,P0,"f")[f];if(M(this,d0,"f")[f])delete M(this,d0,"f")[f];let z={};return M(this,P0,"f")[f]=(h||[]).concat($).filter((G)=>{if(z[G])return!1;return z[G]=!0}),this}hide($){return P("<string>",[$],arguments.length),M(this,D,"f").hiddenOptions.push($),this}implies($,f){return P("<string|object> [number|string|array]",[$,f],arguments.length),M(this,r,"f").implies($,f),this}locale($){if(P("[string]",[$],arguments.length),$===void 0)return this[s$](),M(this,x,"f").y18n.getLocale();return S(this,p0,!1,"f"),M(this,x,"f").y18n.setLocale($),this}middleware($,f,h){return M(this,q0,"f").addMiddleware($,!!f,h)}nargs($,f){return P("<string|object|array> [number]",[$,f],arguments.length),this[z$](this.nargs.bind(this),"narg",$,f),this}normalize($){return P("<array|string>",[$],arguments.length),this[t0]("normalize",$),this}number($){return P("<array|string>",[$],arguments.length),this[t0]("number",$),this[y0]($),this}option($,f){if(P("<string|object> [object]",[$,f],arguments.length),typeof $==="object")Object.keys($).forEach((h)=>{this.options(h,$[h])});else{if(typeof f!=="object")f={};if(this[y0]($),M(this,S0,"f")&&($==="version"||(f===null||f===void 0?void 0:f.alias)==="version"))this[rf](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join(`
`),void 0,"versionWarning");if(M(this,D,"f").key[$]=!0,f.alias)this.alias($,f.alias);let h=f.deprecate||f.deprecated;if(h)this.deprecateOption($,h);let z=f.demand||f.required||f.require;if(z)this.demand($,z);if(f.demandOption)this.demandOption($,typeof f.demandOption==="string"?f.demandOption:void 0);if(f.conflicts)this.conflicts($,f.conflicts);if("default"in f)this.default($,f.default);if(f.implies!==void 0)this.implies($,f.implies);if(f.nargs!==void 0)this.nargs($,f.nargs);if(f.config)this.config($,f.configParser);if(f.normalize)this.normalize($);if(f.choices)this.choices($,f.choices);if(f.coerce)this.coerce($,f.coerce);if(f.group)this.group($,f.group);if(f.boolean||f.type==="boolean"){if(this.boolean($),f.alias)this.boolean(f.alias)}if(f.array||f.type==="array"){if(this.array($),f.alias)this.array(f.alias)}if(f.number||f.type==="number"){if(this.number($),f.alias)this.number(f.alias)}if(f.string||f.type==="string"){if(this.string($),f.alias)this.string(f.alias)}if(f.count||f.type==="count")this.count($);if(typeof f.global==="boolean")this.global($,f.global);if(f.defaultDescription)M(this,D,"f").defaultDescription[$]=f.defaultDescription;if(f.skipValidation)this.skipValidation($);let G=f.describe||f.description||f.desc,O=M(this,t,"f").getDescriptions();if(!Object.prototype.hasOwnProperty.call(O,$)||typeof G==="string")this.describe($,G);if(f.hidden)this.hide($);if(f.requiresArg)this.requiresArg($)}return this}options($,f){return this.option($,f)}parse($,f,h){if(P("[string|array] [function|boolean|object] [function]",[$,f,h],arguments.length),this[af](),typeof $>"u")$=M(this,b0,"f");if(typeof f==="object")S(this,i0,f,"f"),f=h;if(typeof f==="function")S(this,Q0,f,"f"),f=!1;if(!f)S(this,b0,$,"f");if(M(this,Q0,"f"))S(this,U0,!1,"f");let z=this[Q$]($,!!f),G=this.parsed;if(M(this,L0,"f").setParsed(this.parsed),k(z))return z.then((O)=>{if(M(this,Q0,"f"))M(this,Q0,"f").call(this,M(this,n0,"f"),O,M(this,O0,"f"));return O}).catch((O)=>{if(M(this,Q0,"f"))M(this,Q0,"f")(O,this.parsed.argv,M(this,O0,"f"));throw O}).finally(()=>{this[hf](),this.parsed=G});else{if(M(this,Q0,"f"))M(this,Q0,"f").call(this,M(this,n0,"f"),z,M(this,O0,"f"));this[hf](),this.parsed=G}return z}parseAsync($,f,h){let z=this.parse($,f,h);return!k(z)?Promise.resolve(z):z}parseSync($,f,h){let z=this.parse($,f,h);if(k(z))throw new g(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return z}parserConfiguration($){return P("<object>",[$],arguments.length),S(this,S$,$,"f"),this}pkgConf($,f){P("<string> [string]",[$,f],arguments.length);let h=null,z=this[r$](f||M(this,m0,"f"));if(z[$]&&typeof z[$]==="object")h=E$(z[$],f||M(this,m0,"f"),this[k0]()["deep-merge-config"]||!1,M(this,x,"f")),M(this,D,"f").configObjects=(M(this,D,"f").configObjects||[]).concat(h);return this}positional($,f){P("<string> <object>",[$,f],arguments.length);let h=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];f=_0(f,(O,B)=>{if(O==="type"&&!["string","number","boolean"].includes(B))return!1;return h.includes(O)});let z=M(this,I$,"f").fullCommands[M(this,I$,"f").fullCommands.length-1],G=z?M(this,e,"f").cmdToParseOptions(z):{array:[],alias:{},default:{},demand:{}};return e0(G).forEach((O)=>{let B=G[O];if(Array.isArray(B)){if(B.indexOf($)!==-1)f[O]=!0}else if(B[$]&&!(O in f))f[O]=B[$]}),this.group($,M(this,t,"f").getPositionalGroupName()),this.option($,f)}recommendCommands($=!0){return P("[boolean]",[$],arguments.length),S(this,K$,$,"f"),this}required($,f,h){return this.demand($,f,h)}require($,f,h){return this.demand($,f,h)}requiresArg($){if(P("<array|string|object> [number]",[$],arguments.length),typeof $==="string"&&M(this,D,"f").narg[$])return this;else this[z$](this.requiresArg.bind(this),"narg",$,NaN);return this}showCompletionScript($,f){return P("[string] [string]",[$,f],arguments.length),$=$||this.$0,M(this,f$,"f").log(M(this,L0,"f").generateCompletionScript($,f||M(this,E0,"f")||"completion")),this}showHelp($){if(P("[string|function]",[$],arguments.length),S(this,I0,!0,"f"),!M(this,t,"f").hasCachedHelpMessage()){if(!this.parsed){let h=this[Q$](M(this,b0,"f"),void 0,void 0,0,!0);if(k(h))return h.then(()=>{M(this,t,"f").showHelp($)}),this}let f=M(this,e,"f").runDefaultBuilderOn(this);if(k(f))return f.then(()=>{M(this,t,"f").showHelp($)}),this}return M(this,t,"f").showHelp($),this}scriptName($){return this.customScriptName=!0,this.$0=$,this}showHelpOnFail($,f){return P("[boolean|string] [string]",[$,f],arguments.length),M(this,t,"f").showHelpOnFail($,f),this}showVersion($){return P("[string|function]",[$],arguments.length),M(this,t,"f").showVersion($),this}skipValidation($){return P("<array|string>",[$],arguments.length),this[t0]("skipValidation",$),this}strict($){return P("[boolean]",[$],arguments.length),S(this,o0,$!==!1,"f"),this}strictCommands($){return P("[boolean]",[$],arguments.length),S(this,v0,$!==!1,"f"),this}strictOptions($){return P("[boolean]",[$],arguments.length),S(this,g0,$!==!1,"f"),this}string($){return P("<array|string>",[$],arguments.length),this[t0]("string",$),this[y0]($),this}terminalWidth(){return P([],0),M(this,x,"f").process.stdColumns}updateLocale($){return this.updateStrings($)}updateStrings($){return P("<object>",[$],arguments.length),S(this,p0,!1,"f"),M(this,x,"f").y18n.updateLocale($),this}usage($,f,h,z){if(P("<string|null|undefined> [string|boolean] [function|object] [function]",[$,f,h,z],arguments.length),f!==void 0)if(X0($,null,M(this,x,"f")),($||"").match(/^\$0( |$)/))return this.command($,f,h,z);else throw new g(".usage() description must start with $0 if being used as alias for .command()");else return M(this,t,"f").usage($),this}usageConfiguration($){return P("<object>",[$],arguments.length),S(this,R$,$,"f"),this}version($,f,h){if(P("[boolean|string] [string] [string]",[$,f,h],arguments.length),M(this,S0,"f"))this[y$](M(this,S0,"f")),M(this,t,"f").version(void 0),S(this,S0,null,"f");if(arguments.length===0)h=this[fh](),$="version";else if(arguments.length===1){if($===!1)return this;h=$,$="version"}else if(arguments.length===2)h=f,f=void 0;return S(this,S0,typeof $==="string"?$:"version","f"),f=f||M(this,t,"f").deferY18nLookup("Show version number"),M(this,t,"f").version(h||void 0),this.boolean(M(this,S0,"f")),this.describe(M(this,S0,"f"),f),this}wrap($){return P("<number|null|undefined>",[$],arguments.length),M(this,t,"f").wrap($),this}[(e=new WeakMap,m0=new WeakMap,I$=new WeakMap,L0=new WeakMap,E0=new WeakMap,j$=new WeakMap,n0=new WeakMap,p0=new WeakMap,V$=new WeakMap,U0=new WeakMap,Y$=new WeakMap,q0=new WeakMap,P0=new WeakMap,I0=new WeakMap,T0=new WeakMap,H$=new WeakMap,f$=new WeakMap,O0=new WeakMap,D=new WeakMap,P$=new WeakMap,S$=new WeakMap,Q0=new WeakMap,i0=new WeakMap,h$=new WeakMap,d0=new WeakMap,b0=new WeakMap,K$=new WeakMap,x=new WeakMap,o0=new WeakMap,v0=new WeakMap,g0=new WeakMap,t=new WeakMap,R$=new WeakMap,S0=new WeakMap,r=new WeakMap,yf)]($){if(!$._||!$["--"])return $;$._.push.apply($._,$["--"]);try{delete $["--"]}catch(f){}return $}[sf](){return{log:(...$)=>{if(!this[w$]())console.log(...$);if(S(this,I0,!0,"f"),M(this,O0,"f").length)S(this,O0,M(this,O0,"f")+`
`,"f");S(this,O0,M(this,O0,"f")+$.join(" "),"f")},error:(...$)=>{if(!this[w$]())console.error(...$);if(S(this,I0,!0,"f"),M(this,O0,"f").length)S(this,O0,M(this,O0,"f")+`
`,"f");S(this,O0,M(this,O0,"f")+$.join(" "),"f")}}}[y$]($){e0(M(this,D,"f")).forEach((f)=>{if(((z)=>z==="configObjects")(f))return;let h=M(this,D,"f")[f];if(Array.isArray(h)){if(h.includes($))h.splice(h.indexOf($),1)}else if(typeof h==="object")delete h[$]}),delete M(this,t,"f").getDescriptions()[$]}[rf]($,f,h){if(!M(this,V$,"f")[h])M(this,x,"f").process.emitWarning($,f),M(this,V$,"f")[h]=!0}[af](){M(this,Y$,"f").push({options:M(this,D,"f"),configObjects:M(this,D,"f").configObjects.slice(0),exitProcess:M(this,U0,"f"),groups:M(this,P0,"f"),strict:M(this,o0,"f"),strictCommands:M(this,v0,"f"),strictOptions:M(this,g0,"f"),completionCommand:M(this,E0,"f"),output:M(this,O0,"f"),exitError:M(this,n0,"f"),hasOutput:M(this,I0,"f"),parsed:this.parsed,parseFn:M(this,Q0,"f"),parseContext:M(this,i0,"f")}),M(this,t,"f").freeze(),M(this,r,"f").freeze(),M(this,e,"f").freeze(),M(this,q0,"f").freeze()}[ef](){let $="",f;if(/\b(node|iojs|electron)(\.exe)?$/.test(M(this,x,"f").process.argv()[0]))f=M(this,x,"f").process.argv().slice(1,2);else f=M(this,x,"f").process.argv().slice(0,1);if($=f.map((h)=>{let z=this[Ih](M(this,m0,"f"),h);return h.match(/^(\/|([a-zA-Z]:)?\\)/)&&z.length<h.length?z:h}).join(" ").trim(),M(this,x,"f").getEnv("_")&&M(this,x,"f").getProcessArgvBin()===M(this,x,"f").getEnv("_"))$=M(this,x,"f").getEnv("_").replace(`${M(this,x,"f").path.dirname(M(this,x,"f").process.execPath())}/`,"");return $}[k0](){return M(this,S$,"f")}[$h](){return M(this,R$,"f")}[s$](){if(!M(this,p0,"f"))return;let $=M(this,x,"f").getEnv("LC_ALL")||M(this,x,"f").getEnv("LC_MESSAGES")||M(this,x,"f").getEnv("LANG")||M(this,x,"f").getEnv("LANGUAGE")||"en_US";this.locale($.replace(/[.:].*/,""))}[fh](){return this[r$]().version||"unknown"}[hh]($){let f=$["--"]?$["--"]:$._;for(let h=0,z;(z=f[h])!==void 0;h++)if(M(this,x,"f").Parser.looksLikeNumber(z)&&Number.isSafeInteger(Math.floor(parseFloat(`${z}`))))f[h]=Number(z);return $}[r$]($){let f=$||"*";if(M(this,h$,"f")[f])return M(this,h$,"f")[f];let h={};try{let z=$||M(this,x,"f").mainFilename;if(!$&&M(this,x,"f").path.extname(z))z=M(this,x,"f").path.dirname(z);let G=M(this,x,"f").findUp(z,(O,B)=>{if(B.includes("package.json"))return"package.json";else return});X0(G,void 0,M(this,x,"f")),h=JSON.parse(M(this,x,"f").readFileSync(G,"utf8"))}catch(z){}return M(this,h$,"f")[f]=h||{},M(this,h$,"f")[f]}[t0]($,f){f=[].concat(f),f.forEach((h)=>{h=this[$f](h),M(this,D,"f")[$].push(h)})}[z$]($,f,h,z){this[e$]($,f,h,z,(G,O,B)=>{M(this,D,"f")[G][O]=B})}[a$]($,f,h,z){this[e$]($,f,h,z,(G,O,B)=>{M(this,D,"f")[G][O]=(M(this,D,"f")[G][O]||[]).concat(B)})}[e$]($,f,h,z,G){if(Array.isArray(h))h.forEach((O)=>{$(O,z)});else if(((O)=>typeof O==="object")(h))for(let O of e0(h))$(O,h[O]);else G(f,this[$f](h),z)}[$f]($){if($==="__proto__")return"___proto___";return $}[ff]($,f){return this[z$](this[ff].bind(this),"key",$,f),this}[hf](){var $,f,h,z,G,O,B,U,I,N,V,Q;let L=M(this,Y$,"f").pop();X0(L,void 0,M(this,x,"f"));let j;$=this,f=this,h=this,z=this,G=this,O=this,B=this,U=this,I=this,N=this,V=this,Q=this,{options:{set value(q){S($,D,q,"f")}}.value,configObjects:j,exitProcess:{set value(q){S(f,U0,q,"f")}}.value,groups:{set value(q){S(h,P0,q,"f")}}.value,output:{set value(q){S(z,O0,q,"f")}}.value,exitError:{set value(q){S(G,n0,q,"f")}}.value,hasOutput:{set value(q){S(O,I0,q,"f")}}.value,parsed:this.parsed,strict:{set value(q){S(B,o0,q,"f")}}.value,strictCommands:{set value(q){S(U,v0,q,"f")}}.value,strictOptions:{set value(q){S(I,g0,q,"f")}}.value,completionCommand:{set value(q){S(N,E0,q,"f")}}.value,parseFn:{set value(q){S(V,Q0,q,"f")}}.value,parseContext:{set value(q){S(Q,i0,q,"f")}}.value}=L,M(this,D,"f").configObjects=j,M(this,t,"f").unfreeze(),M(this,r,"f").unfreeze(),M(this,e,"f").unfreeze(),M(this,q0,"f").unfreeze()}[zh]($,f){return c0(f,(h)=>{return $(h),h})}getInternalMethods(){return{getCommandInstance:this[Gh].bind(this),getContext:this[Mh].bind(this),getHasOutput:this[Oh].bind(this),getLoggerInstance:this[Bh].bind(this),getParseContext:this[Jh].bind(this),getParserConfiguration:this[k0].bind(this),getUsageConfiguration:this[$h].bind(this),getUsageInstance:this[Xh].bind(this),getValidationInstance:this[Zh].bind(this),hasParseCallback:this[w$].bind(this),isGlobalContext:this[Eh].bind(this),postProcess:this[l0].bind(this),reset:this[zf].bind(this),runValidation:this[Gf].bind(this),runYargsParserAndExecuteCommands:this[Q$].bind(this),setHasOutput:this[Qh].bind(this)}}[Gh](){return M(this,e,"f")}[Mh](){return M(this,I$,"f")}[Oh](){return M(this,I0,"f")}[Bh](){return M(this,f$,"f")}[Jh](){return M(this,i0,"f")||{}}[Xh](){return M(this,t,"f")}[Zh](){return M(this,r,"f")}[w$](){return!!M(this,Q0,"f")}[Eh](){return M(this,H$,"f")}[l0]($,f,h,z){if(h)return $;if(k($))return $;if(!f)$=this[yf]($);if(this[k0]()["parse-positional-numbers"]||this[k0]()["parse-positional-numbers"]===void 0)$=this[hh]($);if(z)$=A0($,this,M(this,q0,"f").getMiddleware(),!1);return $}[zf]($={}){S(this,D,M(this,D,"f")||{},"f");let f={};f.local=M(this,D,"f").local||[],f.configObjects=M(this,D,"f").configObjects||[];let h={};f.local.forEach((O)=>{h[O]=!0,($[O]||[]).forEach((B)=>{h[B]=!0})}),Object.assign(M(this,d0,"f"),Object.keys(M(this,P0,"f")).reduce((O,B)=>{let U=M(this,P0,"f")[B].filter((I)=>!(I in h));if(U.length>0)O[B]=U;return O},{})),S(this,P0,{},"f");let z=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],G=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];if(z.forEach((O)=>{f[O]=(M(this,D,"f")[O]||[]).filter((B)=>!h[B])}),G.forEach((O)=>{f[O]=_0(M(this,D,"f")[O],(B)=>!h[B])}),f.envPrefix=M(this,D,"f").envPrefix,S(this,D,f,"f"),S(this,t,M(this,t,"f")?M(this,t,"f").reset(h):cf(this,M(this,x,"f")),"f"),S(this,r,M(this,r,"f")?M(this,r,"f").reset(h):kf(this,M(this,t,"f"),M(this,x,"f")),"f"),S(this,e,M(this,e,"f")?M(this,e,"f").reset():tf(M(this,t,"f"),M(this,r,"f"),M(this,q0,"f"),M(this,x,"f")),"f"),!M(this,L0,"f"))S(this,L0,of(this,M(this,t,"f"),M(this,e,"f"),M(this,x,"f")),"f");return M(this,q0,"f").reset(),S(this,E0,null,"f"),S(this,O0,"","f"),S(this,n0,null,"f"),S(this,I0,!1,"f"),this.parsed=!1,this}[Ih]($,f){return M(this,x,"f").path.relative($,f)}[Q$]($,f,h,z=0,G=!1){let O=!!h||G;$=$||M(this,b0,"f"),M(this,D,"f").__=M(this,x,"f").y18n.__,M(this,D,"f").configuration=this[k0]();let B=!!M(this,D,"f").configuration["populate--"],U=Object.assign({},M(this,D,"f").configuration,{"populate--":!0}),I=M(this,x,"f").Parser.detailed($,Object.assign({},M(this,D,"f"),{configuration:{"parse-positional-numbers":!1,...U}})),N=Object.assign(I.argv,M(this,i0,"f")),V=void 0,Q=I.aliases,L=!1,j=!1;if(Object.keys(N).forEach((q)=>{if(q===M(this,T0,"f")&&N[q])L=!0;else if(q===M(this,S0,"f")&&N[q])j=!0}),N.$0=this.$0,this.parsed=I,z===0)M(this,t,"f").clearCachedHelpMessage();try{if(this[s$](),f)return this[l0](N,B,!!h,!1);if(M(this,T0,"f")){if([M(this,T0,"f")].concat(Q[M(this,T0,"f")]||[]).filter((m)=>m.length>1).includes(""+N._[N._.length-1]))N._.pop(),L=!0}S(this,H$,!1,"f");let q=M(this,e,"f").getCommands(),E=M(this,L0,"f").completionKey in N,b=L||E||G;if(N._.length){if(q.length){let u;for(let m=z||0,$0;N._[m]!==void 0;m++)if($0=String(N._[m]),q.includes($0)&&$0!==M(this,E0,"f")){let A=M(this,e,"f").runCommand($0,this,I,m+1,G,L||j||G);return this[l0](A,B,!!h,!1)}else if(!u&&$0!==M(this,E0,"f")){u=$0;break}if(!M(this,e,"f").hasDefaultCommand()&&M(this,K$,"f")&&u&&!b)M(this,r,"f").recommendCommands(u,q)}if(M(this,E0,"f")&&N._.includes(M(this,E0,"f"))&&!E){if(M(this,U0,"f"))x0(!0);this.showCompletionScript(),this.exit(0)}}if(M(this,e,"f").hasDefaultCommand()&&!b){let u=M(this,e,"f").runCommand(null,this,I,0,G,L||j||G);return this[l0](u,B,!!h,!1)}if(E){if(M(this,U0,"f"))x0(!0);$=[].concat($);let u=$.slice($.indexOf(`--${M(this,L0,"f").completionKey}`)+1);return M(this,L0,"f").getCompletion(u,(m,$0)=>{if(m)throw new g(m.message);($0||[]).forEach((A)=>{M(this,f$,"f").log(A)}),this.exit(0)}),this[l0](N,!B,!!h,!1)}if(!M(this,I0,"f")){if(L){if(M(this,U0,"f"))x0(!0);O=!0,this.showHelp("log"),this.exit(0)}else if(j){if(M(this,U0,"f"))x0(!0);O=!0,M(this,t,"f").showVersion("log"),this.exit(0)}}if(!O&&M(this,D,"f").skipValidation.length>0)O=Object.keys(N).some((u)=>M(this,D,"f").skipValidation.indexOf(u)>=0&&N[u]===!0);if(!O){if(I.error)throw new g(I.error.message);if(!E){let u=this[Gf](Q,{},I.error);if(!h)V=A0(N,this,M(this,q0,"f").getMiddleware(),!0);if(V=this[zh](u,V!==null&&V!==void 0?V:N),k(V)&&!h)V=V.then(()=>{return A0(N,this,M(this,q0,"f").getMiddleware(),!1)})}}}catch(q){if(q instanceof g)M(this,t,"f").fail(q.message,q);else throw q}return this[l0](V!==null&&V!==void 0?V:N,B,!!h,!0)}[Gf]($,f,h,z){let G={...this.getDemandedOptions()};return(O)=>{if(h)throw new g(h.message);M(this,r,"f").nonOptionCount(O),M(this,r,"f").requiredArguments(O,G);let B=!1;if(M(this,v0,"f"))B=M(this,r,"f").unknownCommands(O);if(M(this,o0,"f")&&!B)M(this,r,"f").unknownArguments(O,$,f,!!z);else if(M(this,g0,"f"))M(this,r,"f").unknownArguments(O,$,{},!1,!1);M(this,r,"f").limitedChoices(O),M(this,r,"f").implications(O),M(this,r,"f").conflicting(O)}}[Qh](){S(this,I0,!0,"f")}[y0]($){if(typeof $==="string")M(this,D,"f").key[$]=!0;else for(let f of $)M(this,D,"f").key[f]=!0}}function uf($){return!!$&&typeof $.getInternalMethods==="function"}var Y1=Wh(d$),Lh=Y1;var Uh=($=0)=>(f)=>`\x1B[${f+$}m`,qh=($=0)=>(f)=>`\x1B[${38+$};5;${f}m`,Th=($=0)=>(f,h,z)=>`\x1B[${38+$};2;${f};${h};${z}m`,l={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},g8=Object.keys(l.modifier),H1=Object.keys(l.color),P1=Object.keys(l.bgColor),k8=[...H1,...P1];function S1(){let $=new Map;for(let[f,h]of Object.entries(l)){for(let[z,G]of Object.entries(h))l[z]={open:`\x1B[${G[0]}m`,close:`\x1B[${G[1]}m`},h[z]=l[z],$.set(G[0],G[1]);Object.defineProperty(l,f,{value:h,enumerable:!1})}return Object.defineProperty(l,"codes",{value:$,enumerable:!1}),l.color.close="\x1B[39m",l.bgColor.close="\x1B[49m",l.color.ansi=Uh(),l.color.ansi256=qh(),l.color.ansi16m=Th(),l.bgColor.ansi=Uh(10),l.bgColor.ansi256=qh(10),l.bgColor.ansi16m=Th(10),Object.defineProperties(l,{rgbToAnsi256:{value(f,h,z){if(f===h&&h===z){if(f<8)return 16;if(f>248)return 231;return Math.round((f-8)/247*24)+232}return 16+36*Math.round(f/255*5)+6*Math.round(h/255*5)+Math.round(z/255*5)},enumerable:!1},hexToRgb:{value(f){let h=/[a-f\d]{6}|[a-f\d]{3}/i.exec(f.toString(16));if(!h)return[0,0,0];let[z]=h;if(z.length===3)z=[...z].map((O)=>O+O).join("");let G=Number.parseInt(z,16);return[G>>16&255,G>>8&255,G&255]},enumerable:!1},hexToAnsi256:{value:(f)=>l.rgbToAnsi256(...l.hexToRgb(f)),enumerable:!1},ansi256ToAnsi:{value(f){if(f<8)return 30+f;if(f<16)return 90+(f-8);let h,z,G;if(f>=232)h=((f-232)*10+8)/255,z=h,G=h;else{f-=16;let U=f%36;h=Math.floor(f/36)/5,z=Math.floor(U/6)/5,G=U%6/5}let O=Math.max(h,z,G)*2;if(O===0)return 30;let B=30+(Math.round(G)<<2|Math.round(z)<<1|Math.round(h));if(O===2)B+=60;return B},enumerable:!1},rgbToAnsi:{value:(f,h,z)=>l.ansi256ToAnsi(l.rgbToAnsi256(f,h,z)),enumerable:!1},hexToAnsi:{value:(f)=>l.ansi256ToAnsi(l.hexToAnsi256(f)),enumerable:!1}}),l}var K1=S1(),H0=K1;import Mf from"process";import R1 from"os";import jh from"tty";function j0($,f=globalThis.Deno?globalThis.Deno.args:Mf.argv){let h=$.startsWith("-")?"":$.length===1?"-":"--",z=f.indexOf(h+$),G=f.indexOf("--");return z!==-1&&(G===-1||z<G)}var{env:y}=Mf,D$;if(j0("no-color")||j0("no-colors")||j0("color=false")||j0("color=never"))D$=0;else if(j0("color")||j0("colors")||j0("color=true")||j0("color=always"))D$=1;function w1(){if("FORCE_COLOR"in y){if(y.FORCE_COLOR==="true")return 1;if(y.FORCE_COLOR==="false")return 0;return y.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(y.FORCE_COLOR,10),3)}}function D1($){if($===0)return!1;return{level:$,hasBasic:!0,has256:$>=2,has16m:$>=3}}function F1($,{streamIsTTY:f,sniffFlags:h=!0}={}){let z=w1();if(z!==void 0)D$=z;let G=h?D$:z;if(G===0)return 0;if(h){if(j0("color=16m")||j0("color=full")||j0("color=truecolor"))return 3;if(j0("color=256"))return 2}if("TF_BUILD"in y&&"AGENT_NAME"in y)return 1;if($&&!f&&G===void 0)return 0;let O=G||0;if(y.TERM==="dumb")return O;if(Mf.platform==="win32"){let B=R1.release().split(".");if(Number(B[0])>=10&&Number(B[2])>=10586)return Number(B[2])>=14931?3:2;return 1}if("CI"in y){if(["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some((B)=>(B in y)))return 3;if(["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some((B)=>(B in y))||y.CI_NAME==="codeship")return 1;return O}if("TEAMCITY_VERSION"in y)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(y.TEAMCITY_VERSION)?1:0;if(y.COLORTERM==="truecolor")return 3;if(y.TERM==="xterm-kitty")return 3;if(y.TERM==="xterm-ghostty")return 3;if(y.TERM==="wezterm")return 3;if("TERM_PROGRAM"in y){let B=Number.parseInt((y.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(y.TERM_PROGRAM){case"iTerm.app":return B>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(y.TERM))return 2;if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(y.TERM))return 1;if("COLORTERM"in y)return 1;return O}function Vh($,f={}){let h=F1($,{streamIsTTY:$&&$.isTTY,...f});return D1(h)}var C1={stdout:Vh({isTTY:jh.isatty(1)}),stderr:Vh({isTTY:jh.isatty(2)})},Yh=C1;function Hh($,f,h){let z=$.indexOf(f);if(z===-1)return $;let G=f.length,O=0,B="";do B+=$.slice(O,z)+f+h,O=z+G,z=$.indexOf(f,O);while(z!==-1);return B+=$.slice(O),B}function Ph($,f,h,z){let G=0,O="";do{let B=$[z-1]==="\r";O+=$.slice(G,B?z-1:z)+f+(B?`\r
`:`
`)+h,G=z+1,z=$.indexOf(`
`,G)}while(z!==-1);return O+=$.slice(G),O}var{stdout:Sh,stderr:Kh}=Yh,Of=Symbol("GENERATOR"),G$=Symbol("STYLER"),W$=Symbol("IS_EMPTY"),Rh=["ansi","ansi","ansi256","ansi16m"],M$=Object.create(null),_1=($,f={})=>{if(f.level&&!(Number.isInteger(f.level)&&f.level>=0&&f.level<=3))throw Error("The `level` option should be an integer from 0 to 3");let h=Sh?Sh.level:0;$.level=f.level===void 0?h:f.level};var x1=($)=>{let f=(...h)=>h.join(" ");return _1(f,$),Object.setPrototypeOf(f,N$.prototype),f};function N$($){return x1($)}Object.setPrototypeOf(N$.prototype,Function.prototype);for(let[$,f]of Object.entries(H0))M$[$]={get(){let h=F$(this,Jf(f.open,f.close,this[G$]),this[W$]);return Object.defineProperty(this,$,{value:h}),h}};M$.visible={get(){let $=F$(this,this[G$],!0);return Object.defineProperty(this,"visible",{value:$}),$}};var Bf=($,f,h,...z)=>{if($==="rgb"){if(f==="ansi16m")return H0[h].ansi16m(...z);if(f==="ansi256")return H0[h].ansi256(H0.rgbToAnsi256(...z));return H0[h].ansi(H0.rgbToAnsi(...z))}if($==="hex")return Bf("rgb",f,h,...H0.hexToRgb(...z));return H0[h][$](...z)},n1=["rgb","hex","ansi256"];for(let $ of n1){M$[$]={get(){let{level:h}=this;return function(...z){let G=Jf(Bf($,Rh[h],"color",...z),H0.color.close,this[G$]);return F$(this,G,this[W$])}}};let f="bg"+$[0].toUpperCase()+$.slice(1);M$[f]={get(){let{level:h}=this;return function(...z){let G=Jf(Bf($,Rh[h],"bgColor",...z),H0.bgColor.close,this[G$]);return F$(this,G,this[W$])}}}}var b1=Object.defineProperties(()=>{},{...M$,level:{enumerable:!0,get(){return this[Of].level},set($){this[Of].level=$}}}),Jf=($,f,h)=>{let z,G;if(h===void 0)z=$,G=f;else z=h.openAll+$,G=f+h.closeAll;return{open:$,close:f,openAll:z,closeAll:G,parent:h}},F$=($,f,h)=>{let z=(...G)=>t1(z,G.length===1?""+G[0]:G.join(" "));return Object.setPrototypeOf(z,b1),z[Of]=$,z[G$]=f,z[W$]=h,z},t1=($,f)=>{if($.level<=0||!f)return $[W$]?"":f;let h=$[G$];if(h===void 0)return f;let{openAll:z,closeAll:G}=h;if(f.includes("\x1B"))while(h!==void 0)f=Hh(f,h.close,h.open),h=h.parent;let O=f.indexOf(`
`);if(O!==-1)f=Ph(f,G,z,O);return z+f+G};Object.defineProperties(N$.prototype,M$);var u1=N$(),zG=N$({level:Kh?Kh.level:0});var s=u1;import{join as Xf,extname as c1,basename as C$,dirname as m1}from"path";import{existsSync as p1,renameSync as i1,unlinkSync as wh}from"fs";var Dh=["mpeg4","msmpeg4v3","mpeg2video","vc1","theora","vp8","h263","flv1"],V0=await Lh(i$(process.argv)).option("dir",{alias:"d",type:"string",description:"Directory to scan",default:"."}).option("limit",{alias:"l",type:"number",description:"Limit the number of files to convert",default:1/0}).option("dry-run",{type:"boolean",description:"Scan and identify files without converting",default:!1}).option("preset",{type:"number",description:"SVT-AV1 preset (0-13, lower is slower/better)",default:6}).option("crf",{type:"number",description:"SVT-AV1 CRF (0-63, lower is higher quality)",default:30}).option("delete-original",{type:"boolean",description:"Delete the original file after successful conversion",default:!1}).option("upscale-to",{type:"string",description:"Upscale video if height is below target (e.g., 720p, 1080p)"}).help().argv;async function d1($){try{let h=(await Fh`ffprobe -v error -select_streams v:0 -show_entries stream=codec_name,height -of json ${$}`.json()).streams[0];return{codec:h.codec_name,height:h.height}}catch(f){return null}}function Ch($){if(!$)return null;let f=$.match(/(\d+)/);if(!f)return null;let h=parseInt(f[1]);if($.toLowerCase().includes("4k"))return 2160;return h}async function o1($,f){let h=m1($),z=c1($),G=C$($,z),O=Xf(h,`${G}.av1.mkv`);console.log(s.blue(`
Converting: ${C$($)}`));let B=Ch(V0["upscale-to"]),U=B&&f<B?["-vf",`scale=-2:${B}:flags=lanczos`]:[];if(U.length>0)console.log(s.yellow(`\u2191 Upscaling: ${f}p -> ${B}p`));else console.log(s.gray(`Height: ${f}p`));console.log(s.gray(`Output: ${C$(O)}`));try{if(await Fh`ffmpeg -nostdin -i ${$} -map 0 -c:v libsvtav1 -preset ${V0.preset} -crf ${V0.crf} ${U} -c:a copy -c:s copy ${O} -y`.quiet(),console.log(s.green("\u2713 Successfully converted to AV1")),V0["delete-original"]){console.log(s.yellow(`! Deleting original: ${C$($)}`)),wh($);let I=Xf(h,`${G}.mkv`);if(O!==I)i1(O,I)}else console.log(s.yellow(`i Original file kept. New file at ${O}`));return!0}catch(I){if(console.error(s.red(`\u2717 Failed to convert ${$}`)),p1(O))wh(O);return!1}}async function v1(){let $=V0.dir,f=Ch(V0["upscale-to"]);if(console.log(s.cyan(`
--- SKYLAB Media Converter ---`)),console.log(s.gray(`Scanning directory: ${$}`)),console.log(s.gray(`Targeting codecs: ${Dh.join(", ")}`)),f)console.log(s.yellow(`Target Upscale: ${f}p`));if(V0["dry-run"])console.log(s.yellow("Mode: DRY RUN (no files will be changed)"));if(V0.limit!==1/0)console.log(s.gray(`Limit: ${V0.limit} files`));let h=new A1("**/*.{avi,mp4,mkv,wmv,flv,mpg,mpeg,mov,ts}"),z=Array.from(h.scanSync($));console.log(s.gray(`Found ${z.length} potential media files.`));let G=0,O=0;for(let B of z){if(O>=V0.limit)break;let U=Xf($,B),I=await d1(U);if(I&&Dh.includes(I.codec)){G++;let N=f&&I.height<f?s.yellow(" [UP] "):" ";if(console.log(s.yellow(`[${I.codec}]`)+N+B),!V0["dry-run"]){if(await o1(U,I.height))O++}else O++}}if(console.log(s.cyan(`
--- Summary ---`)),console.log(s.gray(`Files scanned: ${z.length}`)),console.log(s.gray(`Files matching target codecs: ${G}`)),!V0["dry-run"])console.log(s.green(`Files successfully converted: ${O}`));else console.log(s.yellow(`Files that would be converted: ${O}`))}v1().catch(($)=>{console.error(s.red(`
An unexpected error occurred:`)),console.error($),process.exit(1)});
