# Session Context: Authelia SSO Integration & Secret Management

## 1. NixOS Upgrade (Target: 25.11)
- [x] **Upgrade Successful**: System running NixOS 25.11 with Kernel 6.12.
- [x] **Neovim Fix**: `snacks.nvim` build issue resolved by disabling strict require-check.
- [x] **Automation**: `update-nix` alias configured to auto-commit `flake.lock`.

## 2. SSO Infrastructure (New Goal)
**Objective**: Implement Authelia as a centralized SSO provider for services like Copyparty.

### Pending Information & Prerequisites
- [ ] User Public SSH Key (from Fedora staging machine).
- [ ] SKYLAB Host Public Key (`/etc/ssh/ssh_host_ed25519_key.pub`).
- [ ] Domain Name/Strategy (subdomains required).

### Implementation Plan
1.  **Secret Management**: Setup `agenix` to handle Authelia and user secrets.
2.  **Reverse Proxy**: Implement Nginx/Caddy as the entry point and Authelia portal.
3.  **Identity Provider**: Configure Authelia with a local user database.
4.  **App Integration**: Refactor `copyparty` to use `Remote-User` headers from the proxy.

## 3. Immediate Actions
- [ ] Re-enable `copyparty` in host config.
- [ ] Implement `agenix` foundations.
